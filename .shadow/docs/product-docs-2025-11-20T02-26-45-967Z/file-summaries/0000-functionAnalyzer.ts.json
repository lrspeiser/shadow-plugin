{
  "file": "src/analysis/functionAnalyzer.ts",
  "role": "Core Logic",
  "purpose": "Analyzes functions in large code files to extract detailed metadata including signatures, dependencies, and relationships for refactoring recommendations",
  "userVisibleActions": [
    "Identifies functions in large files that may need refactoring",
    "Provides detailed function analysis reports showing what each function does",
    "Shows which functions depend on each other",
    "Highlights functions that exceed complexity or size thresholds"
  ],
  "developerVisibleActions": [
    "Analyzes all functions in files exceeding a configurable line threshold (default 500 lines)",
    "Extracts function signatures including parameters and return types",
    "Maps function dependencies showing which functions call which",
    "Maps function dependents showing where each function is used",
    "Identifies function responsibilities and behavior patterns",
    "Returns structured FunctionAnalysis objects containing all extracted metadata",
    "Handles analysis failures gracefully with warnings",
    "Resolves file paths across different project structures"
  ],
  "keyFunctions": [
    {
      "name": "analyzeFunctions",
      "desc": "Analyzes all functions in files that exceed the size threshold and returns detailed analysis for each",
      "inputs": "CodeAnalysis object, optional largeFileThreshold (default 500)",
      "outputs": "Array of FunctionAnalysis objects containing function metadata"
    },
    {
      "name": "analyzeFunction",
      "desc": "Performs detailed analysis of a single function extracting its signature, dependencies, and relationships",
      "inputs": "File path, FunctionInfo object, CodeAnalysis context",
      "outputs": "FunctionAnalysis object or null if analysis fails"
    },
    {
      "name": "resolveFilePath",
      "desc": "Resolves relative file paths to absolute paths in the project structure",
      "inputs": "Relative file path, CodeAnalysis context",
      "outputs": "Absolute file path string"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "typescript",
    "../analyzer",
    "../domain/prompts/refactoringPromptBuilder"
  ],
  "intent": "This file exists to provide deep analysis of functions in large code files, extracting comprehensive metadata needed to generate intelligent refactoring recommendations. It solves the problem of understanding complex function relationships and dependencies when suggesting how to break down large files into smaller, more maintainable modules.",
  "rawContent": "```json\n{\n  \"purpose\": \"Analyzes functions in large code files to extract detailed metadata including signatures, dependencies, and relationships for refactoring recommendations\",\n  \"userVisibleActions\": [\n    \"Identifies functions in large files that may need refactoring\",\n    \"Provides detailed function analysis reports showing what each function does\",\n    \"Shows which functions depend on each other\",\n    \"Highlights functions that exceed complexity or size thresholds\"\n  ],\n  \"developerVisibleActions\": [\n    \"Analyzes all functions in files exceeding a configurable line threshold (default 500 lines)\",\n    \"Extracts function signatures including parameters and return types\",\n    \"Maps function dependencies showing which functions call which\",\n    \"Maps function dependents showing where each function is used\",\n    \"Identifies function responsibilities and behavior patterns\",\n    \"Returns structured FunctionAnalysis objects containing all extracted metadata\",\n    \"Handles analysis failures gracefully with warnings\",\n    \"Resolves file paths across different project structures\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"analyzeFunctions\",\n      \"desc\": \"Analyzes all functions in files that exceed the size threshold and returns detailed analysis for each\",\n      \"inputs\": \"CodeAnalysis object, optional largeFileThreshold (default 500)\",\n      \"outputs\": \"Array of FunctionAnalysis objects containing function metadata\"\n    },\n    {\n      \"name\": \"analyzeFunction\",\n      \"desc\": \"Performs detailed analysis of a single function extracting its signature, dependencies, and relationships\",\n      \"inputs\": \"File path, FunctionInfo object, CodeAnalysis context\",\n      \"outputs\": \"FunctionAnalysis object or null if analysis fails\"\n    },\n    {\n      \"name\": \"resolveFilePath\",\n      \"desc\": \"Resolves relative file paths to absolute paths in the project structure\",\n      \"inputs\": \"Relative file path, CodeAnalysis context\",\n      \"outputs\": \"Absolute file path string\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"typescript\",\n    \"../analyzer\",\n    \"../domain/prompts/refactoringPromptBuilder\"\n  ],\n  \"intent\": \"This file exists to provide deep analysis of functions in large code files, extracting comprehensive metadata needed to generate intelligent refactoring recommendations. It solves the problem of understanding complex function relationships and dependencies when suggesting how to break down large files into smaller, more maintainable modules.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T02:37:06.570Z"
  }
}