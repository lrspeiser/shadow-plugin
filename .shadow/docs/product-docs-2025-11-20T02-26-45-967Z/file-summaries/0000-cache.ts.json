{
  "file": "src/cache.ts",
  "role": "Core Logic",
  "purpose": "Manages persistent caching of code analysis results to improve performance by avoiding redundant analysis.",
  "userVisibleActions": [
    "Analysis results load faster when reopening a workspace (within 24 hours)",
    "Previously analyzed code doesn't need to be re-analyzed immediately",
    "Cache data is automatically cleaned up when old"
  ],
  "developerVisibleActions": [
    "Stores code analysis results in a hidden .shadowwatch-cache directory",
    "Automatically retrieves cached analysis when available and valid",
    "Cache expires after 24 hours requiring fresh analysis",
    "Cache can be manually cleared to force new analysis",
    "Failed cache operations are logged but don't break functionality"
  ],
  "keyFunctions": [
    {
      "name": "constructor",
      "desc": "Initializes cache storage location",
      "inputs": "storagePath: string",
      "outputs": "AnalysisCache instance"
    },
    {
      "name": "get",
      "desc": "Retrieves cached analysis results for a workspace if valid",
      "inputs": "workspaceRoot: string",
      "outputs": "Promise<CodeAnalysis | null>"
    },
    {
      "name": "set",
      "desc": "Saves analysis results to cache with timestamp",
      "inputs": "workspaceRoot: string, data: CodeAnalysis",
      "outputs": "Promise<void>"
    },
    {
      "name": "clear",
      "desc": "Removes all cached analysis data",
      "inputs": "none",
      "outputs": "Promise<void>"
    },
    {
      "name": "getCacheKey",
      "desc": "Generates a safe filename identifier from workspace path",
      "inputs": "workspaceRoot: string",
      "outputs": "string (base64 encoded safe filename)"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "./analyzer"
  ],
  "intent": "Improves extension performance by caching expensive code analysis results, preventing redundant analysis of the same codebase within a 24-hour window. This makes subsequent workspace loads faster and reduces computational overhead.",
  "rawContent": "```json\n{\n  \"purpose\": \"Manages persistent caching of code analysis results to improve performance by avoiding redundant analysis.\",\n  \"userVisibleActions\": [\n    \"Analysis results load faster when reopening a workspace (within 24 hours)\",\n    \"Previously analyzed code doesn't need to be re-analyzed immediately\",\n    \"Cache data is automatically cleaned up when old\"\n  ],\n  \"developerVisibleActions\": [\n    \"Stores code analysis results in a hidden .shadowwatch-cache directory\",\n    \"Automatically retrieves cached analysis when available and valid\",\n    \"Cache expires after 24 hours requiring fresh analysis\",\n    \"Cache can be manually cleared to force new analysis\",\n    \"Failed cache operations are logged but don't break functionality\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"constructor\",\n      \"desc\": \"Initializes cache storage location\",\n      \"inputs\": \"storagePath: string\",\n      \"outputs\": \"AnalysisCache instance\"\n    },\n    {\n      \"name\": \"get\",\n      \"desc\": \"Retrieves cached analysis results for a workspace if valid\",\n      \"inputs\": \"workspaceRoot: string\",\n      \"outputs\": \"Promise<CodeAnalysis | null>\"\n    },\n    {\n      \"name\": \"set\",\n      \"desc\": \"Saves analysis results to cache with timestamp\",\n      \"inputs\": \"workspaceRoot: string, data: CodeAnalysis\",\n      \"outputs\": \"Promise<void>\"\n    },\n    {\n      \"name\": \"clear\",\n      \"desc\": \"Removes all cached analysis data\",\n      \"inputs\": \"none\",\n      \"outputs\": \"Promise<void>\"\n    },\n    {\n      \"name\": \"getCacheKey\",\n      \"desc\": \"Generates a safe filename identifier from workspace path\",\n      \"inputs\": \"workspaceRoot: string\",\n      \"outputs\": \"string (base64 encoded safe filename)\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"./analyzer\"\n  ],\n  \"intent\": \"Improves extension performance by caching expensive code analysis results, preventing redundant analysis of the same codebase within a 24-hour window. This makes subsequent workspace loads faster and reduces computational overhead.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T02:37:48.170Z"
  }
}