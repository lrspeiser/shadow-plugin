{
  "file": "src/domain/prompts/promptBuilder.ts",
  "role": "Core Logic",
  "purpose": "Centralizes and standardizes the construction of LLM prompts for all code analysis, documentation, and testing tasks across the application.",
  "userVisibleActions": [
    "Documentation generation with consistent structure and formatting",
    "Architecture analysis results with standardized depth and detail",
    "Test plan generation following project conventions",
    "Module and file summaries with consistent organization",
    "Product-level documentation that combines all analysis results"
  ],
  "developerVisibleActions": [
    "Call buildArchitecturePrompt() to generate prompts for analyzing code architecture patterns",
    "Call buildProductDocsPrompt() to create prompts for generating product documentation",
    "Call buildProductPurposePrompt() to analyze and extract product purpose from documentation",
    "Call buildFileAnalysisPrompt() to generate file-level analysis prompts with role context",
    "Call buildModuleRollupPrompt() to create module-level summary prompts from file summaries",
    "Call buildProductLevelPrompt() to generate comprehensive product documentation prompts",
    "Call buildPerFileTestPlanPrompt() to create test planning prompts for individual files",
    "Call buildTestCodeGenerationPrompt() to generate actual test code from test plans",
    "All prompts are returned as formatted strings ready for LLM consumption",
    "Prompts include context, code analysis, and metadata to guide LLM responses",
    "Token budgets and formatting instructions are embedded in generated prompts"
  ],
  "keyFunctions": [
    {
      "name": "buildArchitecturePrompt",
      "desc": "Creates a prompt for LLM to analyze code architecture including patterns, structure, and design decisions",
      "inputs": "AnalysisContext, optional CodeAnalysis, ProductDocumentation, ProductPurposeAnalysis, FileAccessHelper",
      "outputs": "Formatted string prompt for architecture analysis"
    },
    {
      "name": "buildProductDocsPrompt",
      "desc": "Generates a prompt for extracting product documentation from existing files and context",
      "inputs": "AnalysisContext",
      "outputs": "Formatted string prompt for documentation extraction"
    },
    {
      "name": "buildProductPurposePrompt",
      "desc": "Creates a prompt to analyze and determine the core purpose and goals of the product",
      "inputs": "EnhancedProductDocumentation, AnalysisContext",
      "outputs": "Formatted string prompt for purpose analysis"
    },
    {
      "name": "buildFileAnalysisPrompt",
      "desc": "Generates a prompt for analyzing individual code files including their role and behavior",
      "inputs": "FileInfo, file content string, role string",
      "outputs": "Formatted string prompt for file-level analysis"
    },
    {
      "name": "buildModuleRollupPrompt",
      "desc": "Creates a prompt for summarizing multiple file summaries into a cohesive module summary",
      "inputs": "Module path, module type, array of FileSummary objects",
      "outputs": "Formatted string prompt for module rollup"
    },
    {
      "name": "buildProductLevelPrompt",
      "desc": "Generates a comprehensive prompt for creating product-wide documentation from all analyses",
      "inputs": "FileSummary array, ModuleSummary array, CodeAnalysis, FileAccessHelper",
      "outputs": "Formatted string prompt for product documentation"
    },
    {
      "name": "buildPerFileTestPlanPrompt",
      "desc": "Creates a prompt for generating test plans for individual files based on their functions",
      "inputs": "File path, content, FunctionMetadata array, existing tests, language, test framework, optional project summary",
      "outputs": "Formatted string prompt for test planning"
    },
    {
      "name": "buildTestCodeGenerationPrompt",
      "desc": "Generates a prompt for creating actual test code from test plan specifications",
      "inputs": "Test plan item, source code, function code, language, test framework",
      "outputs": "Formatted string prompt for test code generation"
    }
  ],
  "dependencies": [
    "../../llmService",
    "../../analyzer",
    "../../fileDocumentation",
    "../../fileAccessHelper"
  ],
  "intent": "This file exists to eliminate duplication and ensure consistency across all LLM prompt construction. By centralizing prompt building, it ensures that all AI-driven analysis, documentation, and testing tasks receive properly formatted, context-rich prompts with consistent structure, token budgets, and instructions, making LLM responses more reliable and maintainable.",
  "rawContent": "```json\n{\n  \"purpose\": \"Centralizes and standardizes the construction of LLM prompts for all code analysis, documentation, and testing tasks across the application.\",\n  \"userVisibleActions\": [\n    \"Documentation generation with consistent structure and formatting\",\n    \"Architecture analysis results with standardized depth and detail\",\n    \"Test plan generation following project conventions\",\n    \"Module and file summaries with consistent organization\",\n    \"Product-level documentation that combines all analysis results\"\n  ],\n  \"developerVisibleActions\": [\n    \"Call buildArchitecturePrompt() to generate prompts for analyzing code architecture patterns\",\n    \"Call buildProductDocsPrompt() to create prompts for generating product documentation\",\n    \"Call buildProductPurposePrompt() to analyze and extract product purpose from documentation\",\n    \"Call buildFileAnalysisPrompt() to generate file-level analysis prompts with role context\",\n    \"Call buildModuleRollupPrompt() to create module-level summary prompts from file summaries\",\n    \"Call buildProductLevelPrompt() to generate comprehensive product documentation prompts\",\n    \"Call buildPerFileTestPlanPrompt() to create test planning prompts for individual files\",\n    \"Call buildTestCodeGenerationPrompt() to generate actual test code from test plans\",\n    \"All prompts are returned as formatted strings ready for LLM consumption\",\n    \"Prompts include context, code analysis, and metadata to guide LLM responses\",\n    \"Token budgets and formatting instructions are embedded in generated prompts\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"buildArchitecturePrompt\",\n      \"desc\": \"Creates a prompt for LLM to analyze code architecture including patterns, structure, and design decisions\",\n      \"inputs\": \"AnalysisContext, optional CodeAnalysis, ProductDocumentation, ProductPurposeAnalysis, FileAccessHelper\",\n      \"outputs\": \"Formatted string prompt for architecture analysis\"\n    },\n    {\n      \"name\": \"buildProductDocsPrompt\",\n      \"desc\": \"Generates a prompt for extracting product documentation from existing files and context\",\n      \"inputs\": \"AnalysisContext\",\n      \"outputs\": \"Formatted string prompt for documentation extraction\"\n    },\n    {\n      \"name\": \"buildProductPurposePrompt\",\n      \"desc\": \"Creates a prompt to analyze and determine the core purpose and goals of the product\",\n      \"inputs\": \"EnhancedProductDocumentation, AnalysisContext\",\n      \"outputs\": \"Formatted string prompt for purpose analysis\"\n    },\n    {\n      \"name\": \"buildFileAnalysisPrompt\",\n      \"desc\": \"Generates a prompt for analyzing individual code files including their role and behavior\",\n      \"inputs\": \"FileInfo, file content string, role string\",\n      \"outputs\": \"Formatted string prompt for file-level analysis\"\n    },\n    {\n      \"name\": \"buildModuleRollupPrompt\",\n      \"desc\": \"Creates a prompt for summarizing multiple file summaries into a cohesive module summary\",\n      \"inputs\": \"Module path, module type, array of FileSummary objects\",\n      \"outputs\": \"Formatted string prompt for module rollup\"\n    },\n    {\n      \"name\": \"buildProductLevelPrompt\",\n      \"desc\": \"Generates a comprehensive prompt for creating product-wide documentation from all analyses\",\n      \"inputs\": \"FileSummary array, ModuleSummary array, CodeAnalysis, FileAccessHelper\",\n      \"outputs\": \"Formatted string prompt for product documentation\"\n    },\n    {\n      \"name\": \"buildPerFileTestPlanPrompt\",\n      \"desc\": \"Creates a prompt for generating test plans for individual files based on their functions\",\n      \"inputs\": \"File path, content, FunctionMetadata array, existing tests, language, test framework, optional project summary\",\n      \"outputs\": \"Formatted string prompt for test planning\"\n    },\n    {\n      \"name\": \"buildTestCodeGenerationPrompt\",\n      \"desc\": \"Generates a prompt for creating actual test code from test plan specifications\",\n      \"inputs\": \"Test plan item, source code, function code, language, test framework\",\n      \"outputs\": \"Formatted string prompt for test code generation\"\n    }\n  ],\n  \"dependencies\": [\n    \"../../llmService\",\n    \"../../analyzer\",\n    \"../../fileDocumentation\",\n    \"../../fileAccessHelper\"\n  ],\n  \"intent\": \"This file exists to eliminate duplication and ensure consistency across all LLM prompt construction. By centralizing prompt building, it ensures that all AI-driven analysis, documentation, and testing tasks receive properly formatted, context-rich prompts with consistent structure, token budgets, and instructions, making LLM responses more reliable and maintainable.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T02:39:33.808Z"
  }
}