{
  "file": "src/fileWatcher.ts",
  "role": "Core Logic",
  "purpose": "Monitors file changes in the workspace and automatically triggers code analysis when files are saved",
  "userVisibleActions": [
    "Code analysis runs automatically when saving a file (if 'analyze on save' is enabled)",
    "Diagnostics and insights update in the UI after file saves",
    "Analysis waits until typing stops (debounced) to avoid interrupting workflow",
    "User can see when analysis is in progress or completed"
  ],
  "developerVisibleActions": [
    "File watcher starts when extension activates if 'analyzeOnSave' configuration is enabled",
    "Watches for document save events in VS Code",
    "Triggers code analysis pipeline on file saves",
    "Updates diagnostics provider with new analysis results",
    "Refreshes insights tree view after analysis completes",
    "Prevents concurrent analysis runs to avoid performance issues",
    "Implements debouncing to batch rapid file saves",
    "Cleans up resources when stopped or disposed"
  ],
  "keyFunctions": [
    {
      "name": "start",
      "desc": "Begins watching for file save events and enables automatic analysis",
      "inputs": "None",
      "outputs": "void"
    },
    {
      "name": "stop",
      "desc": "Stops watching for file saves and cancels pending analysis",
      "inputs": "None",
      "outputs": "void"
    },
    {
      "name": "onFileSaved",
      "desc": "Handles file save events and schedules analysis with debouncing",
      "inputs": "document: vscode.TextDocument",
      "outputs": "void"
    },
    {
      "name": "analyzeFile",
      "desc": "Executes the full analysis pipeline for a saved file and updates UI",
      "inputs": "document: vscode.TextDocument",
      "outputs": "Promise<void>"
    },
    {
      "name": "dispose",
      "desc": "Cleans up file watcher resources and stops monitoring",
      "inputs": "None",
      "outputs": "void"
    }
  ],
  "dependencies": [
    "vscode",
    "path",
    "CodeAnalyzer",
    "InsightGenerator",
    "DiagnosticsProvider",
    "InsightsTreeProvider",
    "ConfigurationManager",
    "ErrorHandler",
    "FileWatcherService"
  ],
  "intent": "This file exists to provide automatic, real-time code analysis by watching for file changes in the workspace. It solves the problem of keeping code insights and diagnostics up-to-date without requiring manual user intervention, while intelligently managing when and how often analysis runs to balance responsiveness with performance.",
  "rawContent": "```json\n{\n  \"purpose\": \"Monitors file changes in the workspace and automatically triggers code analysis when files are saved\",\n  \"userVisibleActions\": [\n    \"Code analysis runs automatically when saving a file (if 'analyze on save' is enabled)\",\n    \"Diagnostics and insights update in the UI after file saves\",\n    \"Analysis waits until typing stops (debounced) to avoid interrupting workflow\",\n    \"User can see when analysis is in progress or completed\"\n  ],\n  \"developerVisibleActions\": [\n    \"File watcher starts when extension activates if 'analyzeOnSave' configuration is enabled\",\n    \"Watches for document save events in VS Code\",\n    \"Triggers code analysis pipeline on file saves\",\n    \"Updates diagnostics provider with new analysis results\",\n    \"Refreshes insights tree view after analysis completes\",\n    \"Prevents concurrent analysis runs to avoid performance issues\",\n    \"Implements debouncing to batch rapid file saves\",\n    \"Cleans up resources when stopped or disposed\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"start\",\n      \"desc\": \"Begins watching for file save events and enables automatic analysis\",\n      \"inputs\": \"None\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"stop\",\n      \"desc\": \"Stops watching for file saves and cancels pending analysis\",\n      \"inputs\": \"None\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"onFileSaved\",\n      \"desc\": \"Handles file save events and schedules analysis with debouncing\",\n      \"inputs\": \"document: vscode.TextDocument\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"analyzeFile\",\n      \"desc\": \"Executes the full analysis pipeline for a saved file and updates UI\",\n      \"inputs\": \"document: vscode.TextDocument\",\n      \"outputs\": \"Promise<void>\"\n    },\n    {\n      \"name\": \"dispose\",\n      \"desc\": \"Cleans up file watcher resources and stops monitoring\",\n      \"inputs\": \"None\",\n      \"outputs\": \"void\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"path\",\n    \"CodeAnalyzer\",\n    \"InsightGenerator\",\n    \"DiagnosticsProvider\",\n    \"InsightsTreeProvider\",\n    \"ConfigurationManager\",\n    \"ErrorHandler\",\n    \"FileWatcherService\"\n  ],\n  \"intent\": \"This file exists to provide automatic, real-time code analysis by watching for file changes in the workspace. It solves the problem of keeping code insights and diagnostics up-to-date without requiring manual user intervention, while intelligently managing when and how often analysis runs to balance responsiveness with performance.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T02:42:50.014Z"
  }
}