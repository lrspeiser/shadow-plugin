{
  "file": "src/domain/services/testing/llmTestGenerationService.ts",
  "role": "Core Logic",
  "purpose": "Generates unit tests for code functions in small batches using an LLM service, with progress tracking and execution validation.",
  "userVisibleActions": [
    "Progress updates showing current function being tested (e.g., 'Processing function 3 of 10: calculateTotal')",
    "Test generation results for each function with pass/fail status",
    "Error messages when test generation or execution fails",
    "Notifications about which functions have been successfully tested"
  ],
  "developerVisibleActions": [
    "Trigger test generation for a batch of functions by providing function metadata and workspace path",
    "Receive progress callbacks during batch processing showing which function is currently being processed",
    "Get structured test generation results including generated test code and execution status",
    "Access test state that tracks which functions have been processed and which remain",
    "View generated test code that can be saved to test files",
    "See whether generated tests pass or fail when executed",
    "Extract function source code from workspace files for test context"
  ],
  "keyFunctions": [
    {
      "name": "generateTestBatch",
      "desc": "Generates tests for multiple functions in a batch, calling LLM for each function and tracking progress",
      "inputs": "functions (array of TestableFunction), workspaceRoot (string), llmService (LLM service instance), onProgress (optional callback)",
      "outputs": "Map of function names to TestGenerationResult objects"
    },
    {
      "name": "extractFunctionSource",
      "desc": "Reads and extracts the source code of a specific function from the workspace files",
      "inputs": "func (TestableFunction), workspaceRoot (string)",
      "outputs": "Source code string for the function"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "./types/testPlanTypes",
    "./types/testResultTypes",
    "../../prompts/testPrompts",
    "./testExecutionService",
    "../../../logger"
  ],
  "intent": "Enables incremental, batch-based test generation using LLMs to avoid overwhelming the system with too many simultaneous test generation requests. Provides progress tracking so developers can monitor which functions are being tested and get immediate feedback on test generation success or failure.",
  "rawContent": "```json\n{\n  \"purpose\": \"Generates unit tests for code functions in small batches using an LLM service, with progress tracking and execution validation.\",\n  \"userVisibleActions\": [\n    \"Progress updates showing current function being tested (e.g., 'Processing function 3 of 10: calculateTotal')\",\n    \"Test generation results for each function with pass/fail status\",\n    \"Error messages when test generation or execution fails\",\n    \"Notifications about which functions have been successfully tested\"\n  ],\n  \"developerVisibleActions\": [\n    \"Trigger test generation for a batch of functions by providing function metadata and workspace path\",\n    \"Receive progress callbacks during batch processing showing which function is currently being processed\",\n    \"Get structured test generation results including generated test code and execution status\",\n    \"Access test state that tracks which functions have been processed and which remain\",\n    \"View generated test code that can be saved to test files\",\n    \"See whether generated tests pass or fail when executed\",\n    \"Extract function source code from workspace files for test context\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"generateTestBatch\",\n      \"desc\": \"Generates tests for multiple functions in a batch, calling LLM for each function and tracking progress\",\n      \"inputs\": \"functions (array of TestableFunction), workspaceRoot (string), llmService (LLM service instance), onProgress (optional callback)\",\n      \"outputs\": \"Map of function names to TestGenerationResult objects\"\n    },\n    {\n      \"name\": \"extractFunctionSource\",\n      \"desc\": \"Reads and extracts the source code of a specific function from the workspace files\",\n      \"inputs\": \"func (TestableFunction), workspaceRoot (string)\",\n      \"outputs\": \"Source code string for the function\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"./types/testPlanTypes\",\n    \"./types/testResultTypes\",\n    \"../../prompts/testPrompts\",\n    \"./testExecutionService\",\n    \"../../../logger\"\n  ],\n  \"intent\": \"Enables incremental, batch-based test generation using LLMs to avoid overwhelming the system with too many simultaneous test generation requests. Provides progress tracking so developers can monitor which functions are being tested and get immediate feedback on test generation success or failure.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T02:40:49.343Z"
  }
}