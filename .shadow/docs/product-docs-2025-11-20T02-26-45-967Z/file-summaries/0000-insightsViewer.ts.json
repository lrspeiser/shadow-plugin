{
  "file": "src/insightsViewer.ts",
  "role": "GUI View",
  "purpose": "Provides a tree view panel in VS Code that displays and allows browsing of AI-generated architecture insights about the codebase",
  "userVisibleActions": [
    "View architecture insights organized in a tree structure in the sidebar",
    "Browse different insight categories (Intent, Key Components, Data Flow, Entry Points, Architecture, Diagrams, Requirements, Recommendations)",
    "Click on insights to open related files or documentation",
    "See insights automatically update when analysis files change",
    "Open files directly from insight items that reference them",
    "View markdown documentation when clicking on insights",
    "See file paths and line numbers linked to specific insights",
    "Refresh insights view manually when needed"
  ],
  "developerVisibleActions": [
    "Tree view automatically watches .shadow/docs/architecture-insights.json for changes",
    "Tree view automatically watches .shadow/docs/PROJECT_PURPOSE.md for changes",
    "Insights data is loaded from architecture-insights.json file when available",
    "File system watchers trigger automatic refresh when insights files are modified",
    "Tree items are created with icons, descriptions, and navigation commands",
    "Clicking insight items triggers openFile command with file path and line number",
    "Purpose document changes trigger tree view refresh",
    "Provides TreeDataProvider interface for VS Code tree view integration"
  ],
  "keyFunctions": [
    {
      "name": "refresh",
      "desc": "Reloads insights from the file system and updates the tree view",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "loadInsights",
      "desc": "Reads architecture-insights.json file and parses it into insights object",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "getChildren",
      "desc": "Returns tree items for a given parent node to populate the tree structure",
      "inputs": "element: InsightItem | undefined",
      "outputs": "Promise<InsightItem[]>"
    },
    {
      "name": "getTreeItem",
      "desc": "Converts an InsightItem into a VS Code TreeItem with visual properties",
      "inputs": "element: InsightItem",
      "outputs": "vscode.TreeItem"
    },
    {
      "name": "setupFileWatcher",
      "desc": "Creates file system watchers for insights and purpose files to auto-refresh view",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "getInsightIcon",
      "desc": "Returns appropriate icon for different insight types and categories",
      "inputs": "type: string",
      "outputs": "vscode.ThemeIcon"
    },
    {
      "name": "dispose",
      "desc": "Cleans up file watchers and resources when view is destroyed",
      "inputs": "none",
      "outputs": "void"
    }
  ],
  "dependencies": [
    "vscode",
    "path",
    "fs",
    "./llmService",
    "./domain/services/fileWatcherService"
  ],
  "intent": "This file exists to provide users with a visual, navigable tree interface in VS Code that displays AI-generated architecture insights about their codebase, making it easy to understand project structure, intent, and key components by browsing organized categories and clicking through to relevant files and documentation.",
  "rawContent": "```json\n{\n  \"purpose\": \"Provides a tree view panel in VS Code that displays and allows browsing of AI-generated architecture insights about the codebase\",\n  \"userVisibleActions\": [\n    \"View architecture insights organized in a tree structure in the sidebar\",\n    \"Browse different insight categories (Intent, Key Components, Data Flow, Entry Points, Architecture, Diagrams, Requirements, Recommendations)\",\n    \"Click on insights to open related files or documentation\",\n    \"See insights automatically update when analysis files change\",\n    \"Open files directly from insight items that reference them\",\n    \"View markdown documentation when clicking on insights\",\n    \"See file paths and line numbers linked to specific insights\",\n    \"Refresh insights view manually when needed\"\n  ],\n  \"developerVisibleActions\": [\n    \"Tree view automatically watches .shadow/docs/architecture-insights.json for changes\",\n    \"Tree view automatically watches .shadow/docs/PROJECT_PURPOSE.md for changes\",\n    \"Insights data is loaded from architecture-insights.json file when available\",\n    \"File system watchers trigger automatic refresh when insights files are modified\",\n    \"Tree items are created with icons, descriptions, and navigation commands\",\n    \"Clicking insight items triggers openFile command with file path and line number\",\n    \"Purpose document changes trigger tree view refresh\",\n    \"Provides TreeDataProvider interface for VS Code tree view integration\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"refresh\",\n      \"desc\": \"Reloads insights from the file system and updates the tree view\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"loadInsights\",\n      \"desc\": \"Reads architecture-insights.json file and parses it into insights object\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"getChildren\",\n      \"desc\": \"Returns tree items for a given parent node to populate the tree structure\",\n      \"inputs\": \"element: InsightItem | undefined\",\n      \"outputs\": \"Promise<InsightItem[]>\"\n    },\n    {\n      \"name\": \"getTreeItem\",\n      \"desc\": \"Converts an InsightItem into a VS Code TreeItem with visual properties\",\n      \"inputs\": \"element: InsightItem\",\n      \"outputs\": \"vscode.TreeItem\"\n    },\n    {\n      \"name\": \"setupFileWatcher\",\n      \"desc\": \"Creates file system watchers for insights and purpose files to auto-refresh view\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"getInsightIcon\",\n      \"desc\": \"Returns appropriate icon for different insight types and categories\",\n      \"inputs\": \"type: string\",\n      \"outputs\": \"vscode.ThemeIcon\"\n    },\n    {\n      \"name\": \"dispose\",\n      \"desc\": \"Cleans up file watchers and resources when view is destroyed\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"path\",\n    \"fs\",\n    \"./llmService\",\n    \"./domain/services/fileWatcherService\"\n  ],\n  \"intent\": \"This file exists to provide users with a visual, navigable tree interface in VS Code that displays AI-generated architecture insights about their codebase, making it easy to understand project structure, intent, and key components by browsing organized categories and clicking through to relevant files and documentation.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T02:44:33.116Z"
  }
}