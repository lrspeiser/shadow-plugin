{
  "module": "src/infrastructure/fileSystem",
  "moduleType": "other",
  "capabilities": [
    "Provides fast, cached access to file contents with automatic cache invalidation",
    "Filters files intelligently to skip non-source directories (node_modules, .git, dist, build, etc.)",
    "Processes multiple files in parallel for improved performance",
    "Standardizes file reading and processing with consistent error handling across the codebase"
  ],
  "summary": "The fileSystem module provides optimized file access and processing capabilities for the codebase analysis system. It acts as an intelligent layer between the application and the file system, ensuring fast and efficient file operations.\n\nThe module automatically caches file contents in memory, eliminating redundant disk reads when the same files are accessed multiple times. The cache stays synchronized with disk changes, automatically updating when files are modified. This dramatically improves responsiveness during analysis operations that require repeated file access.\n\nFor file processing workflows, the module automatically filters out non-source directories and processes multiple files in parallel. This ensures that operations like scanning repositories or analyzing codebases focus only on relevant source files while maintaining high performance through concurrent processing. All file operations use standardized error handling to provide consistent and reliable behavior throughout the application.",
  "files": [
    {
      "file": "src/infrastructure/fileSystem/fileCache.ts",
      "role": "Core Logic",
      "purpose": "Caches file contents in memory to avoid redundant disk reads and improve performance when accessing the same files multiple times",
      "userVisibleActions": [
        "Faster file access when the same file is read multiple times",
        "Automatic updates when files change on disk",
        "Reduced disk activity and improved responsiveness"
      ],
      "developerVisibleActions": [
        "Request file content through the cache instead of direct file system access",
        "Files are automatically re-read when they change on disk",
        "Cache evicts least recently used files when memory limit is reached",
        "File changes are detected through file system watching",
        "Cache statistics track hits, misses, and evictions for monitoring"
      ],
      "keyFunctions": [
        {
          "name": "getFile",
          "desc": "Retrieves file content from cache if available and valid, otherwise reads from disk and caches it",
          "inputs": "filePath (string) - path to the file to read",
          "outputs": "Promise<string> - the file content as text"
        },
        {
          "name": "setupWatcher",
          "desc": "Sets up file system monitoring to automatically invalidate cached files when they change",
          "inputs": "none",
          "outputs": "void - creates file watcher in background"
        },
        {
          "name": "isStale",
          "desc": "Checks if a cached file has exceeded its time-to-live and needs refreshing",
          "inputs": "cached file entry with timestamp",
          "outputs": "boolean - true if cache entry is expired"
        },
        {
          "name": "evictIfNeeded",
          "desc": "Removes least recently used files from cache when total size exceeds the configured limit",
          "inputs": "none",
          "outputs": "void - modifies cache by removing old entries"
        },
        {
          "name": "invalidate",
          "desc": "Removes a specific file or all files from the cache",
          "inputs": "optional filePath (string) - specific file to remove, or all if omitted",
          "outputs": "void - removes entries from cache"
        },
        {
          "name": "getStats",
          "desc": "Returns cache performance metrics including hits, misses, and current size",
          "inputs": "none",
          "outputs": "CacheStats object with performance counters"
        }
      ],
      "dependencies": [
        "vscode",
        "fs",
        "path"
      ],
      "intent": "Eliminates redundant file system reads by caching file contents in memory, improving performance when multiple components need to access the same files repeatedly. Ensures cache stays synchronized with file system changes through automatic invalidation.",
      "rawContent": "```json\n{\n  \"purpose\": \"Caches file contents in memory to avoid redundant disk reads and improve performance when accessing the same files multiple times\",\n  \"userVisibleActions\": [\n    \"Faster file access when the same file is read multiple times\",\n    \"Automatic updates when files change on disk\",\n    \"Reduced disk activity and improved responsiveness\"\n  ],\n  \"developerVisibleActions\": [\n    \"Request file content through the cache instead of direct file system access\",\n    \"Files are automatically re-read when they change on disk\",\n    \"Cache evicts least recently used files when memory limit is reached\",\n    \"File changes are detected through file system watching\",\n    \"Cache statistics track hits, misses, and evictions for monitoring\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"getFile\",\n      \"desc\": \"Retrieves file content from cache if available and valid, otherwise reads from disk and caches it\",\n      \"inputs\": \"filePath (string) - path to the file to read\",\n      \"outputs\": \"Promise<string> - the file content as text\"\n    },\n    {\n      \"name\": \"setupWatcher\",\n      \"desc\": \"Sets up file system monitoring to automatically invalidate cached files when they change\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void - creates file watcher in background\"\n    },\n    {\n      \"name\": \"isStale\",\n      \"desc\": \"Checks if a cached file has exceeded its time-to-live and needs refreshing\",\n      \"inputs\": \"cached file entry with timestamp\",\n      \"outputs\": \"boolean - true if cache entry is expired\"\n    },\n    {\n      \"name\": \"evictIfNeeded\",\n      \"desc\": \"Removes least recently used files from cache when total size exceeds the configured limit\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void - modifies cache by removing old entries\"\n    },\n    {\n      \"name\": \"invalidate\",\n      \"desc\": \"Removes a specific file or all files from the cache\",\n      \"inputs\": \"optional filePath (string) - specific file to remove, or all if omitted\",\n      \"outputs\": \"void - removes entries from cache\"\n    },\n    {\n      \"name\": \"getStats\",\n      \"desc\": \"Returns cache performance metrics including hits, misses, and current size\",\n      \"inputs\": \"none\",\n      \"outputs\": \"CacheStats object with performance counters\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"fs\",\n    \"path\"\n  ],\n  \"intent\": \"Eliminates redundant file system reads by caching file contents in memory, improving performance when multiple components need to access the same files repeatedly. Ensures cache stays synchronized with file system changes through automatic invalidation.\"\n}\n```"
    },
    {
      "file": "src/infrastructure/fileSystem/fileProcessor.ts",
      "role": "Core Logic",
      "purpose": "Consolidates and standardizes file processing logic across the codebase by providing reusable filtering, reading, and parallel processing capabilities.",
      "userVisibleActions": [
        "Files are automatically filtered to skip non-source directories (node_modules, .git, dist, build, etc.)",
        "Multiple files are processed in parallel for faster performance",
        "Files are read and processed with consistent error handling"
      ],
      "developerVisibleActions": [
        "Developer provides file paths and a processing function to handle file content",
        "Developer can customize file filtering by implementing IFileFilter interface",
        "Developer can customize file reading by implementing IFileReader interface",
        "Developer receives array of processed results from all files",
        "Developer can pass error context for better error tracking"
      ],
      "keyFunctions": [
        {
          "name": "shouldProcess",
          "desc": "Determines if a file should be processed based on filtering rules",
          "inputs": "filePath: string",
          "outputs": "boolean"
        },
        {
          "name": "readFile",
          "desc": "Reads file content from disk",
          "inputs": "filePath: string",
          "outputs": "Promise<string>"
        },
        {
          "name": "processFiles",
          "desc": "Processes multiple files in parallel with filtering and error handling",
          "inputs": "files: string[], processor: function, context?: ErrorContext",
          "outputs": "Promise<T[]>"
        }
      ],
      "dependencies": [
        "fs",
        "path",
        "ErrorHandler",
        "ErrorContext"
      ],
      "intent": "This file exists to eliminate duplicate file processing patterns across the codebase. It solves the problem of inconsistent file filtering, reading, and processing by providing a single, reusable, and extensible file processing pipeline with built-in parallel processing and error handling.",
      "rawContent": "```json\n{\n  \"purpose\": \"Consolidates and standardizes file processing logic across the codebase by providing reusable filtering, reading, and parallel processing capabilities.\",\n  \"userVisibleActions\": [\n    \"Files are automatically filtered to skip non-source directories (node_modules, .git, dist, build, etc.)\",\n    \"Multiple files are processed in parallel for faster performance\",\n    \"Files are read and processed with consistent error handling\"\n  ],\n  \"developerVisibleActions\": [\n    \"Developer provides file paths and a processing function to handle file content\",\n    \"Developer can customize file filtering by implementing IFileFilter interface\",\n    \"Developer can customize file reading by implementing IFileReader interface\",\n    \"Developer receives array of processed results from all files\",\n    \"Developer can pass error context for better error tracking\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"shouldProcess\",\n      \"desc\": \"Determines if a file should be processed based on filtering rules\",\n      \"inputs\": \"filePath: string\",\n      \"outputs\": \"boolean\"\n    },\n    {\n      \"name\": \"readFile\",\n      \"desc\": \"Reads file content from disk\",\n      \"inputs\": \"filePath: string\",\n      \"outputs\": \"Promise<string>\"\n    },\n    {\n      \"name\": \"processFiles\",\n      \"desc\": \"Processes multiple files in parallel with filtering and error handling\",\n      \"inputs\": \"files: string[], processor: function, context?: ErrorContext\",\n      \"outputs\": \"Promise<T[]>\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"ErrorHandler\",\n    \"ErrorContext\"\n  ],\n  \"intent\": \"This file exists to eliminate duplicate file processing patterns across the codebase. It solves the problem of inconsistent file filtering, reading, and processing by providing a single, reusable, and extensible file processing pipeline with built-in parallel processing and error handling.\"\n}\n```"
    }
  ],
  "endpoints": [],
  "commands": [],
  "workers": [],
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T02:48:34.415Z"
  }
}