{
  "module": "src/context",
  "moduleType": "other",
  "capabilities": [
    "Automatically persists code analysis results to disk for future reference",
    "Converts code analysis data into LLM-optimized format for AI consumption",
    "Maintains analysis context across VS Code sessions",
    "Stores structured documentation in a standardized location (.shadow/docs/)",
    "Enables analysis data reuse without re-scanning codebases"
  ],
  "summary": "The context module provides automated persistence and formatting of code analysis results. When code is analyzed, this module automatically captures the results and saves them to .shadow/docs/code-analysis.json in a format optimized for Large Language Model consumption. This ensures that analysis insights are preserved across VS Code sessions and can be referenced by AI features without requiring repeated analysis.\n\nThe module acts as a bridge between raw code analysis output and AI-ready context. It transforms analysis data into a structured format that LLMs can efficiently process, making code understanding and documentation generation more effective. Users benefit from faster AI responses since previously analyzed code doesn't need to be re-scanned.\n\nAll analysis data is automatically managed in the background - users don't need to manually save or load analysis results. The module ensures that documentation and code insights remain available even after closing and reopening projects, creating a seamless experience for AI-assisted development workflows.",
  "files": [
    {
      "file": "src/context/analysisContextBuilder.ts",
      "role": "Core Logic",
      "purpose": "Converts code analysis data into a format suitable for LLM consumption and saves it to disk for future reference.",
      "userVisibleActions": [
        "Code analysis results are automatically saved to .shadow/docs/code-analysis.json for future use",
        "Analysis data is persisted across VS Code sessions"
      ],
      "developerVisibleActions": [
        "Transforms CodeAnalysis objects into AnalysisContext format that can be sent to LLM services",
        "Creates .shadow/docs directory structure if it doesn't exist",
        "Saves analysis with metadata including generation timestamp",
        "Enables analysis data to be reused without re-scanning the codebase"
      ],
      "keyFunctions": [
        {
          "name": "convertCodeAnalysisToContext",
          "desc": "Transforms CodeAnalysis data structure into AnalysisContext format suitable for LLM consumption",
          "inputs": "analysis: CodeAnalysis (contains files, imports, entry points, metrics)",
          "outputs": "AnalysisContext (formatted data with files, imports, entry points, orphaned files, and totals)"
        },
        {
          "name": "saveCodeAnalysis",
          "desc": "Persists code analysis data to .shadow/docs/code-analysis.json with timestamp metadata",
          "inputs": "analysis: CodeAnalysis (code analysis data to save)",
          "outputs": "void (writes to file system)"
        }
      ],
      "dependencies": [
        "vscode",
        "fs",
        "path",
        "../analyzer (CodeAnalysis, EntryPoint types)",
        "../llmService (AnalysisContext type)"
      ],
      "intent": "This file exists to bridge the gap between the code analyzer and LLM service by converting analysis data into LLM-friendly format and caching it on disk. This allows analysis results to be reused without re-scanning the entire codebase, improving performance and enabling offline access to previously generated analysis data.",
      "rawContent": "```json\n{\n  \"purpose\": \"Converts code analysis data into a format suitable for LLM consumption and saves it to disk for future reference.\",\n  \"userVisibleActions\": [\n    \"Code analysis results are automatically saved to .shadow/docs/code-analysis.json for future use\",\n    \"Analysis data is persisted across VS Code sessions\"\n  ],\n  \"developerVisibleActions\": [\n    \"Transforms CodeAnalysis objects into AnalysisContext format that can be sent to LLM services\",\n    \"Creates .shadow/docs directory structure if it doesn't exist\",\n    \"Saves analysis with metadata including generation timestamp\",\n    \"Enables analysis data to be reused without re-scanning the codebase\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"convertCodeAnalysisToContext\",\n      \"desc\": \"Transforms CodeAnalysis data structure into AnalysisContext format suitable for LLM consumption\",\n      \"inputs\": \"analysis: CodeAnalysis (contains files, imports, entry points, metrics)\",\n      \"outputs\": \"AnalysisContext (formatted data with files, imports, entry points, orphaned files, and totals)\"\n    },\n    {\n      \"name\": \"saveCodeAnalysis\",\n      \"desc\": \"Persists code analysis data to .shadow/docs/code-analysis.json with timestamp metadata\",\n      \"inputs\": \"analysis: CodeAnalysis (code analysis data to save)\",\n      \"outputs\": \"void (writes to file system)\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"fs\",\n    \"path\",\n    \"../analyzer (CodeAnalysis, EntryPoint types)\",\n    \"../llmService (AnalysisContext type)\"\n  ],\n  \"intent\": \"This file exists to bridge the gap between the code analyzer and LLM service by converting analysis data into LLM-friendly format and caching it on disk. This allows analysis results to be reused without re-scanning the entire codebase, improving performance and enabling offline access to previously generated analysis data.\"\n}\n```"
    }
  ],
  "endpoints": [],
  "commands": [],
  "workers": [],
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T02:47:09.278Z"
  }
}