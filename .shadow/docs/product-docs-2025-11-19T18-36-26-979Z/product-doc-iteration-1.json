{
  "overview": "Shadow Watch is a Visual Studio Code extension that analyzes codebases using AI to generate comprehensive documentation and insights. It connects to AI language models (OpenAI or Anthropic) to examine your code and produce detailed reports about what your application does, how it's structured, and how to work with it. The extension runs analysis on your workspace, creating product documentation, architecture insights, and code-level explanations that help developers understand and navigate complex codebases.\n\nUsers interact with Shadow Watch through Visual Studio Code's command palette and sidebar panels. After configuring an API key for their preferred AI provider, developers can trigger analysis on their entire workspace or specific modules. The extension displays results in multiple interactive views: a tree-based navigation panel showing analyzed modules and files, detailed report viewers with syntax-highlighted documentation, and diagnostic panels highlighting areas needing attention. All analysis results are cached locally for quick retrieval and can be refreshed as code changes.\n\nShadow Watch solves the documentation problem that plagues most development teams. Instead of manually writing and maintaining documentation that quickly becomes outdated, developers can generate accurate, comprehensive documentation directly from their codebase. The AI analyzes code structure, dependencies, and patterns to create user-facing product documentation, technical architecture guides, and module-level explanations. This accelerates onboarding for new team members, helps developers understand unfamiliar codebases, and provides a foundation for making informed refactoring decisions.",
  "whatItDoes": [
    "Analyzes entire codebases or specific modules using AI language models to understand code structure and purpose",
    "Generates product documentation describing what applications do from a user perspective",
    "Creates architecture insights explaining how systems are designed and organized",
    "Produces module-level documentation breaking down components and their relationships",
    "Identifies code quality issues and suggests improvements through diagnostic analysis",
    "Caches analysis results locally for instant retrieval without re-running expensive AI calls",
    "Watches for file changes and incrementally updates analysis when code is modified",
    "Provides interactive tree navigation to browse analyzed modules, files, and insights",
    "Displays detailed documentation reports with syntax highlighting and formatted output",
    "Supports switching between OpenAI and Anthropic AI providers based on preference",
    "Tracks analysis progress with detailed status indicators showing what's being processed",
    "Exports analysis results in multiple formats for sharing and external use",
    "Offers command palette integration for triggering analysis and viewing results",
    "Maintains analysis history with versioning and change tracking"
  ],
  "userPerspective": {
    "gui": [
      "Command palette commands for analyzing workspace, viewing insights, and managing cache",
      "Sidebar tree view displaying analyzed modules, files, and generated insights in expandable hierarchy",
      "Interactive report viewers showing product documentation, architecture guides, and module details",
      "Diagnostic panel highlighting code quality issues and improvement suggestions",
      "Status bar indicators showing analysis progress and provider configuration",
      "Context menus on files and folders for triggering targeted analysis",
      "Settings panel for configuring AI provider, API keys, and analysis preferences",
      "Webview panels displaying rich formatted documentation with syntax highlighting",
      "Navigation between related code files and documentation sections via clickable links"
    ],
    "cli": [],
    "api": [],
    "cicd": []
  },
  "workflowIntegration": [
    "Onboarding new developers by providing instant codebase documentation and architecture overview",
    "Understanding legacy code by generating explanations of what existing systems do and how they work",
    "Planning refactoring efforts with comprehensive analysis of current architecture and dependencies",
    "Code review support by highlighting areas needing attention and suggesting improvements",
    "Documentation maintenance by regenerating docs when code changes to keep them current",
    "Knowledge transfer when team members transition by capturing system understanding in documentation",
    "Technical debt assessment by analyzing code quality and identifying improvement opportunities",
    "System design documentation by automatically documenting architectural patterns and decisions"
  ],
  "problemsSolved": [
    "Eliminates manual documentation writing that becomes outdated quickly",
    "Reduces time spent understanding unfamiliar codebases from weeks to hours",
    "Provides consistent documentation quality across all modules and components",
    "Captures tribal knowledge that exists only in developers' heads",
    "Accelerates developer onboarding with comprehensive system overviews",
    "Identifies technical debt and code quality issues automatically",
    "Maintains up-to-date documentation as code evolves",
    "Helps teams make informed refactoring decisions based on current architecture",
    "Bridges communication gap between technical and non-technical stakeholders",
    "Preserves system knowledge when team members leave"
  ],
  "architecture": "Shadow Watch is built as a Visual Studio Code extension with a modular architecture separating concerns into distinct layers. The core analysis engine coordinates file processing, AI interactions, and result persistence. AI provider abstraction allows switching between OpenAI and Anthropic through a common interface with provider-specific implementations. State management tracks analysis progress, caches results, and handles incremental updates when files change. The UI layer provides multiple views including tree navigation, report viewers, and diagnostic panels.\n\nThe analysis pipeline processes codebases in stages: file discovery scans the workspace to identify relevant code files, static analysis extracts structure and dependencies, AI analysis generates human-readable documentation, and result formatting produces the final output. Rate limiting and retry logic handle API constraints gracefully. Caching stores analysis results locally to avoid redundant API calls. File watching detects changes and triggers incremental re-analysis of affected modules.\n\nData flows from the workspace filesystem through the analyzer to AI providers, with responses parsed and stored locally. The UI components subscribe to state changes to update their displays reactively. Configuration management centralizes settings for AI providers, analysis scope, and output preferences. Error handling provides user-friendly messages when API calls fail or analysis encounters issues. The extension bootstraps all services during activation and cleanly tears down resources on deactivation.",
  "titles": [
    "Codebase Analyzer",
    "AI Provider Integration",
    "Product Documentation Generator",
    "Architecture Insights Generator",
    "Module Analysis Engine",
    "File Watcher and Incremental Updates",
    "Analysis Cache Manager",
    "Rate Limiter",
    "Retry Handler",
    "Response Parser",
    "Tree Navigation View",
    "Report Viewer",
    "Diagnostics Provider",
    "Configuration Manager",
    "State Manager",
    "Progress Service",
    "Command Registry",
    "Navigation Handler",
    "Prompt Builder",
    "Documentation Formatter",
    "Repository Manager",
    "File Processor",
    "Context Builder",
    "Test Configuration Service"
  ],
  "descriptions": [
    {
      "title": "Codebase Analyzer",
      "description": "Core engine that orchestrates the analysis of workspace files by scanning directories, identifying relevant code, extracting structure, and coordinating with AI providers to generate documentation and insights",
      "category": "component"
    },
    {
      "title": "AI Provider Integration",
      "description": "Abstraction layer supporting multiple AI language model providers (OpenAI, Anthropic) through a common interface, allowing users to switch providers and models based on preference and availability",
      "category": "integration"
    },
    {
      "title": "Product Documentation Generator",
      "description": "Analyzes codebases to produce user-facing documentation describing what applications do, what problems they solve, and how users interact with them, without exposing technical implementation details",
      "category": "feature"
    },
    {
      "title": "Architecture Insights Generator",
      "description": "Examines code structure, dependencies, and patterns to generate high-level architectural documentation explaining how systems are designed and organized",
      "category": "feature"
    },
    {
      "title": "Module Analysis Engine",
      "description": "Breaks down codebases into logical modules and analyzes each independently to understand capabilities, dependencies, and relationships between components",
      "category": "component"
    },
    {
      "title": "File Watcher and Incremental Updates",
      "description": "Monitors workspace for file changes and triggers incremental re-analysis of affected modules to keep documentation current without re-analyzing the entire codebase",
      "category": "feature"
    },
    {
      "title": "Analysis Cache Manager",
      "description": "Stores analysis results locally in structured format for instant retrieval, avoiding redundant AI API calls and enabling offline access to previously generated documentation",
      "category": "component"
    },
    {
      "title": "Rate Limiter",
      "description": "Manages API call frequency to respect provider rate limits, queuing requests and spacing them appropriately to avoid throttling or quota exhaustion",
      "category": "component"
    },
    {
      "title": "Retry Handler",
      "description": "Automatically retries failed AI API calls with exponential backoff when encountering transient errors, ensuring robust operation despite network issues or temporary service unavailability",
      "category": "component"
    },
    {
      "title": "Response Parser",
      "description": "Extracts and validates structured data from AI responses, handling various output formats and recovering from malformed JSON or unexpected response structures",
      "category": "component"
    },
    {
      "title": "Tree Navigation View",
      "description": "Interactive sidebar panel displaying analyzed modules, files, and insights in hierarchical tree structure with expandable nodes for drilling down into details",
      "category": "feature"
    },
    {
      "title": "Report Viewer",
      "description": "Rich display panel showing generated documentation with syntax highlighting, formatted sections, and navigation links between related content",
      "category": "feature"
    },
    {
      "title": "Diagnostics Provider",
      "description": "Identifies code quality issues, technical debt, and improvement opportunities through analysis, presenting findings in VSCode's problems panel",
      "category": "feature"
    },
    {
      "title": "Configuration Manager",
      "description": "Centralizes extension settings including AI provider selection, API key management, analysis scope preferences, and output format options",
      "category": "component"
    },
    {
      "title": "State Manager",
      "description": "Tracks analysis progress, manages UI state updates, and coordinates between different extension components to maintain consistent view of analysis status",
      "category": "component"
    },
    {
      "title": "Progress Service",
      "description": "Provides real-time feedback during analysis showing what's being processed, estimated completion time, and current stage in the analysis pipeline",
      "category": "component"
    },
    {
      "title": "Command Registry",
      "description": "Maps VSCode command palette commands to extension functionality, enabling users to trigger analysis, view results, and manage cache through familiar command interface",
      "category": "component"
    },
    {
      "title": "Navigation Handler",
      "description": "Manages transitions between different views and enables jumping from documentation to corresponding code files or from tree nodes to detailed reports",
      "category": "component"
    },
    {
      "title": "Prompt Builder",
      "description": "Constructs specialized prompts for different analysis types (product docs, architecture, modules) that guide AI models to generate appropriate documentation",
      "category": "component"
    },
    {
      "title": "Documentation Formatter",
      "description": "Transforms raw AI analysis output into well-formatted documentation with consistent structure, syntax highlighting, and navigation aids",
      "category": "component"
    },
    {
      "title": "Repository Manager",
      "description": "Persists and retrieves analysis results from local storage with versioning support, enabling historical views and comparison of analysis over time",
      "category": "component"
    },
    {
      "title": "File Processor",
      "description": "Handles file I/O operations including reading source files, extracting relevant content, and filtering based on configuration to focus analysis on important code",
      "category": "component"
    },
    {
      "title": "Context Builder",
      "description": "Assembles relevant information about code context including dependencies, imports, and surrounding code to provide AI with sufficient information for accurate analysis",
      "category": "component"
    },
    {
      "title": "Test Configuration Service",
      "description": "Detects and configures test framework settings to enable test-specific analysis and documentation generation",
      "category": "component"
    }
  ],
  "relevantFunctions": [
    {
      "name": "analyzeWorkspace",
      "description": "Initiates full workspace analysis by scanning all relevant files and coordinating with AI to generate comprehensive documentation",
      "file": "src/analyzer.ts",
      "module": "analyzer"
    },
    {
      "name": "generateProductDocs",
      "description": "Produces user-facing product documentation describing what the application does, what problems it solves, and how users interact with it",
      "file": "src/llmIntegration.ts",
      "module": "llmIntegration"
    },
    {
      "name": "generateArchitectureInsights",
      "description": "Analyzes codebase structure to create architectural documentation explaining system design, components, and relationships",
      "file": "src/llmIntegration.ts",
      "module": "llmIntegration"
    },
    {
      "name": "analyzeModule",
      "description": "Performs detailed analysis of a single module including its capabilities, dependencies, and role in the overall system",
      "file": "src/llmIntegration.ts",
      "module": "llmIntegration"
    },
    {
      "name": "callLLM",
      "description": "Sends prompts to configured AI provider and retrieves structured responses with retry and rate limiting logic",
      "file": "src/llmService.ts",
      "module": "llmService"
    },
    {
      "name": "parseResponse",
      "description": "Extracts and validates structured data from AI responses, handling JSON extraction and schema validation",
      "file": "src/ai/llmResponseParser.ts",
      "module": "llmResponseParser"
    },
    {
      "name": "watchFiles",
      "description": "Monitors workspace files for changes and triggers incremental re-analysis when code is modified",
      "file": "src/domain/services/fileWatcherService.ts",
      "module": "fileWatcherService"
    },
    {
      "name": "getCachedAnalysis",
      "description": "Retrieves previously generated analysis from local cache to avoid redundant API calls",
      "file": "src/cache.ts",
      "module": "cache"
    },
    {
      "name": "buildPrompt",
      "description": "Constructs specialized prompts for different analysis types that guide AI to generate appropriate documentation",
      "file": "src/domain/prompts/promptBuilder.ts",
      "module": "promptBuilder"
    },
    {
      "name": "formatDocumentation",
      "description": "Transforms raw AI output into well-formatted documentation with consistent structure and syntax highlighting",
      "file": "src/domain/formatters/documentationFormatter.ts",
      "module": "documentationFormatter"
    },
    {
      "name": "showInsightsView",
      "description": "Opens interactive viewer displaying generated insights and documentation in VSCode panel",
      "file": "src/insightsViewer.ts",
      "module": "insightsViewer"
    },
    {
      "name": "navigateToFile",
      "description": "Handles navigation from documentation to corresponding source code files",
      "file": "src/domain/handlers/navigationHandler.ts",
      "module": "navigationHandler"
    },
    {
      "name": "updateProgress",
      "description": "Updates progress indicators showing current analysis stage and estimated completion",
      "file": "src/infrastructure/progressService.ts",
      "module": "progressService"
    },
    {
      "name": "saveAnalysisResults",
      "description": "Persists analysis results to local storage with versioning for historical tracking",
      "file": "src/infrastructure/persistence/analysisResultRepository.ts",
      "module": "analysisResultRepository"
    }
  ],
  "relevantDataStructures": [
    {
      "name": "AnalysisResult",
      "description": "Complete analysis output containing product documentation, architecture insights, module details, and metadata",
      "type": "interface",
      "file": "src/llmSchemas.ts"
    },
    {
      "name": "ProductDocumentation",
      "description": "User-facing documentation describing what the application does, problems solved, and user workflows",
      "type": "interface",
      "file": "src/llmSchemas.ts"
    },
    {
      "name": "ArchitectureInsights",
      "description": "High-level architectural documentation including components, patterns, and system design decisions",
      "type": "interface",
      "file": "src/llmSchemas.ts"
    },
    {
      "name": "ModuleAnalysis",
      "description": "Detailed analysis of a single module including capabilities, dependencies, and code structure",
      "type": "interface",
      "file": "src/llmSchemas.ts"
    },
    {
      "name": "LLMRequest",
      "description": "Structured request sent to AI provider including prompt, model configuration, and analysis parameters",
      "type": "interface",
      "file": "src/ai/providers/ILLMProvider.ts"
    },
    {
      "name": "LLMResponse",
      "description": "AI provider response containing generated content, usage statistics, and metadata",
      "type": "interface",
      "file": "src/ai/providers/ILLMProvider.ts"
    },
    {
      "name": "CacheEntry",
      "description": "Cached analysis result with timestamp, version, and invalidation metadata",
      "type": "interface",
      "file": "src/cache.ts"
    },
    {
      "name": "AnalysisProgress",
      "description": "Progress tracking information including current stage, percentage complete, and status messages",
      "type": "interface",
      "file": "src/infrastructure/progressService.ts"
    },
    {
      "name": "FileAnalysis",
      "description": "Analysis of individual code file including extracted functions, classes, dependencies, and documentation",
      "type": "interface",
      "file": "src/analyzer.ts"
    },
    {
      "name": "InsightNode",
      "description": "Tree node representing a module, file, or insight in the navigation view",
      "type": "class",
      "file": "src/insightsTreeView.ts"
    },
    {
      "name": "ProviderConfig",
      "description": "Configuration for AI provider including API key, model selection, and request parameters",
      "type": "interface",
      "file": "src/config/configurationManager.ts"
    },
    {
      "name": "AnalysisState",
      "description": "Current state of analysis including in-progress items, completed modules, and error tracking",
      "type": "class",
      "file": "src/state/llmStateManager.ts"
    }
  ],
  "relevantCodeFiles": [
    {
      "path": "src/extension.ts",
      "description": "Main extension entry point that activates Shadow Watch, registers commands, and initializes all services",
      "purpose": "Bootstraps the extension when VSCode loads it, wiring together all components and making features available to users",
      "role": "Entry point"
    },
    {
      "path": "src/analyzer.ts",
      "description": "Core analysis engine that scans workspace files and coordinates the analysis pipeline",
      "purpose": "Orchestrates the process of discovering, reading, and analyzing code files before sending to AI",
      "role": "Core component"
    },
    {
      "path": "src/llmIntegration.ts",
      "description": "Primary integration layer for AI providers, handling all AI-based analysis operations",
      "purpose": "Manages communication with AI services to generate documentation and insights",
      "role": "Core component"
    },
    {
      "path": "src/llmService.ts",
      "description": "Lower-level AI service handling request/response lifecycle, retries, and rate limiting",
      "purpose": "Provides reliable AI API communication with error handling and resource management",
      "role": "Core component"
    },
    {
      "path": "src/insightsViewer.ts",
      "description": "Interactive viewer displaying generated documentation and insights in formatted panels",
      "purpose": "Presents analysis results to users in readable, navigable format",
      "role": "UI component"
    },
    {
      "path": "src/insightsTreeView.ts",
      "description": "Tree navigation interface showing hierarchical structure of analyzed modules and files",
      "purpose": "Enables users to browse and navigate through analysis results",
      "role": "UI component"
    },
    {
      "path": "src/cache.ts",
      "description": "Local storage manager for caching analysis results",
      "purpose": "Stores and retrieves analysis results to avoid redundant API calls",
      "role": "Core component"
    },
    {
      "path": "src/domain/services/fileWatcherService.ts",
      "description": "File change monitoring service that triggers incremental updates",
      "purpose": "Keeps documentation current by detecting code changes and re-analyzing affected modules",
      "role": "Core component"
    },
    {
      "path": "src/ai/providers/providerFactory.ts",
      "description": "Factory for creating appropriate AI provider instances based on configuration",
      "purpose": "Enables switching between OpenAI and Anthropic providers",
      "role": "Core component"
    },
    {
      "path": "src/domain/prompts/promptBuilder.ts",
      "description": "Prompt construction service that builds specialized prompts for different analysis types",
      "purpose": "Generates effective prompts that guide AI to produce appropriate documentation",
      "role": "Core component"
    },
    {
      "path": "src/config/configurationManager.ts",
      "description": "Configuration management service centralizing extension settings",
      "purpose": "Manages API keys, provider selection, and analysis preferences",
      "role": "Core component"
    },
    {
      "path": "src/infrastructure/persistence/analysisResultRepository.ts",
      "description": "Data persistence layer for storing and versioning analysis results",
      "purpose": "Maintains historical analysis data with versioning support",
      "role": "Core component"
    }
  ],
  "exampleInput": {
    "description": "Configuration and workspace context provided to the analyzer when starting analysis",
    "json": "{\"workspacePath\":\"/Users/dev/projects/myapp\",\"analysisType\":\"full\",\"provider\":\"openai\",\"model\":\"gpt-4\",\"includePatterns\":[\"src/**/*.ts\",\"lib/**/*.js\"],\"excludePatterns\":[\"node_modules/**\",\"dist/**\",\"*.test.ts\"],\"maxFileSizeKB\":500,\"analysisOptions\":{\"generateProductDocs\":true,\"generateArchitecture\":true,\"analyzeModules\":true,\"depth\":\"detailed\"},\"cacheEnabled\":true}"
  },
  "exampleOutput": {
    "description": "Complete analysis result returned after processing the codebase",
    "json": "{\"analysisId\":\"a1b2c3d4-5678-90ef-ghij-klmnopqrstuv\",\"timestamp\":\"2024-01-15T10:30:00Z\",\"workspaceName\":\"myapp\",\"productDocumentation\":{\"overview\":\"MyApp is a task management application that helps teams organize and track work...\",\"whatItDoes\":[\"Create and assign tasks to team members\",\"Track progress with status updates\",\"Set deadlines and receive notifications\"],\"problemsSolved\":[\"Eliminates scattered task tracking across multiple tools\",\"Provides visibility into team workload\"],\"workflows\":[\"Daily standup preparation\",\"Sprint planning\",\"Project status reporting\"]},\"architectureInsights\":{\"overview\":\"MyApp uses a three-tier architecture with React frontend, Express API, and PostgreSQL database...\",\"components\":[\"Web Frontend\",\"REST API\",\"Database Layer\",\"Authentication Service\"],\"patterns\":[\"MVC\",\"Repository Pattern\",\"JWT Authentication\"]},\"modules\":[{\"name\":\"TaskManager\",\"path\":\"src/tasks\",\"capabilities\":[\"CRUD operations for tasks\",\"Assignment logic\",\"Status tracking\"],\"dependencies\":[\"Database\",\"Authentication\"]}],\"statistics\":{\"filesAnalyzed\":147,\"linesOfCode\":12543,\"tokensUsed\":45678,\"analysisTimeSeconds\":42}}"
  },
  "_metadata": {
    "iteration": 1,
    "maxIterations": 1,
    "savedAt": "2025-11-19T18:38:20.574Z"
  }
}