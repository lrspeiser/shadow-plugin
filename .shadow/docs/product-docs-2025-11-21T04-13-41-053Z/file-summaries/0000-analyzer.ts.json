{
  "file": "src/analyzer.ts",
  "role": "Core Logic",
  "purpose": "Defines data structures and interfaces for code analysis results, including file metadata, function information, dependencies, test mappings, and code quality metrics.",
  "userVisibleActions": [
    "View total file count, line count, and function count in codebase",
    "See list of large files that may need refactoring",
    "Identify orphaned files not imported anywhere",
    "Discover entry points (main files) in the project",
    "Find duplicate code blocks across files",
    "View function complexity and risk levels",
    "See test coverage mapping for source files",
    "Identify uncovered functions without tests"
  ],
  "developerVisibleActions": [
    "Import and use CodeAnalysis interface to structure analysis results",
    "Access file-level metrics (lines, functions, complexity)",
    "Query function metadata including parameters, return types, and visibility",
    "Retrieve branch information (if/else, loops, try/catch)",
    "Track dependencies by type (database, HTTP, filesystem, etc.)",
    "Monitor state mutations (assignments, modifications, deletions)",
    "Map source files to their test files",
    "Identify functions missing test coverage",
    "Access cached analysis results for performance",
    "Determine risk levels for functions based on complexity"
  ],
  "keyFunctions": [
    {
      "name": "CodeAnalysis",
      "desc": "Main interface containing complete analysis results for a codebase",
      "inputs": "none (interface/type definition)",
      "outputs": "Structure with totalFiles, totalLines, functions, imports, orphanedFiles, duplicates, and optional enhanced metadata"
    },
    {
      "name": "FunctionMetadata",
      "desc": "Detailed information about a single function including signature, complexity, and dependencies",
      "inputs": "none (interface/type definition)",
      "outputs": "Structure with symbolName, parameters, returnType, visibility, branches, dependencies, stateMutations, riskLevel"
    },
    {
      "name": "TestMapping",
      "desc": "Maps source files and functions to their corresponding test files and test cases",
      "inputs": "none (interface/type definition)",
      "outputs": "Structure with sourceFileToTests map, functionToTests map, and uncoveredFunctions list"
    },
    {
      "name": "DependencyInfo",
      "desc": "Describes a single dependency with its type and whether it's internal or external",
      "inputs": "none (interface/type definition)",
      "outputs": "Structure with name, type (db/http/filesystem/etc), isInternal flag, and optional lineNumber"
    },
    {
      "name": "BranchInfo",
      "desc": "Represents a branching point in code (if/else, switch, loop, exception handling)",
      "inputs": "none (interface/type definition)",
      "outputs": "Structure with type, human-readable condition, and lineNumber"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "./cache (AnalysisCache)"
  ],
  "intent": "This file exists to provide a standardized schema for representing code analysis results across the application. It solves the problem of inconsistent data structures by defining clear interfaces for file metrics, function metadata, dependencies, test coverage, and code quality indicators, enabling other components to consume and display analysis data in a type-safe manner.",
  "rawContent": "```json\n{\n  \"purpose\": \"Defines data structures and interfaces for code analysis results, including file metadata, function information, dependencies, test mappings, and code quality metrics.\",\n  \"userVisibleActions\": [\n    \"View total file count, line count, and function count in codebase\",\n    \"See list of large files that may need refactoring\",\n    \"Identify orphaned files not imported anywhere\",\n    \"Discover entry points (main files) in the project\",\n    \"Find duplicate code blocks across files\",\n    \"View function complexity and risk levels\",\n    \"See test coverage mapping for source files\",\n    \"Identify uncovered functions without tests\"\n  ],\n  \"developerVisibleActions\": [\n    \"Import and use CodeAnalysis interface to structure analysis results\",\n    \"Access file-level metrics (lines, functions, complexity)\",\n    \"Query function metadata including parameters, return types, and visibility\",\n    \"Retrieve branch information (if/else, loops, try/catch)\",\n    \"Track dependencies by type (database, HTTP, filesystem, etc.)\",\n    \"Monitor state mutations (assignments, modifications, deletions)\",\n    \"Map source files to their test files\",\n    \"Identify functions missing test coverage\",\n    \"Access cached analysis results for performance\",\n    \"Determine risk levels for functions based on complexity\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"CodeAnalysis\",\n      \"desc\": \"Main interface containing complete analysis results for a codebase\",\n      \"inputs\": \"none (interface/type definition)\",\n      \"outputs\": \"Structure with totalFiles, totalLines, functions, imports, orphanedFiles, duplicates, and optional enhanced metadata\"\n    },\n    {\n      \"name\": \"FunctionMetadata\",\n      \"desc\": \"Detailed information about a single function including signature, complexity, and dependencies\",\n      \"inputs\": \"none (interface/type definition)\",\n      \"outputs\": \"Structure with symbolName, parameters, returnType, visibility, branches, dependencies, stateMutations, riskLevel\"\n    },\n    {\n      \"name\": \"TestMapping\",\n      \"desc\": \"Maps source files and functions to their corresponding test files and test cases\",\n      \"inputs\": \"none (interface/type definition)\",\n      \"outputs\": \"Structure with sourceFileToTests map, functionToTests map, and uncoveredFunctions list\"\n    },\n    {\n      \"name\": \"DependencyInfo\",\n      \"desc\": \"Describes a single dependency with its type and whether it's internal or external\",\n      \"inputs\": \"none (interface/type definition)\",\n      \"outputs\": \"Structure with name, type (db/http/filesystem/etc), isInternal flag, and optional lineNumber\"\n    },\n    {\n      \"name\": \"BranchInfo\",\n      \"desc\": \"Represents a branching point in code (if/else, switch, loop, exception handling)\",\n      \"inputs\": \"none (interface/type definition)\",\n      \"outputs\": \"Structure with type, human-readable condition, and lineNumber\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"./cache (AnalysisCache)\"\n  ],\n  \"intent\": \"This file exists to provide a standardized schema for representing code analysis results across the application. It solves the problem of inconsistent data structures by defining clear interfaces for file metrics, function metadata, dependencies, test coverage, and code quality indicators, enabling other components to consume and display analysis data in a type-safe manner.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T04:16:03.662Z"
  }
}