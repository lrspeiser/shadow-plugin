{
  "file": "src/insightsTreeView.ts",
  "role": "GUI View",
  "purpose": "Provides a tree view UI in VS Code's sidebar that displays code analysis insights, reports, and AI-generated documentation with real-time status updates.",
  "userVisibleActions": [
    "View code insights organized in a hierarchical tree structure in the sidebar",
    "See real-time status indicators (idle, generating, complete) for different analysis types",
    "Click on insights to navigate to specific code locations",
    "Expand/collapse sections to view product docs, architecture analysis, unit tests, and reports",
    "See timestamps showing when each analysis was last generated",
    "View file counts and statistics for different analysis categories",
    "Access generated reports through clickable tree items",
    "See loading spinners and progress indicators during AI analysis generation",
    "View categorized insights with severity indicators and descriptions",
    "Navigate between workspace-level and file-level analysis results"
  ],
  "developerVisibleActions": [
    "Tree view automatically refreshes when new insights are generated",
    "Status updates propagate from LLM services to the UI",
    "Tree structure persists state across VS Code sessions",
    "Icons and tooltips provide visual feedback about analysis status",
    "Tree items become clickable commands when analysis is complete",
    "Background services update tree data without blocking user interaction",
    "Timestamps and file paths are stored and restored on extension reload",
    "Tree view integrates with VS Code's command system for user actions",
    "Static analysis results are displayed alongside AI-generated insights",
    "Report generation status is tracked and displayed independently for each report type"
  ],
  "keyFunctions": [
    {
      "name": "getTreeItem",
      "desc": "Returns a VS Code tree item with appropriate icon, label, and command for display in the sidebar",
      "inputs": "TreeItem element",
      "outputs": "vscode.TreeItem or Thenable<vscode.TreeItem>"
    },
    {
      "name": "getChildren",
      "desc": "Provides the hierarchical structure of insights, reports, and analysis results for the tree view",
      "inputs": "Optional parent TreeItem",
      "outputs": "Array of child TreeItems or Thenable<TreeItem[]>"
    },
    {
      "name": "updateInsights",
      "desc": "Updates the displayed insights and refreshes the tree view UI",
      "inputs": "Array of Insight objects",
      "outputs": "void"
    },
    {
      "name": "setProductDocsStatus",
      "desc": "Updates the status of product documentation generation and refreshes the UI",
      "inputs": "Status string (idle, generating, complete) and optional timestamp",
      "outputs": "void"
    },
    {
      "name": "setInsightsStatus",
      "desc": "Updates the status of insights generation and refreshes the UI",
      "inputs": "Status string (idle, generating, complete) and optional timestamp",
      "outputs": "void"
    },
    {
      "name": "setUnitTestStatus",
      "desc": "Updates the status of unit test generation and refreshes the UI",
      "inputs": "Status string (idle, generating, complete) and optional timestamp",
      "outputs": "void"
    },
    {
      "name": "setAnalysisStatus",
      "desc": "Updates the status of static analysis and refreshes the UI",
      "inputs": "Status string (idle, complete) and optional timestamp",
      "outputs": "void"
    },
    {
      "name": "setLLMService",
      "desc": "Connects the tree view to the LLM service for displaying AI-generated insights",
      "inputs": "LLMService instance",
      "outputs": "void"
    },
    {
      "name": "setReportPath",
      "desc": "Sets the file path for a generated report and updates the display with timestamp",
      "inputs": "Report file path string and optional timestamp",
      "outputs": "void"
    },
    {
      "name": "refresh",
      "desc": "Forces a complete refresh of the tree view UI",
      "inputs": "Optional TreeItem to refresh",
      "outputs": "void"
    },
    {
      "name": "loadPersistedState",
      "desc": "Restores saved timestamps and file paths from previous VS Code sessions",
      "inputs": "None",
      "outputs": "Promise<void>"
    },
    {
      "name": "formatTimestamp",
      "desc": "Converts a timestamp into a human-readable relative time string",
      "inputs": "Timestamp number",
      "outputs": "Formatted time string (e.g., '5 minutes ago')"
    }
  ],
  "dependencies": [
    "vscode",
    "./insightGenerator",
    "./llmFormatter",
    "./llmService"
  ],
  "intent": "This file exists to provide a visual interface in VS Code's sidebar that organizes and displays all code analysis results, AI-generated documentation, and reports in an easy-to-navigate tree structure. It solves the problem of presenting complex, multi-layered analysis data to users in a way that's accessible, interactive, and provides real-time feedback on generation status. It acts as the main UI bridge between background analysis services and the user's workspace exploration experience.",
  "rawContent": "```json\n{\n  \"purpose\": \"Provides a tree view UI in VS Code's sidebar that displays code analysis insights, reports, and AI-generated documentation with real-time status updates.\",\n  \"userVisibleActions\": [\n    \"View code insights organized in a hierarchical tree structure in the sidebar\",\n    \"See real-time status indicators (idle, generating, complete) for different analysis types\",\n    \"Click on insights to navigate to specific code locations\",\n    \"Expand/collapse sections to view product docs, architecture analysis, unit tests, and reports\",\n    \"See timestamps showing when each analysis was last generated\",\n    \"View file counts and statistics for different analysis categories\",\n    \"Access generated reports through clickable tree items\",\n    \"See loading spinners and progress indicators during AI analysis generation\",\n    \"View categorized insights with severity indicators and descriptions\",\n    \"Navigate between workspace-level and file-level analysis results\"\n  ],\n  \"developerVisibleActions\": [\n    \"Tree view automatically refreshes when new insights are generated\",\n    \"Status updates propagate from LLM services to the UI\",\n    \"Tree structure persists state across VS Code sessions\",\n    \"Icons and tooltips provide visual feedback about analysis status\",\n    \"Tree items become clickable commands when analysis is complete\",\n    \"Background services update tree data without blocking user interaction\",\n    \"Timestamps and file paths are stored and restored on extension reload\",\n    \"Tree view integrates with VS Code's command system for user actions\",\n    \"Static analysis results are displayed alongside AI-generated insights\",\n    \"Report generation status is tracked and displayed independently for each report type\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"getTreeItem\",\n      \"desc\": \"Returns a VS Code tree item with appropriate icon, label, and command for display in the sidebar\",\n      \"inputs\": \"TreeItem element\",\n      \"outputs\": \"vscode.TreeItem or Thenable<vscode.TreeItem>\"\n    },\n    {\n      \"name\": \"getChildren\",\n      \"desc\": \"Provides the hierarchical structure of insights, reports, and analysis results for the tree view\",\n      \"inputs\": \"Optional parent TreeItem\",\n      \"outputs\": \"Array of child TreeItems or Thenable<TreeItem[]>\"\n    },\n    {\n      \"name\": \"updateInsights\",\n      \"desc\": \"Updates the displayed insights and refreshes the tree view UI\",\n      \"inputs\": \"Array of Insight objects\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"setProductDocsStatus\",\n      \"desc\": \"Updates the status of product documentation generation and refreshes the UI\",\n      \"inputs\": \"Status string (idle, generating, complete) and optional timestamp\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"setInsightsStatus\",\n      \"desc\": \"Updates the status of insights generation and refreshes the UI\",\n      \"inputs\": \"Status string (idle, generating, complete) and optional timestamp\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"setUnitTestStatus\",\n      \"desc\": \"Updates the status of unit test generation and refreshes the UI\",\n      \"inputs\": \"Status string (idle, generating, complete) and optional timestamp\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"setAnalysisStatus\",\n      \"desc\": \"Updates the status of static analysis and refreshes the UI\",\n      \"inputs\": \"Status string (idle, complete) and optional timestamp\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"setLLMService\",\n      \"desc\": \"Connects the tree view to the LLM service for displaying AI-generated insights\",\n      \"inputs\": \"LLMService instance\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"setReportPath\",\n      \"desc\": \"Sets the file path for a generated report and updates the display with timestamp\",\n      \"inputs\": \"Report file path string and optional timestamp\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"refresh\",\n      \"desc\": \"Forces a complete refresh of the tree view UI\",\n      \"inputs\": \"Optional TreeItem to refresh\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"loadPersistedState\",\n      \"desc\": \"Restores saved timestamps and file paths from previous VS Code sessions\",\n      \"inputs\": \"None\",\n      \"outputs\": \"Promise<void>\"\n    },\n    {\n      \"name\": \"formatTimestamp\",\n      \"desc\": \"Converts a timestamp into a human-readable relative time string\",\n      \"inputs\": \"Timestamp number\",\n      \"outputs\": \"Formatted time string (e.g., '5 minutes ago')\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"./insightGenerator\",\n    \"./llmFormatter\",\n    \"./llmService\"\n  ],\n  \"intent\": \"This file exists to provide a visual interface in VS Code's sidebar that organizes and displays all code analysis results, AI-generated documentation, and reports in an easy-to-navigate tree structure. It solves the problem of presenting complex, multi-layered analysis data to users in a way that's accessible, interactive, and provides real-time feedback on generation status. It acts as the main UI bridge between background analysis services and the user's workspace exploration experience.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T04:22:54.182Z"
  }
}