{
  "file": "src/insightsViewer.ts",
  "role": "GUI View",
  "purpose": "Provides a tree view in VS Code that displays AI-generated architecture insights about the codebase, with automatic refresh when insights are updated.",
  "userVisibleActions": [
    "View AI-generated architecture insights in a tree structure in the VS Code sidebar",
    "Browse project purpose, features, architecture, and technical stack information",
    "Expand/collapse sections to see detailed insights about different aspects of the codebase",
    "Click on insights to view detailed information in the editor",
    "See real-time updates when architecture insights are regenerated",
    "Access insights from both main insights file and purpose documentation file",
    "View insights organized by categories: Project Purpose, Features, Architecture, and Technical Stack"
  ],
  "developerVisibleActions": [
    "Automatically watches .shadow/docs/insights.json for changes and refreshes the tree view",
    "Automatically watches .shadow/docs/purpose.md for changes and refreshes the tree view",
    "Loads insights from JSON file in the .shadow/docs directory",
    "Creates .shadow and .shadow/docs directories if they don't exist",
    "Parses and structures insights data into a hierarchical tree format",
    "Handles missing or invalid insights files gracefully",
    "Manages file watcher lifecycle with proper cleanup on disposal",
    "Integrates with FileWatcherService for centralized file monitoring"
  ],
  "keyFunctions": [
    {
      "name": "refresh",
      "desc": "Reloads insights from disk and updates the tree view display",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "getTreeItem",
      "desc": "Converts an InsightItem into a displayable tree item for VS Code",
      "inputs": "InsightItem element",
      "outputs": "vscode.TreeItem"
    },
    {
      "name": "getChildren",
      "desc": "Returns child items for a given tree node or root-level items if no parent",
      "inputs": "InsightItem or undefined",
      "outputs": "Promise<InsightItem[]>"
    },
    {
      "name": "loadInsights",
      "desc": "Reads and parses the insights.json file from .shadow/docs directory",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "setupFileWatcher",
      "desc": "Creates file system watchers for insights.json and purpose.md to auto-refresh the view",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "dispose",
      "desc": "Cleans up file watchers and disposable resources when the provider is destroyed",
      "inputs": "none",
      "outputs": "void"
    }
  ],
  "dependencies": [
    "vscode",
    "path",
    "fs",
    "llmService",
    "domain/services/fileWatcherService"
  ],
  "intent": "This file exists to provide developers with a convenient, always-visible sidebar view of AI-generated architecture insights about their codebase. It solves the problem of accessing and browsing architectural documentation by presenting it in an organized tree structure that automatically updates when the AI generates new insights, eliminating the need to manually open and read documentation files.",
  "rawContent": "```json\n{\n  \"purpose\": \"Provides a tree view in VS Code that displays AI-generated architecture insights about the codebase, with automatic refresh when insights are updated.\",\n  \"userVisibleActions\": [\n    \"View AI-generated architecture insights in a tree structure in the VS Code sidebar\",\n    \"Browse project purpose, features, architecture, and technical stack information\",\n    \"Expand/collapse sections to see detailed insights about different aspects of the codebase\",\n    \"Click on insights to view detailed information in the editor\",\n    \"See real-time updates when architecture insights are regenerated\",\n    \"Access insights from both main insights file and purpose documentation file\",\n    \"View insights organized by categories: Project Purpose, Features, Architecture, and Technical Stack\"\n  ],\n  \"developerVisibleActions\": [\n    \"Automatically watches .shadow/docs/insights.json for changes and refreshes the tree view\",\n    \"Automatically watches .shadow/docs/purpose.md for changes and refreshes the tree view\",\n    \"Loads insights from JSON file in the .shadow/docs directory\",\n    \"Creates .shadow and .shadow/docs directories if they don't exist\",\n    \"Parses and structures insights data into a hierarchical tree format\",\n    \"Handles missing or invalid insights files gracefully\",\n    \"Manages file watcher lifecycle with proper cleanup on disposal\",\n    \"Integrates with FileWatcherService for centralized file monitoring\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"refresh\",\n      \"desc\": \"Reloads insights from disk and updates the tree view display\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"getTreeItem\",\n      \"desc\": \"Converts an InsightItem into a displayable tree item for VS Code\",\n      \"inputs\": \"InsightItem element\",\n      \"outputs\": \"vscode.TreeItem\"\n    },\n    {\n      \"name\": \"getChildren\",\n      \"desc\": \"Returns child items for a given tree node or root-level items if no parent\",\n      \"inputs\": \"InsightItem or undefined\",\n      \"outputs\": \"Promise<InsightItem[]>\"\n    },\n    {\n      \"name\": \"loadInsights\",\n      \"desc\": \"Reads and parses the insights.json file from .shadow/docs directory\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"setupFileWatcher\",\n      \"desc\": \"Creates file system watchers for insights.json and purpose.md to auto-refresh the view\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"dispose\",\n      \"desc\": \"Cleans up file watchers and disposable resources when the provider is destroyed\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"path\",\n    \"fs\",\n    \"llmService\",\n    \"domain/services/fileWatcherService\"\n  ],\n  \"intent\": \"This file exists to provide developers with a convenient, always-visible sidebar view of AI-generated architecture insights about their codebase. It solves the problem of accessing and browsing architectural documentation by presenting it in an organized tree structure that automatically updates when the AI generates new insights, eliminating the need to manually open and read documentation files.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T04:23:10.092Z"
  }
}