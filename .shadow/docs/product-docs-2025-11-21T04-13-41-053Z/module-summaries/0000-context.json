{
  "module": "src/context",
  "moduleType": "other",
  "capabilities": [
    "Automatically converts code analysis results into LLM-compatible context format",
    "Persists analysis data to workspace storage for future reference",
    "Generates timestamped metadata for tracking analysis provenance",
    "Stores analysis documentation in a structured .shadow/docs directory",
    "Provides formatted context data suitable for AI-powered code understanding"
  ],
  "summary": "This module bridges the gap between code analysis and AI language model services by transforming raw analysis results into a structured format optimized for LLM consumption. When code analysis is performed, this module automatically processes the results and saves them to the workspace in a standardized context format.\n\nThe module manages persistent storage of analysis data within a dedicated .shadow/docs directory structure in your workspace. Each analysis result is saved with comprehensive metadata including generation timestamps, ensuring you have a historical record of code analysis for reference and tracking purposes. This persistent storage enables AI services to access and utilize analysis data efficiently without requiring re-analysis.\n\nFrom a user perspective, this module operates automatically in the background - whenever code analysis occurs, the results are seamlessly converted and stored without manual intervention. The stored context data becomes available for AI-powered features like code explanations, refactoring suggestions, and intelligent code completion, providing a foundation for enhanced developer productivity through AI assistance.",
  "files": [
    {
      "file": "src/context/analysisContextBuilder.ts",
      "role": "Core Logic",
      "purpose": "Converts code analysis data into a context format suitable for LLM services and saves it to persistent storage.",
      "userVisibleActions": [
        "Code analysis results are automatically saved to the workspace",
        "Analysis data is stored in a .shadow/docs directory for future reference",
        "Analysis includes metadata with generation timestamp"
      ],
      "developerVisibleActions": [
        "Convert CodeAnalysis objects to AnalysisContext format for LLM processing",
        "Save analysis results as JSON files in the .shadow/docs directory",
        "Creates .shadow and .shadow/docs directories automatically if they don't exist",
        "Adds metadata (generation timestamp) to saved analysis files",
        "Handles workspace folder validation before saving"
      ],
      "keyFunctions": [
        {
          "name": "convertCodeAnalysisToContext",
          "desc": "Transforms CodeAnalysis data structure into AnalysisContext format",
          "inputs": "analysis: CodeAnalysis object containing files, imports, entry points, and statistics",
          "outputs": "AnalysisContext object with formatted file paths, imports, entry points, and metrics"
        },
        {
          "name": "saveCodeAnalysis",
          "desc": "Persists code analysis results to a JSON file in the workspace",
          "inputs": "analysis: CodeAnalysis object to save",
          "outputs": "void (creates/updates code-analysis.json file with metadata)"
        }
      ],
      "dependencies": [
        "vscode",
        "fs",
        "path",
        "../analyzer",
        "../llmService"
      ],
      "intent": "This file exists to bridge the gap between code analysis results and LLM service requirements by transforming data formats and providing persistent storage of analysis results for future use and debugging.",
      "rawContent": "```json\n{\n  \"purpose\": \"Converts code analysis data into a context format suitable for LLM services and saves it to persistent storage.\",\n  \"userVisibleActions\": [\n    \"Code analysis results are automatically saved to the workspace\",\n    \"Analysis data is stored in a .shadow/docs directory for future reference\",\n    \"Analysis includes metadata with generation timestamp\"\n  ],\n  \"developerVisibleActions\": [\n    \"Convert CodeAnalysis objects to AnalysisContext format for LLM processing\",\n    \"Save analysis results as JSON files in the .shadow/docs directory\",\n    \"Creates .shadow and .shadow/docs directories automatically if they don't exist\",\n    \"Adds metadata (generation timestamp) to saved analysis files\",\n    \"Handles workspace folder validation before saving\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"convertCodeAnalysisToContext\",\n      \"desc\": \"Transforms CodeAnalysis data structure into AnalysisContext format\",\n      \"inputs\": \"analysis: CodeAnalysis object containing files, imports, entry points, and statistics\",\n      \"outputs\": \"AnalysisContext object with formatted file paths, imports, entry points, and metrics\"\n    },\n    {\n      \"name\": \"saveCodeAnalysis\",\n      \"desc\": \"Persists code analysis results to a JSON file in the workspace\",\n      \"inputs\": \"analysis: CodeAnalysis object to save\",\n      \"outputs\": \"void (creates/updates code-analysis.json file with metadata)\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"fs\",\n    \"path\",\n    \"../analyzer\",\n    \"../llmService\"\n  ],\n  \"intent\": \"This file exists to bridge the gap between code analysis results and LLM service requirements by transforming data formats and providing persistent storage of analysis results for future use and debugging.\"\n}\n```"
    }
  ],
  "endpoints": [],
  "commands": [],
  "workers": [],
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T04:25:44.650Z"
  }
}