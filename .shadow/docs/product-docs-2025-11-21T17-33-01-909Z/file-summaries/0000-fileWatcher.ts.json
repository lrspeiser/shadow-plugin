{
  "file": "src/fileWatcher.ts",
  "role": "Core Logic",
  "purpose": "Monitors file saves and triggers automatic code analysis when files are saved in the workspace",
  "userVisibleActions": [
    "Code is automatically analyzed when a file is saved (if 'analyze on save' is enabled)",
    "Analysis results appear in the diagnostics panel after saving a file",
    "Insights tree view updates automatically after file changes",
    "Analysis is debounced to avoid running too frequently on rapid saves"
  ],
  "developerVisibleActions": [
    "FileWatcher can be started and stopped to control automatic analysis",
    "Analysis is triggered by document save events",
    "Multiple rapid saves are debounced into a single analysis after a delay",
    "Analysis respects configuration settings (analyzeOnSave, debounceDelay)",
    "Analysis can be manually triggered on demand for specific files",
    "Service tracks analysis state to prevent concurrent analyses",
    "Errors during file watching are logged and handled gracefully"
  ],
  "keyFunctions": [
    {
      "name": "start",
      "desc": "Begins monitoring file saves and enables automatic analysis",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "stop",
      "desc": "Stops monitoring file saves and disables automatic analysis",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "triggerAnalysis",
      "desc": "Manually initiates code analysis for a specific file",
      "inputs": "filePath (string)",
      "outputs": "Promise<void>"
    },
    {
      "name": "onFileSaved",
      "desc": "Handles file save events and schedules debounced analysis",
      "inputs": "document (vscode.TextDocument)",
      "outputs": "void"
    },
    {
      "name": "scheduleAnalysis",
      "desc": "Debounces analysis requests to avoid running too frequently",
      "inputs": "filePath (string)",
      "outputs": "void"
    },
    {
      "name": "runAnalysis",
      "desc": "Executes the full analysis pipeline and updates diagnostics",
      "inputs": "filePath (string)",
      "outputs": "Promise<void>"
    },
    {
      "name": "dispose",
      "desc": "Cleans up resources and stops the file watcher",
      "inputs": "none",
      "outputs": "void"
    }
  ],
  "dependencies": [
    "vscode",
    "path",
    "CodeAnalyzer",
    "InsightGenerator",
    "DiagnosticsProvider",
    "InsightsTreeProvider",
    "ConfigurationManager",
    "ErrorHandler",
    "FileWatcherService"
  ],
  "intent": "This file exists to provide automatic code analysis triggered by file saves, eliminating the need for users to manually request analysis. It solves the problem of keeping code insights and diagnostics up-to-date as developers work, while preventing performance issues through debouncing and state tracking.",
  "rawContent": "```json\n{\n  \"purpose\": \"Monitors file saves and triggers automatic code analysis when files are saved in the workspace\",\n  \"userVisibleActions\": [\n    \"Code is automatically analyzed when a file is saved (if 'analyze on save' is enabled)\",\n    \"Analysis results appear in the diagnostics panel after saving a file\",\n    \"Insights tree view updates automatically after file changes\",\n    \"Analysis is debounced to avoid running too frequently on rapid saves\"\n  ],\n  \"developerVisibleActions\": [\n    \"FileWatcher can be started and stopped to control automatic analysis\",\n    \"Analysis is triggered by document save events\",\n    \"Multiple rapid saves are debounced into a single analysis after a delay\",\n    \"Analysis respects configuration settings (analyzeOnSave, debounceDelay)\",\n    \"Analysis can be manually triggered on demand for specific files\",\n    \"Service tracks analysis state to prevent concurrent analyses\",\n    \"Errors during file watching are logged and handled gracefully\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"start\",\n      \"desc\": \"Begins monitoring file saves and enables automatic analysis\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"stop\",\n      \"desc\": \"Stops monitoring file saves and disables automatic analysis\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"triggerAnalysis\",\n      \"desc\": \"Manually initiates code analysis for a specific file\",\n      \"inputs\": \"filePath (string)\",\n      \"outputs\": \"Promise<void>\"\n    },\n    {\n      \"name\": \"onFileSaved\",\n      \"desc\": \"Handles file save events and schedules debounced analysis\",\n      \"inputs\": \"document (vscode.TextDocument)\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"scheduleAnalysis\",\n      \"desc\": \"Debounces analysis requests to avoid running too frequently\",\n      \"inputs\": \"filePath (string)\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"runAnalysis\",\n      \"desc\": \"Executes the full analysis pipeline and updates diagnostics\",\n      \"inputs\": \"filePath (string)\",\n      \"outputs\": \"Promise<void>\"\n    },\n    {\n      \"name\": \"dispose\",\n      \"desc\": \"Cleans up resources and stops the file watcher\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"path\",\n    \"CodeAnalyzer\",\n    \"InsightGenerator\",\n    \"DiagnosticsProvider\",\n    \"InsightsTreeProvider\",\n    \"ConfigurationManager\",\n    \"ErrorHandler\",\n    \"FileWatcherService\"\n  ],\n  \"intent\": \"This file exists to provide automatic code analysis triggered by file saves, eliminating the need for users to manually request analysis. It solves the problem of keeping code insights and diagnostics up-to-date as developers work, while preventing performance issues through debouncing and state tracking.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T17:44:42.947Z"
  }
}