{
  "file": "src/domain/services/testing/llmTestValidationService.ts",
  "role": "Core Logic",
  "purpose": "Validates test files by running them, detecting failures, and automatically fixing broken tests using LLM assistance",
  "userVisibleActions": [
    "Tests are automatically executed and results are reported (passed/failed counts)",
    "Failing tests are identified and reported with error details",
    "Tests are automatically fixed when failures are detected",
    "Progress updates show which attempt is being made to fix a test (e.g., 'attempt 2/3')",
    "Final success or failure status is reported after fix attempts"
  ],
  "developerVisibleActions": [
    "Developer triggers test validation for a workspace or specific test file",
    "System runs Jest tests and captures execution results",
    "System reads failing test code and generates LLM prompts to fix issues",
    "System applies LLM-suggested fixes by updating test files",
    "System re-runs tests to verify fixes worked",
    "Developer receives structured test reports with pass/fail statistics",
    "System logs all validation and fix attempts for debugging"
  ],
  "keyFunctions": [
    {
      "name": "runTests",
      "desc": "Executes all tests or a specific test file and returns results with pass/fail statistics",
      "inputs": "workspaceRoot (string), optional testFile (string)",
      "outputs": "Array of TestExecutionResult objects with passed/failed/error counts"
    },
    {
      "name": "fixFailingTest",
      "desc": "Attempts to automatically fix a failing test by using LLM to analyze errors and suggest corrections",
      "inputs": "testFilePath, executionResult, workspaceRoot, llmService, maxAttempts (default 3)",
      "outputs": "Object with success status, number of attempts made, and optional final error message"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "TestExecutionService",
    "TestExecutionResult",
    "TestReport",
    "TestReportSummary",
    "buildFixPrompt",
    "SWLogger"
  ],
  "intent": "This file exists to automate the test validation workflow by running tests, detecting failures, and using AI to automatically fix broken tests instead of requiring manual developer intervention. It solves the problem of time-consuming manual test debugging and repair by leveraging LLM capabilities to understand test failures and generate fixes.",
  "rawContent": "```json\n{\n  \"purpose\": \"Validates test files by running them, detecting failures, and automatically fixing broken tests using LLM assistance\",\n  \"userVisibleActions\": [\n    \"Tests are automatically executed and results are reported (passed/failed counts)\",\n    \"Failing tests are identified and reported with error details\",\n    \"Tests are automatically fixed when failures are detected\",\n    \"Progress updates show which attempt is being made to fix a test (e.g., 'attempt 2/3')\",\n    \"Final success or failure status is reported after fix attempts\"\n  ],\n  \"developerVisibleActions\": [\n    \"Developer triggers test validation for a workspace or specific test file\",\n    \"System runs Jest tests and captures execution results\",\n    \"System reads failing test code and generates LLM prompts to fix issues\",\n    \"System applies LLM-suggested fixes by updating test files\",\n    \"System re-runs tests to verify fixes worked\",\n    \"Developer receives structured test reports with pass/fail statistics\",\n    \"System logs all validation and fix attempts for debugging\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"runTests\",\n      \"desc\": \"Executes all tests or a specific test file and returns results with pass/fail statistics\",\n      \"inputs\": \"workspaceRoot (string), optional testFile (string)\",\n      \"outputs\": \"Array of TestExecutionResult objects with passed/failed/error counts\"\n    },\n    {\n      \"name\": \"fixFailingTest\",\n      \"desc\": \"Attempts to automatically fix a failing test by using LLM to analyze errors and suggest corrections\",\n      \"inputs\": \"testFilePath, executionResult, workspaceRoot, llmService, maxAttempts (default 3)\",\n      \"outputs\": \"Object with success status, number of attempts made, and optional final error message\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"TestExecutionService\",\n    \"TestExecutionResult\",\n    \"TestReport\",\n    \"TestReportSummary\",\n    \"buildFixPrompt\",\n    \"SWLogger\"\n  ],\n  \"intent\": \"This file exists to automate the test validation workflow by running tests, detecting failures, and using AI to automatically fix broken tests instead of requiring manual developer intervention. It solves the problem of time-consuming manual test debugging and repair by leveraging LLM capabilities to understand test failures and generate fixes.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T17:42:44.983Z"
  }
}