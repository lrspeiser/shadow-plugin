{
  "file": "src/cache.ts",
  "role": "Core Logic",
  "purpose": "Manages persistent storage and retrieval of code analysis results with automatic expiration",
  "userVisibleActions": [
    "Analysis results are loaded instantly from cache when reopening a workspace",
    "Cached analysis automatically expires after 24 hours to ensure freshness",
    "Cache is stored in a hidden .shadowwatch-cache directory"
  ],
  "developerVisibleActions": [
    "Store code analysis results to avoid re-analyzing unchanged code",
    "Retrieve previously cached analysis when workspace is reopened",
    "Clear all cached data to force fresh analysis",
    "Cache automatically invalidates after 24 hours",
    "Cache files are created in the storage path with base64-encoded workspace names"
  ],
  "keyFunctions": [
    {
      "name": "getCacheKey",
      "desc": "Generates a safe filename identifier for a workspace",
      "inputs": "workspaceRoot (string)",
      "outputs": "base64-encoded workspace path (string)"
    },
    {
      "name": "get",
      "desc": "Retrieves cached analysis data if it exists and is less than 24 hours old",
      "inputs": "workspaceRoot (string)",
      "outputs": "CodeAnalysis object or null if not found/expired"
    },
    {
      "name": "set",
      "desc": "Saves code analysis results to disk with current timestamp",
      "inputs": "workspaceRoot (string), data (CodeAnalysis)",
      "outputs": "void (Promise)"
    },
    {
      "name": "clear",
      "desc": "Removes all cached analysis files from the cache directory",
      "inputs": "none",
      "outputs": "void (Promise)"
    },
    {
      "name": "ensureCacheDir",
      "desc": "Creates the cache directory if it doesn't exist",
      "inputs": "none",
      "outputs": "void"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "./analyzer"
  ],
  "intent": "Improves extension performance by caching expensive code analysis operations, allowing instant results when reopening workspaces and preventing redundant analysis of unchanged code, while ensuring data freshness through automatic expiration",
  "rawContent": "```json\n{\n  \"purpose\": \"Manages persistent storage and retrieval of code analysis results with automatic expiration\",\n  \"userVisibleActions\": [\n    \"Analysis results are loaded instantly from cache when reopening a workspace\",\n    \"Cached analysis automatically expires after 24 hours to ensure freshness\",\n    \"Cache is stored in a hidden .shadowwatch-cache directory\"\n  ],\n  \"developerVisibleActions\": [\n    \"Store code analysis results to avoid re-analyzing unchanged code\",\n    \"Retrieve previously cached analysis when workspace is reopened\",\n    \"Clear all cached data to force fresh analysis\",\n    \"Cache automatically invalidates after 24 hours\",\n    \"Cache files are created in the storage path with base64-encoded workspace names\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"getCacheKey\",\n      \"desc\": \"Generates a safe filename identifier for a workspace\",\n      \"inputs\": \"workspaceRoot (string)\",\n      \"outputs\": \"base64-encoded workspace path (string)\"\n    },\n    {\n      \"name\": \"get\",\n      \"desc\": \"Retrieves cached analysis data if it exists and is less than 24 hours old\",\n      \"inputs\": \"workspaceRoot (string)\",\n      \"outputs\": \"CodeAnalysis object or null if not found/expired\"\n    },\n    {\n      \"name\": \"set\",\n      \"desc\": \"Saves code analysis results to disk with current timestamp\",\n      \"inputs\": \"workspaceRoot (string), data (CodeAnalysis)\",\n      \"outputs\": \"void (Promise)\"\n    },\n    {\n      \"name\": \"clear\",\n      \"desc\": \"Removes all cached analysis files from the cache directory\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void (Promise)\"\n    },\n    {\n      \"name\": \"ensureCacheDir\",\n      \"desc\": \"Creates the cache directory if it doesn't exist\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"./analyzer\"\n  ],\n  \"intent\": \"Improves extension performance by caching expensive code analysis operations, allowing instant results when reopening workspaces and preventing redundant analysis of unchanged code, while ensuring data freshness through automatic expiration\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T17:36:57.927Z"
  }
}