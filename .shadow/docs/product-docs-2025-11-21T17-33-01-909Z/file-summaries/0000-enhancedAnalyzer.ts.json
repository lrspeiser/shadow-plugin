{
  "file": "src/analysis/enhancedAnalyzer.ts",
  "role": "Core Logic",
  "purpose": "Performs deep code analysis by parsing Abstract Syntax Trees (AST) to extract detailed metadata about functions, branches, dependencies, and behavioral patterns.",
  "userVisibleActions": [
    "Receives detailed analysis of code complexity and behavioral hints",
    "Gets insights into how functions interact with state and dependencies",
    "Views branch coverage information for conditional logic paths",
    "Sees identified test mappings between test files and source code"
  ],
  "developerVisibleActions": [
    "Analyzes TypeScript/JavaScript files using AST parsing to extract function metadata",
    "Detects branches (if/else, switch, ternary) and tracks conditional logic complexity",
    "Profiles function dependencies by tracking imports, function calls, and external references",
    "Identifies state mutations and side effects in function bodies",
    "Generates behavioral hints about function characteristics (pure, async, error-prone)",
    "Maps test files to source code functions for coverage analysis",
    "Falls back to regex-based analysis for non-TypeScript languages",
    "Extracts function content from source files based on line ranges"
  ],
  "keyFunctions": [
    {
      "name": "analyzeFileMetadata",
      "desc": "Analyzes a file and extracts enhanced metadata for all functions",
      "inputs": "filePath: string, content: string, language: string, functions: FunctionInfo[]",
      "outputs": "Map<string, FunctionMetadata>"
    },
    {
      "name": "analyzeTypeScriptFunction",
      "desc": "Performs AST-based analysis on TypeScript/JavaScript functions",
      "inputs": "filePath: string, content: string, func: FunctionInfo, functionContent: string",
      "outputs": "FunctionMetadata"
    },
    {
      "name": "analyzeFunctionWithRegex",
      "desc": "Fallback analysis using regex patterns for non-TypeScript languages",
      "inputs": "filePath: string, func: FunctionInfo, functionContent: string, language: string",
      "outputs": "FunctionMetadata"
    },
    {
      "name": "extractFunctionContent",
      "desc": "Extracts the text content of a function from a file",
      "inputs": "content: string, startLine: number, endLine: number",
      "outputs": "string"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "typescript",
    "../analyzer"
  ],
  "intent": "This file exists to provide advanced static code analysis beyond basic syntax parsing. It solves the problem of understanding code behavior, complexity, and relationships by using AST parsing to detect branches, dependencies, state mutations, and behavioral patterns. This enables intelligent test generation, code quality assessment, and automated documentation.",
  "rawContent": "```json\n{\n  \"purpose\": \"Performs deep code analysis by parsing Abstract Syntax Trees (AST) to extract detailed metadata about functions, branches, dependencies, and behavioral patterns.\",\n  \"userVisibleActions\": [\n    \"Receives detailed analysis of code complexity and behavioral hints\",\n    \"Gets insights into how functions interact with state and dependencies\",\n    \"Views branch coverage information for conditional logic paths\",\n    \"Sees identified test mappings between test files and source code\"\n  ],\n  \"developerVisibleActions\": [\n    \"Analyzes TypeScript/JavaScript files using AST parsing to extract function metadata\",\n    \"Detects branches (if/else, switch, ternary) and tracks conditional logic complexity\",\n    \"Profiles function dependencies by tracking imports, function calls, and external references\",\n    \"Identifies state mutations and side effects in function bodies\",\n    \"Generates behavioral hints about function characteristics (pure, async, error-prone)\",\n    \"Maps test files to source code functions for coverage analysis\",\n    \"Falls back to regex-based analysis for non-TypeScript languages\",\n    \"Extracts function content from source files based on line ranges\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"analyzeFileMetadata\",\n      \"desc\": \"Analyzes a file and extracts enhanced metadata for all functions\",\n      \"inputs\": \"filePath: string, content: string, language: string, functions: FunctionInfo[]\",\n      \"outputs\": \"Map<string, FunctionMetadata>\"\n    },\n    {\n      \"name\": \"analyzeTypeScriptFunction\",\n      \"desc\": \"Performs AST-based analysis on TypeScript/JavaScript functions\",\n      \"inputs\": \"filePath: string, content: string, func: FunctionInfo, functionContent: string\",\n      \"outputs\": \"FunctionMetadata\"\n    },\n    {\n      \"name\": \"analyzeFunctionWithRegex\",\n      \"desc\": \"Fallback analysis using regex patterns for non-TypeScript languages\",\n      \"inputs\": \"filePath: string, func: FunctionInfo, functionContent: string, language: string\",\n      \"outputs\": \"FunctionMetadata\"\n    },\n    {\n      \"name\": \"extractFunctionContent\",\n      \"desc\": \"Extracts the text content of a function from a file\",\n      \"inputs\": \"content: string, startLine: number, endLine: number\",\n      \"outputs\": \"string\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"typescript\",\n    \"../analyzer\"\n  ],\n  \"intent\": \"This file exists to provide advanced static code analysis beyond basic syntax parsing. It solves the problem of understanding code behavior, complexity, and relationships by using AST parsing to detect branches, dependencies, state mutations, and behavioral patterns. This enables intelligent test generation, code quality assessment, and automated documentation.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T17:35:36.642Z"
  }
}