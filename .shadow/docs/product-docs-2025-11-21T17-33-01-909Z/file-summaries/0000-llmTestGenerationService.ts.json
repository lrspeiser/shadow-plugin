{
  "file": "src/domain/services/testing/llmTestGenerationService.ts",
  "role": "Core Logic",
  "purpose": "Generates unit tests for code functions in small batches using an LLM service, executing them and tracking generation state",
  "userVisibleActions": [
    "Tests are generated automatically for selected functions in the workspace",
    "Progress updates show which function is being processed and how many are complete",
    "Generated tests are saved to the test directory and can be executed immediately",
    "Test execution results show pass/fail status and coverage information",
    "Failed test generation attempts are reported with error messages"
  ],
  "developerVisibleActions": [
    "Developer triggers test generation for a batch of functions from their codebase",
    "Service reads the source code of each function to understand its behavior",
    "LLM generates test code based on the function's implementation and context",
    "Generated tests are written to the file system in the test directory",
    "Tests are automatically executed to verify they work correctly",
    "Service tracks which functions have tests generated, which passed, and which failed",
    "Developer receives a map of results showing success/failure for each function",
    "Existing mock files are detected and included in the generation context"
  ],
  "keyFunctions": [
    {
      "name": "generateTestBatch",
      "desc": "Generates tests for multiple functions in a batch, processing them sequentially",
      "inputs": "Array of TestableFunction objects, workspace root path, LLM service instance, optional progress callback",
      "outputs": "Map of function names to TestGenerationResult objects containing success/failure status"
    },
    {
      "name": "extractFunctionSource",
      "desc": "Reads and extracts the source code for a specific function from the file system",
      "inputs": "TestableFunction object, workspace root path",
      "outputs": "String containing the function's source code"
    },
    {
      "name": "extractFileContext",
      "desc": "Extracts import/export context from the source file to provide additional context for test generation",
      "inputs": "File path, workspace root path",
      "outputs": "String containing file context information"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "TestableFunction",
    "TestGenerationState",
    "TestGenerationResult",
    "buildGenerationPrompt",
    "TestExecutionService",
    "SWLogger"
  ],
  "intent": "This file exists to automate the tedious process of writing unit tests by leveraging LLM capabilities to generate tests incrementally in manageable batches, ensuring each function has proper test coverage without overwhelming the system or developer with too many tests at once.",
  "rawContent": "```json\n{\n  \"purpose\": \"Generates unit tests for code functions in small batches using an LLM service, executing them and tracking generation state\",\n  \"userVisibleActions\": [\n    \"Tests are generated automatically for selected functions in the workspace\",\n    \"Progress updates show which function is being processed and how many are complete\",\n    \"Generated tests are saved to the test directory and can be executed immediately\",\n    \"Test execution results show pass/fail status and coverage information\",\n    \"Failed test generation attempts are reported with error messages\"\n  ],\n  \"developerVisibleActions\": [\n    \"Developer triggers test generation for a batch of functions from their codebase\",\n    \"Service reads the source code of each function to understand its behavior\",\n    \"LLM generates test code based on the function's implementation and context\",\n    \"Generated tests are written to the file system in the test directory\",\n    \"Tests are automatically executed to verify they work correctly\",\n    \"Service tracks which functions have tests generated, which passed, and which failed\",\n    \"Developer receives a map of results showing success/failure for each function\",\n    \"Existing mock files are detected and included in the generation context\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"generateTestBatch\",\n      \"desc\": \"Generates tests for multiple functions in a batch, processing them sequentially\",\n      \"inputs\": \"Array of TestableFunction objects, workspace root path, LLM service instance, optional progress callback\",\n      \"outputs\": \"Map of function names to TestGenerationResult objects containing success/failure status\"\n    },\n    {\n      \"name\": \"extractFunctionSource\",\n      \"desc\": \"Reads and extracts the source code for a specific function from the file system\",\n      \"inputs\": \"TestableFunction object, workspace root path\",\n      \"outputs\": \"String containing the function's source code\"\n    },\n    {\n      \"name\": \"extractFileContext\",\n      \"desc\": \"Extracts import/export context from the source file to provide additional context for test generation\",\n      \"inputs\": \"File path, workspace root path\",\n      \"outputs\": \"String containing file context information\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"TestableFunction\",\n    \"TestGenerationState\",\n    \"TestGenerationResult\",\n    \"buildGenerationPrompt\",\n    \"TestExecutionService\",\n    \"SWLogger\"\n  ],\n  \"intent\": \"This file exists to automate the tedious process of writing unit tests by leveraging LLM capabilities to generate tests incrementally in manageable batches, ensuring each function has proper test coverage without overwhelming the system or developer with too many tests at once.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T17:41:56.430Z"
  }
}