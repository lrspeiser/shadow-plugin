{
  "file": "src/domain/services/testing/llmTestSetupService.ts",
  "role": "Core Logic",
  "purpose": "Automatically detects the test environment and configuration in a workspace to prepare for generating unit tests",
  "userVisibleActions": [
    "Analyzes workspace to determine programming language and testing framework",
    "Detects existing test configuration files (package.json, jest.config.js, tsconfig.json)",
    "Identifies test directories and file patterns in the project",
    "Generates test setup recommendations based on detected environment",
    "Reports whether test environment is properly configured or needs setup"
  ],
  "developerVisibleActions": [
    "Scans workspace directory structure to identify project type",
    "Counts files by extension to determine primary programming language",
    "Checks for presence of configuration files (package.json, jest.config, tsconfig)",
    "Reads and parses package.json to detect testing frameworks (Jest, Mocha, Vitest, etc.)",
    "Identifies existing test directories (UnitTests, tests, __tests__, spec)",
    "Returns structured test environment information including language, framework, and configuration status",
    "Provides setup plan when test environment is incomplete or missing"
  ],
  "keyFunctions": [
    {
      "name": "detectTestEnvironment",
      "desc": "Analyzes workspace to determine programming language, testing framework, and configuration status",
      "inputs": "workspaceRoot (string path to workspace)",
      "outputs": "TestEnvironment object containing language, framework, config files, and test directories"
    },
    {
      "name": "getAllFiles",
      "desc": "Recursively collects all files in workspace directory for analysis",
      "inputs": "directory path (string)",
      "outputs": "Array of file paths (string[])"
    },
    {
      "name": "buildSetupPrompt",
      "desc": "Creates LLM prompt for generating test setup configuration based on detected environment",
      "inputs": "TestEnvironment object",
      "outputs": "Formatted prompt string for LLM"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "child_process",
    "testSetupTypes",
    "testPrompts",
    "SWLogger"
  ],
  "intent": "This file exists to solve the problem of automatically setting up test environments for different programming languages and frameworks. It eliminates manual configuration by detecting what testing tools are available, what language the project uses, and what configuration is needed to enable automated unit test generation. This is Phase 1 of the test setup process, focusing on environment detection and configuration generation before actual test file creation.",
  "rawContent": "```json\n{\n  \"purpose\": \"Automatically detects the test environment and configuration in a workspace to prepare for generating unit tests\",\n  \"userVisibleActions\": [\n    \"Analyzes workspace to determine programming language and testing framework\",\n    \"Detects existing test configuration files (package.json, jest.config.js, tsconfig.json)\",\n    \"Identifies test directories and file patterns in the project\",\n    \"Generates test setup recommendations based on detected environment\",\n    \"Reports whether test environment is properly configured or needs setup\"\n  ],\n  \"developerVisibleActions\": [\n    \"Scans workspace directory structure to identify project type\",\n    \"Counts files by extension to determine primary programming language\",\n    \"Checks for presence of configuration files (package.json, jest.config, tsconfig)\",\n    \"Reads and parses package.json to detect testing frameworks (Jest, Mocha, Vitest, etc.)\",\n    \"Identifies existing test directories (UnitTests, tests, __tests__, spec)\",\n    \"Returns structured test environment information including language, framework, and configuration status\",\n    \"Provides setup plan when test environment is incomplete or missing\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"detectTestEnvironment\",\n      \"desc\": \"Analyzes workspace to determine programming language, testing framework, and configuration status\",\n      \"inputs\": \"workspaceRoot (string path to workspace)\",\n      \"outputs\": \"TestEnvironment object containing language, framework, config files, and test directories\"\n    },\n    {\n      \"name\": \"getAllFiles\",\n      \"desc\": \"Recursively collects all files in workspace directory for analysis\",\n      \"inputs\": \"directory path (string)\",\n      \"outputs\": \"Array of file paths (string[])\"\n    },\n    {\n      \"name\": \"buildSetupPrompt\",\n      \"desc\": \"Creates LLM prompt for generating test setup configuration based on detected environment\",\n      \"inputs\": \"TestEnvironment object\",\n      \"outputs\": \"Formatted prompt string for LLM\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"child_process\",\n    \"testSetupTypes\",\n    \"testPrompts\",\n    \"SWLogger\"\n  ],\n  \"intent\": \"This file exists to solve the problem of automatically setting up test environments for different programming languages and frameworks. It eliminates manual configuration by detecting what testing tools are available, what language the project uses, and what configuration is needed to enable automated unit test generation. This is Phase 1 of the test setup process, focusing on environment detection and configuration generation before actual test file creation.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T01:39:13.522Z"
  }
}