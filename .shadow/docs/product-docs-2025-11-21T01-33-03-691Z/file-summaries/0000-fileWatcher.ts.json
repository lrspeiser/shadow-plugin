{
  "file": "src/fileWatcher.ts",
  "role": "Core Logic",
  "purpose": "Monitors file saves in the workspace and automatically triggers code analysis when files are saved",
  "userVisibleActions": [
    "Automatically analyzes code when files are saved (if 'analyze on save' is enabled)",
    "Provides real-time feedback on code quality after saving",
    "Shows insights and diagnostics in the editor after file changes",
    "Batches multiple rapid saves together to avoid overwhelming the system",
    "Respects user's 'analyze on save' configuration setting"
  ],
  "developerVisibleActions": [
    "Starts and stops file watching based on configuration",
    "Debounces file save events to prevent excessive analysis",
    "Coordinates analysis workflow across analyzer, insight generator, diagnostics, and tree view",
    "Handles errors during file analysis gracefully",
    "Provides hooks for workspace-level analysis when files change",
    "Exposes status of whether watcher is active (isStarted)",
    "Allows testing by accepting FileWatcherService dependency injection"
  ],
  "keyFunctions": [
    {
      "name": "start",
      "desc": "Begins watching for file saves and enables automatic analysis",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "stop",
      "desc": "Stops watching for file saves and disables automatic analysis",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "onFileSaved",
      "desc": "Handles file save events by scheduling debounced analysis",
      "inputs": "document (TextDocument)",
      "outputs": "void"
    },
    {
      "name": "triggerAnalysis",
      "desc": "Executes the full analysis pipeline on a saved file",
      "inputs": "document (TextDocument)",
      "outputs": "Promise<void>"
    },
    {
      "name": "shouldAnalyzeDocument",
      "desc": "Determines if a document should be analyzed based on file type and configuration",
      "inputs": "document (TextDocument)",
      "outputs": "boolean"
    },
    {
      "name": "dispose",
      "desc": "Cleans up resources when the file watcher is no longer needed",
      "inputs": "none",
      "outputs": "void"
    }
  ],
  "dependencies": [
    "vscode",
    "path",
    "CodeAnalyzer",
    "InsightGenerator",
    "DiagnosticsProvider",
    "InsightsTreeProvider",
    "ConfigurationManager",
    "ErrorHandler",
    "FileWatcherService"
  ],
  "intent": "This file exists to provide automatic, on-save code analysis functionality. It solves the problem of keeping code insights up-to-date without requiring manual user intervention. By watching file saves and intelligently debouncing analysis requests, it provides a responsive development experience that gives immediate feedback on code quality while avoiding performance issues from excessive analysis.",
  "rawContent": "```json\n{\n  \"purpose\": \"Monitors file saves in the workspace and automatically triggers code analysis when files are saved\",\n  \"userVisibleActions\": [\n    \"Automatically analyzes code when files are saved (if 'analyze on save' is enabled)\",\n    \"Provides real-time feedback on code quality after saving\",\n    \"Shows insights and diagnostics in the editor after file changes\",\n    \"Batches multiple rapid saves together to avoid overwhelming the system\",\n    \"Respects user's 'analyze on save' configuration setting\"\n  ],\n  \"developerVisibleActions\": [\n    \"Starts and stops file watching based on configuration\",\n    \"Debounces file save events to prevent excessive analysis\",\n    \"Coordinates analysis workflow across analyzer, insight generator, diagnostics, and tree view\",\n    \"Handles errors during file analysis gracefully\",\n    \"Provides hooks for workspace-level analysis when files change\",\n    \"Exposes status of whether watcher is active (isStarted)\",\n    \"Allows testing by accepting FileWatcherService dependency injection\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"start\",\n      \"desc\": \"Begins watching for file saves and enables automatic analysis\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"stop\",\n      \"desc\": \"Stops watching for file saves and disables automatic analysis\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"onFileSaved\",\n      \"desc\": \"Handles file save events by scheduling debounced analysis\",\n      \"inputs\": \"document (TextDocument)\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"triggerAnalysis\",\n      \"desc\": \"Executes the full analysis pipeline on a saved file\",\n      \"inputs\": \"document (TextDocument)\",\n      \"outputs\": \"Promise<void>\"\n    },\n    {\n      \"name\": \"shouldAnalyzeDocument\",\n      \"desc\": \"Determines if a document should be analyzed based on file type and configuration\",\n      \"inputs\": \"document (TextDocument)\",\n      \"outputs\": \"boolean\"\n    },\n    {\n      \"name\": \"dispose\",\n      \"desc\": \"Cleans up resources when the file watcher is no longer needed\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"path\",\n    \"CodeAnalyzer\",\n    \"InsightGenerator\",\n    \"DiagnosticsProvider\",\n    \"InsightsTreeProvider\",\n    \"ConfigurationManager\",\n    \"ErrorHandler\",\n    \"FileWatcherService\"\n  ],\n  \"intent\": \"This file exists to provide automatic, on-save code analysis functionality. It solves the problem of keeping code insights up-to-date without requiring manual user intervention. By watching file saves and intelligently debouncing analysis requests, it provides a responsive development experience that gives immediate feedback on code quality while avoiding performance issues from excessive analysis.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T01:40:53.115Z"
  }
}