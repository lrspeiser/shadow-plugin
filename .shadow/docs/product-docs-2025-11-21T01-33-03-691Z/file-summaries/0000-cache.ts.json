{
  "file": "src/cache.ts",
  "role": "Core Logic",
  "purpose": "Manages persistent caching of code analysis results to improve performance and avoid redundant analysis",
  "userVisibleActions": [
    "Faster project loading when reopening a workspace (analysis loads from cache instead of re-analyzing)",
    "Automatic cache expiration after 24 hours ensures fresh analysis",
    "Cache clearing capability to force fresh analysis when needed"
  ],
  "developerVisibleActions": [
    "Code analysis results are automatically saved to disk after initial analysis",
    "Cached analysis is retrieved on subsequent workspace opens if still valid",
    "Cache files are stored in a hidden .shadowwatch-cache directory",
    "Cache automatically invalidates after 24 hours to prevent stale data",
    "Cache can be manually cleared to force fresh analysis",
    "Cache keys are derived from workspace paths to isolate different projects"
  ],
  "keyFunctions": [
    {
      "name": "constructor",
      "desc": "Initializes cache system with storage location and creates cache directory",
      "inputs": "storagePath: string - where to store cache files",
      "outputs": "AnalysisCache instance"
    },
    {
      "name": "get",
      "desc": "Retrieves cached analysis for a workspace if available and not expired",
      "inputs": "workspaceRoot: string - path to workspace",
      "outputs": "Promise<CodeAnalysis | null> - cached analysis or null if not found/expired"
    },
    {
      "name": "set",
      "desc": "Saves analysis results to cache with current timestamp",
      "inputs": "workspaceRoot: string, data: CodeAnalysis - workspace path and analysis to cache",
      "outputs": "Promise<void>"
    },
    {
      "name": "clear",
      "desc": "Removes all cached analysis files from the cache directory",
      "inputs": "none",
      "outputs": "Promise<void>"
    },
    {
      "name": "getCacheKey",
      "desc": "Generates a safe filesystem-compatible cache key from workspace path",
      "inputs": "workspaceRoot: string - workspace path",
      "outputs": "string - base64 encoded safe filename"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "./analyzer"
  ],
  "intent": "Eliminates the need to re-analyze large codebases every time VSCode starts by persistently storing analysis results on disk with automatic expiration to balance performance and freshness",
  "rawContent": "```json\n{\n  \"purpose\": \"Manages persistent caching of code analysis results to improve performance and avoid redundant analysis\",\n  \"userVisibleActions\": [\n    \"Faster project loading when reopening a workspace (analysis loads from cache instead of re-analyzing)\",\n    \"Automatic cache expiration after 24 hours ensures fresh analysis\",\n    \"Cache clearing capability to force fresh analysis when needed\"\n  ],\n  \"developerVisibleActions\": [\n    \"Code analysis results are automatically saved to disk after initial analysis\",\n    \"Cached analysis is retrieved on subsequent workspace opens if still valid\",\n    \"Cache files are stored in a hidden .shadowwatch-cache directory\",\n    \"Cache automatically invalidates after 24 hours to prevent stale data\",\n    \"Cache can be manually cleared to force fresh analysis\",\n    \"Cache keys are derived from workspace paths to isolate different projects\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"constructor\",\n      \"desc\": \"Initializes cache system with storage location and creates cache directory\",\n      \"inputs\": \"storagePath: string - where to store cache files\",\n      \"outputs\": \"AnalysisCache instance\"\n    },\n    {\n      \"name\": \"get\",\n      \"desc\": \"Retrieves cached analysis for a workspace if available and not expired\",\n      \"inputs\": \"workspaceRoot: string - path to workspace\",\n      \"outputs\": \"Promise<CodeAnalysis | null> - cached analysis or null if not found/expired\"\n    },\n    {\n      \"name\": \"set\",\n      \"desc\": \"Saves analysis results to cache with current timestamp\",\n      \"inputs\": \"workspaceRoot: string, data: CodeAnalysis - workspace path and analysis to cache\",\n      \"outputs\": \"Promise<void>\"\n    },\n    {\n      \"name\": \"clear\",\n      \"desc\": \"Removes all cached analysis files from the cache directory\",\n      \"inputs\": \"none\",\n      \"outputs\": \"Promise<void>\"\n    },\n    {\n      \"name\": \"getCacheKey\",\n      \"desc\": \"Generates a safe filesystem-compatible cache key from workspace path\",\n      \"inputs\": \"workspaceRoot: string - workspace path\",\n      \"outputs\": \"string - base64 encoded safe filename\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"./analyzer\"\n  ],\n  \"intent\": \"Eliminates the need to re-analyze large codebases every time VSCode starts by persistently storing analysis results on disk with automatic expiration to balance performance and freshness\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T01:35:40.387Z"
  }
}