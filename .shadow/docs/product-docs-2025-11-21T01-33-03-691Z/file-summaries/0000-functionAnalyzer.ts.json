{
  "file": "src/analysis/functionAnalyzer.ts",
  "role": "Core Logic",
  "purpose": "Analyzes functions in large code files to extract detailed metadata including signatures, dependencies, and responsibilities for generating refactoring reports.",
  "userVisibleActions": [
    "Identifies functions in large files that may need refactoring",
    "Generates detailed function analysis reports showing what each function does",
    "Highlights function dependencies and relationships within the codebase",
    "Provides function signature information for understanding code structure"
  ],
  "developerVisibleActions": [
    "Developer triggers function analysis on large files exceeding a threshold (default 500 lines)",
    "Receives structured FunctionAnalysis objects containing function metadata",
    "Gets function signatures, dependencies, dependents, and responsibilities extracted from TypeScript code",
    "Can access analyzed function data to build refactoring prompts and reports",
    "Sees warnings when function analysis fails for specific functions"
  ],
  "keyFunctions": [
    {
      "name": "analyzeFunctions",
      "desc": "Analyzes all functions in files exceeding a size threshold and extracts detailed information",
      "inputs": "codeAnalysis (CodeAnalysis object), largeFileThreshold (optional number, default 500 lines)",
      "outputs": "Promise<FunctionAnalysis[]> - array of detailed function analyses"
    },
    {
      "name": "analyzeFunction",
      "desc": "Performs detailed analysis on a single function to extract its metadata and relationships",
      "inputs": "filePath (string), func (FunctionInfo), codeAnalysis (CodeAnalysis)",
      "outputs": "Promise<FunctionAnalysis | null> - detailed function analysis or null if analysis fails"
    },
    {
      "name": "resolveFilePath",
      "desc": "Resolves the full file path for a given file in the code analysis",
      "inputs": "filePath (string), codeAnalysis (CodeAnalysis)",
      "outputs": "string - resolved full file path"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "typescript",
    "../analyzer",
    "../domain/prompts/refactoringPromptBuilder"
  ],
  "intent": "This file exists to provide deep analysis of functions within large code files to support refactoring efforts. It solves the problem of understanding complex function relationships, dependencies, and responsibilities when developers need to break down or refactor large files. It bridges the gap between basic code analysis and actionable refactoring insights by extracting function-level metadata that can be used to generate intelligent refactoring suggestions.",
  "rawContent": "```json\n{\n  \"purpose\": \"Analyzes functions in large code files to extract detailed metadata including signatures, dependencies, and responsibilities for generating refactoring reports.\",\n  \"userVisibleActions\": [\n    \"Identifies functions in large files that may need refactoring\",\n    \"Generates detailed function analysis reports showing what each function does\",\n    \"Highlights function dependencies and relationships within the codebase\",\n    \"Provides function signature information for understanding code structure\"\n  ],\n  \"developerVisibleActions\": [\n    \"Developer triggers function analysis on large files exceeding a threshold (default 500 lines)\",\n    \"Receives structured FunctionAnalysis objects containing function metadata\",\n    \"Gets function signatures, dependencies, dependents, and responsibilities extracted from TypeScript code\",\n    \"Can access analyzed function data to build refactoring prompts and reports\",\n    \"Sees warnings when function analysis fails for specific functions\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"analyzeFunctions\",\n      \"desc\": \"Analyzes all functions in files exceeding a size threshold and extracts detailed information\",\n      \"inputs\": \"codeAnalysis (CodeAnalysis object), largeFileThreshold (optional number, default 500 lines)\",\n      \"outputs\": \"Promise<FunctionAnalysis[]> - array of detailed function analyses\"\n    },\n    {\n      \"name\": \"analyzeFunction\",\n      \"desc\": \"Performs detailed analysis on a single function to extract its metadata and relationships\",\n      \"inputs\": \"filePath (string), func (FunctionInfo), codeAnalysis (CodeAnalysis)\",\n      \"outputs\": \"Promise<FunctionAnalysis | null> - detailed function analysis or null if analysis fails\"\n    },\n    {\n      \"name\": \"resolveFilePath\",\n      \"desc\": \"Resolves the full file path for a given file in the code analysis\",\n      \"inputs\": \"filePath (string), codeAnalysis (CodeAnalysis)\",\n      \"outputs\": \"string - resolved full file path\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"typescript\",\n    \"../analyzer\",\n    \"../domain/prompts/refactoringPromptBuilder\"\n  ],\n  \"intent\": \"This file exists to provide deep analysis of functions within large code files to support refactoring efforts. It solves the problem of understanding complex function relationships, dependencies, and responsibilities when developers need to break down or refactor large files. It bridges the gap between basic code analysis and actionable refactoring insights by extracting function-level metadata that can be used to generate intelligent refactoring suggestions.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T01:34:52.998Z"
  }
}