{
  "file": "src/ai/llmRetryHandler.ts",
  "role": "Core Logic",
  "purpose": "Handles retry logic with exponential backoff for LLM API requests that fail due to rate limits, timeouts, or temporary errors",
  "userVisibleActions": [
    "When an AI operation fails temporarily, the system automatically retries the request instead of showing an immediate error",
    "Rate limit errors and network timeouts are handled gracefully with automatic retries",
    "Long-running AI operations have built-in resilience against temporary service disruptions"
  ],
  "developerVisibleActions": [
    "Wrap any LLM API call with retry logic to handle transient failures automatically",
    "Configure retry behavior including max attempts, delay intervals, and which errors to retry",
    "Receive callbacks when retries occur to track retry attempts and errors",
    "Non-retryable errors (like invalid API keys) fail immediately without wasting retries",
    "Get back results with metadata about how many attempts were needed"
  ],
  "keyFunctions": [
    {
      "name": "executeWithRetry",
      "desc": "Executes an async operation with automatic retry on failure, using exponential backoff between attempts",
      "inputs": "operation function to execute, optional retry configuration (maxRetries, delays, retryable error types, onRetry callback)",
      "outputs": "The successful result of the operation, or throws the final error if all retries exhausted"
    },
    {
      "name": "isRetryableError",
      "desc": "Determines whether an error should trigger a retry based on error type and message content",
      "inputs": "error object, list of retryable error patterns",
      "outputs": "boolean indicating if the error is retryable"
    }
  ],
  "dependencies": [],
  "intent": "Provides resilience for LLM API calls by automatically retrying failed requests due to temporary issues like rate limits, network problems, or service unavailability, preventing users from experiencing failures that could be resolved by waiting and retrying",
  "rawContent": "```json\n{\n  \"purpose\": \"Handles retry logic with exponential backoff for LLM API requests that fail due to rate limits, timeouts, or temporary errors\",\n  \"userVisibleActions\": [\n    \"When an AI operation fails temporarily, the system automatically retries the request instead of showing an immediate error\",\n    \"Rate limit errors and network timeouts are handled gracefully with automatic retries\",\n    \"Long-running AI operations have built-in resilience against temporary service disruptions\"\n  ],\n  \"developerVisibleActions\": [\n    \"Wrap any LLM API call with retry logic to handle transient failures automatically\",\n    \"Configure retry behavior including max attempts, delay intervals, and which errors to retry\",\n    \"Receive callbacks when retries occur to track retry attempts and errors\",\n    \"Non-retryable errors (like invalid API keys) fail immediately without wasting retries\",\n    \"Get back results with metadata about how many attempts were needed\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"executeWithRetry\",\n      \"desc\": \"Executes an async operation with automatic retry on failure, using exponential backoff between attempts\",\n      \"inputs\": \"operation function to execute, optional retry configuration (maxRetries, delays, retryable error types, onRetry callback)\",\n      \"outputs\": \"The successful result of the operation, or throws the final error if all retries exhausted\"\n    },\n    {\n      \"name\": \"isRetryableError\",\n      \"desc\": \"Determines whether an error should trigger a retry based on error type and message content\",\n      \"inputs\": \"error object, list of retryable error patterns\",\n      \"outputs\": \"boolean indicating if the error is retryable\"\n    }\n  ],\n  \"dependencies\": [],\n  \"intent\": \"Provides resilience for LLM API calls by automatically retrying failed requests due to temporary issues like rate limits, network problems, or service unavailability, preventing users from experiencing failures that could be resolved by waiting and retrying\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T01:33:39.278Z"
  }
}