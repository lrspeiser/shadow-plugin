{
  "file": "src/ai/providers/anthropicProvider.ts",
  "role": "Core Logic",
  "purpose": "Provides integration with Anthropic's Claude AI models for generating text responses and structured outputs",
  "userVisibleActions": [
    "User can interact with Claude AI models through the extension",
    "User receives AI-generated responses from Claude models (Sonnet, Opus, Haiku)",
    "User can configure Claude API key in settings to enable Claude provider",
    "User sees error messages when Claude API key is not configured",
    "User experiences AI conversations with system prompts and message history"
  ],
  "developerVisibleActions": [
    "Developer can send text generation requests to Claude models",
    "Developer can request structured JSON outputs with automatic validation",
    "Developer can specify system prompts to guide Claude's behavior",
    "Developer can provide conversation history with user and assistant messages",
    "Developer receives parsed JSON responses from Claude with validation",
    "Developer can choose between different Claude model variants (Sonnet, Opus, Haiku)",
    "Developer gets automatic retry with fallback when JSON parsing fails",
    "Developer can set custom token limits and timeouts for requests"
  ],
  "keyFunctions": [
    {
      "name": "isConfigured",
      "desc": "Checks if Claude API key is configured and provider is ready to use",
      "inputs": "none",
      "outputs": "boolean indicating if provider is configured"
    },
    {
      "name": "getName",
      "desc": "Returns the identifier name for this provider",
      "inputs": "none",
      "outputs": "string 'claude'"
    },
    {
      "name": "sendRequest",
      "desc": "Sends a text generation request to Claude and returns the response",
      "inputs": "LLMRequestOptions with model, messages, system prompt, max tokens",
      "outputs": "LLMResponse with generated text content and token usage"
    },
    {
      "name": "sendStructuredOutputRequest",
      "desc": "Requests structured JSON output from Claude with validation and retry logic",
      "inputs": "LLMRequestOptions with JSON schema requirements",
      "outputs": "StructuredOutputResponse with parsed JSON data or validation error"
    },
    {
      "name": "initialize",
      "desc": "Sets up the Claude client with API key from configuration",
      "inputs": "none (reads from config)",
      "outputs": "none (initializes internal client)"
    }
  ],
  "dependencies": [
    "@anthropic-ai/sdk",
    "../../config/configurationManager",
    "../../utils/jsonExtractor",
    "./ILLMProvider"
  ],
  "intent": "This file exists to provide a standardized interface for integrating Anthropic's Claude AI models into the extension. It solves the problem of abstracting away Claude-specific API details, handling message format conversion, managing API authentication, parsing structured outputs, and providing consistent error handling for Claude interactions.",
  "rawContent": "```json\n{\n  \"purpose\": \"Provides integration with Anthropic's Claude AI models for generating text responses and structured outputs\",\n  \"userVisibleActions\": [\n    \"User can interact with Claude AI models through the extension\",\n    \"User receives AI-generated responses from Claude models (Sonnet, Opus, Haiku)\",\n    \"User can configure Claude API key in settings to enable Claude provider\",\n    \"User sees error messages when Claude API key is not configured\",\n    \"User experiences AI conversations with system prompts and message history\"\n  ],\n  \"developerVisibleActions\": [\n    \"Developer can send text generation requests to Claude models\",\n    \"Developer can request structured JSON outputs with automatic validation\",\n    \"Developer can specify system prompts to guide Claude's behavior\",\n    \"Developer can provide conversation history with user and assistant messages\",\n    \"Developer receives parsed JSON responses from Claude with validation\",\n    \"Developer can choose between different Claude model variants (Sonnet, Opus, Haiku)\",\n    \"Developer gets automatic retry with fallback when JSON parsing fails\",\n    \"Developer can set custom token limits and timeouts for requests\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"isConfigured\",\n      \"desc\": \"Checks if Claude API key is configured and provider is ready to use\",\n      \"inputs\": \"none\",\n      \"outputs\": \"boolean indicating if provider is configured\"\n    },\n    {\n      \"name\": \"getName\",\n      \"desc\": \"Returns the identifier name for this provider\",\n      \"inputs\": \"none\",\n      \"outputs\": \"string 'claude'\"\n    },\n    {\n      \"name\": \"sendRequest\",\n      \"desc\": \"Sends a text generation request to Claude and returns the response\",\n      \"inputs\": \"LLMRequestOptions with model, messages, system prompt, max tokens\",\n      \"outputs\": \"LLMResponse with generated text content and token usage\"\n    },\n    {\n      \"name\": \"sendStructuredOutputRequest\",\n      \"desc\": \"Requests structured JSON output from Claude with validation and retry logic\",\n      \"inputs\": \"LLMRequestOptions with JSON schema requirements\",\n      \"outputs\": \"StructuredOutputResponse with parsed JSON data or validation error\"\n    },\n    {\n      \"name\": \"initialize\",\n      \"desc\": \"Sets up the Claude client with API key from configuration\",\n      \"inputs\": \"none (reads from config)\",\n      \"outputs\": \"none (initializes internal client)\"\n    }\n  ],\n  \"dependencies\": [\n    \"@anthropic-ai/sdk\",\n    \"../../config/configurationManager\",\n    \"../../utils/jsonExtractor\",\n    \"./ILLMProvider\"\n  ],\n  \"intent\": \"This file exists to provide a standardized interface for integrating Anthropic's Claude AI models into the extension. It solves the problem of abstracting away Claude-specific API details, handling message format conversion, managing API authentication, parsing structured outputs, and providing consistent error handling for Claude interactions.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T01:34:06.179Z"
  }
}