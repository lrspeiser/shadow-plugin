{
  "file": "src/analysis/enhancedAnalyzer.ts",
  "role": "Core Logic",
  "purpose": "Performs deep code analysis by parsing abstract syntax trees (AST) to extract detailed function metadata including branches, dependencies, state mutations, and behavioral patterns.",
  "userVisibleActions": [
    "Receives enhanced code intelligence about function behavior and complexity",
    "Gets insights about function dependencies and side effects",
    "Sees analysis of conditional branches and code paths within functions",
    "Receives information about state mutations and variable modifications",
    "Gets behavioral hints about function characteristics (pure, async, recursive, etc.)"
  ],
  "developerVisibleActions": [
    "Analyzes code files to extract detailed function metadata beyond basic information",
    "Parses TypeScript/JavaScript files using AST to understand code structure",
    "Extracts branch analysis showing conditional logic and code paths",
    "Profiles function dependencies and external module usage",
    "Detects state mutations and side effects in functions",
    "Generates behavioral hints indicating function patterns (pure functions, async operations, recursion)",
    "Falls back to regex-based analysis for non-TypeScript/JavaScript languages",
    "Provides test mapping suggestions based on function characteristics",
    "Returns comprehensive metadata including complexity metrics and dependency graphs"
  ],
  "keyFunctions": [
    {
      "name": "analyzeFileMetadata",
      "desc": "Analyzes a code file and extracts enhanced metadata for all functions within it",
      "inputs": "filePath (string), content (string), language (string), functions (FunctionInfo[])",
      "outputs": "Map<string, FunctionMetadata> containing detailed metadata for each function"
    },
    {
      "name": "analyzeTypeScriptFunction",
      "desc": "Performs AST-based analysis on TypeScript/JavaScript functions to extract detailed metadata",
      "inputs": "filePath (string), content (string), func (FunctionInfo), functionContent (string)",
      "outputs": "FunctionMetadata object with branch info, dependencies, mutations, and behavioral hints"
    },
    {
      "name": "analyzeFunctionWithRegex",
      "desc": "Provides fallback regex-based analysis for languages other than TypeScript/JavaScript",
      "inputs": "filePath (string), func (FunctionInfo), functionContent (string), language (string)",
      "outputs": "FunctionMetadata object with basic analysis data"
    },
    {
      "name": "extractFunctionContent",
      "desc": "Extracts the source code content of a function based on line numbers",
      "inputs": "content (string), startLine (number), endLine (number)",
      "outputs": "String containing the function's source code"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "typescript",
    "../analyzer"
  ],
  "intent": "This file exists to provide deep, AST-level code analysis that goes beyond surface-level parsing. It solves the problem of understanding complex code behavior, dependencies, and patterns by analyzing the actual structure of code rather than just reading it as text. This enables intelligent features like dependency tracking, branch analysis, mutation detection, and behavioral pattern recognition for better code understanding and test generation.",
  "rawContent": "```json\n{\n  \"purpose\": \"Performs deep code analysis by parsing abstract syntax trees (AST) to extract detailed function metadata including branches, dependencies, state mutations, and behavioral patterns.\",\n  \"userVisibleActions\": [\n    \"Receives enhanced code intelligence about function behavior and complexity\",\n    \"Gets insights about function dependencies and side effects\",\n    \"Sees analysis of conditional branches and code paths within functions\",\n    \"Receives information about state mutations and variable modifications\",\n    \"Gets behavioral hints about function characteristics (pure, async, recursive, etc.)\"\n  ],\n  \"developerVisibleActions\": [\n    \"Analyzes code files to extract detailed function metadata beyond basic information\",\n    \"Parses TypeScript/JavaScript files using AST to understand code structure\",\n    \"Extracts branch analysis showing conditional logic and code paths\",\n    \"Profiles function dependencies and external module usage\",\n    \"Detects state mutations and side effects in functions\",\n    \"Generates behavioral hints indicating function patterns (pure functions, async operations, recursion)\",\n    \"Falls back to regex-based analysis for non-TypeScript/JavaScript languages\",\n    \"Provides test mapping suggestions based on function characteristics\",\n    \"Returns comprehensive metadata including complexity metrics and dependency graphs\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"analyzeFileMetadata\",\n      \"desc\": \"Analyzes a code file and extracts enhanced metadata for all functions within it\",\n      \"inputs\": \"filePath (string), content (string), language (string), functions (FunctionInfo[])\",\n      \"outputs\": \"Map<string, FunctionMetadata> containing detailed metadata for each function\"\n    },\n    {\n      \"name\": \"analyzeTypeScriptFunction\",\n      \"desc\": \"Performs AST-based analysis on TypeScript/JavaScript functions to extract detailed metadata\",\n      \"inputs\": \"filePath (string), content (string), func (FunctionInfo), functionContent (string)\",\n      \"outputs\": \"FunctionMetadata object with branch info, dependencies, mutations, and behavioral hints\"\n    },\n    {\n      \"name\": \"analyzeFunctionWithRegex\",\n      \"desc\": \"Provides fallback regex-based analysis for languages other than TypeScript/JavaScript\",\n      \"inputs\": \"filePath (string), func (FunctionInfo), functionContent (string), language (string)\",\n      \"outputs\": \"FunctionMetadata object with basic analysis data\"\n    },\n    {\n      \"name\": \"extractFunctionContent\",\n      \"desc\": \"Extracts the source code content of a function based on line numbers\",\n      \"inputs\": \"content (string), startLine (number), endLine (number)\",\n      \"outputs\": \"String containing the function's source code\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"typescript\",\n    \"../analyzer\"\n  ],\n  \"intent\": \"This file exists to provide deep, AST-level code analysis that goes beyond surface-level parsing. It solves the problem of understanding complex code behavior, dependencies, and patterns by analyzing the actual structure of code rather than just reading it as text. This enables intelligent features like dependency tracking, branch analysis, mutation detection, and behavioral pattern recognition for better code understanding and test generation.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T01:34:41.894Z"
  }
}