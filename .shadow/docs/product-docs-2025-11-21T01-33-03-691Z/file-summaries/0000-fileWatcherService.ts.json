{
  "file": "src/domain/services/fileWatcherService.ts",
  "role": "Core Logic",
  "purpose": "Provides centralized file system watching functionality to monitor and react to file changes across the workspace",
  "userVisibleActions": [
    "Automatically detects when files are created, modified, or deleted in the workspace",
    "Updates features in real-time when relevant files change (e.g., product files, insights)",
    "Responds to file save events to trigger automatic refreshes or updates"
  ],
  "developerVisibleActions": [
    "Register watchers for specific file patterns (e.g., *.json, *.md) with custom handlers",
    "Handle file creation, modification, and deletion events separately",
    "Filter watched files using ignore patterns to exclude unwanted files",
    "Subscribe to document save events with custom handlers",
    "Dispose watchers when no longer needed to free resources",
    "Track multiple handlers for the same file pattern without creating duplicate watchers"
  ],
  "keyFunctions": [
    {
      "name": "watch",
      "desc": "Registers a file system watcher for a specific pattern and calls the handler when matching files change",
      "inputs": "id (string), pattern (file glob or relative pattern), handler (callback function), options (watch types and ignore patterns)",
      "outputs": "Disposable object to unregister the watcher"
    },
    {
      "name": "onDocumentSave",
      "desc": "Registers a handler to be called whenever a text document is saved",
      "inputs": "id (string), handler (callback function accepting TextDocument)",
      "outputs": "Disposable object to unregister the handler"
    },
    {
      "name": "unwatch",
      "desc": "Removes a specific watcher by ID and cleans up resources if no other handlers exist",
      "inputs": "id (string)",
      "outputs": "void"
    },
    {
      "name": "dispose",
      "desc": "Cleans up all watchers and handlers, freeing system resources",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "shouldIgnore",
      "desc": "Determines if a file path should be ignored based on configured patterns",
      "inputs": "filePath (string), ignorePatterns (array of glob patterns)",
      "outputs": "boolean indicating whether to ignore the file"
    }
  ],
  "dependencies": [
    "vscode",
    "path",
    "fs"
  ],
  "intent": "This file exists to consolidate duplicate file watching logic that was scattered across multiple files (fileWatcher.ts, productNavigator.ts, insightsViewer.ts). It provides a single, reusable service for monitoring file system changes, eliminating code duplication and ensuring consistent file watching behavior throughout the extension. It solves the problem of managing multiple file watchers efficiently while allowing different parts of the extension to react to file changes independently.",
  "rawContent": "```json\n{\n  \"purpose\": \"Provides centralized file system watching functionality to monitor and react to file changes across the workspace\",\n  \"userVisibleActions\": [\n    \"Automatically detects when files are created, modified, or deleted in the workspace\",\n    \"Updates features in real-time when relevant files change (e.g., product files, insights)\",\n    \"Responds to file save events to trigger automatic refreshes or updates\"\n  ],\n  \"developerVisibleActions\": [\n    \"Register watchers for specific file patterns (e.g., *.json, *.md) with custom handlers\",\n    \"Handle file creation, modification, and deletion events separately\",\n    \"Filter watched files using ignore patterns to exclude unwanted files\",\n    \"Subscribe to document save events with custom handlers\",\n    \"Dispose watchers when no longer needed to free resources\",\n    \"Track multiple handlers for the same file pattern without creating duplicate watchers\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"watch\",\n      \"desc\": \"Registers a file system watcher for a specific pattern and calls the handler when matching files change\",\n      \"inputs\": \"id (string), pattern (file glob or relative pattern), handler (callback function), options (watch types and ignore patterns)\",\n      \"outputs\": \"Disposable object to unregister the watcher\"\n    },\n    {\n      \"name\": \"onDocumentSave\",\n      \"desc\": \"Registers a handler to be called whenever a text document is saved\",\n      \"inputs\": \"id (string), handler (callback function accepting TextDocument)\",\n      \"outputs\": \"Disposable object to unregister the handler\"\n    },\n    {\n      \"name\": \"unwatch\",\n      \"desc\": \"Removes a specific watcher by ID and cleans up resources if no other handlers exist\",\n      \"inputs\": \"id (string)\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"dispose\",\n      \"desc\": \"Cleans up all watchers and handlers, freeing system resources\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"shouldIgnore\",\n      \"desc\": \"Determines if a file path should be ignored based on configured patterns\",\n      \"inputs\": \"filePath (string), ignorePatterns (array of glob patterns)\",\n      \"outputs\": \"boolean indicating whether to ignore the file\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"path\",\n    \"fs\"\n  ],\n  \"intent\": \"This file exists to consolidate duplicate file watching logic that was scattered across multiple files (fileWatcher.ts, productNavigator.ts, insightsViewer.ts). It provides a single, reusable service for monitoring file system changes, eliminating code duplication and ensuring consistent file watching behavior throughout the extension. It solves the problem of managing multiple file watchers efficiently while allowing different parts of the extension to react to file changes independently.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T01:38:16.689Z"
  }
}