{
  "file": "src/domain/services/testing/llmTestGenerationService.ts",
  "role": "Core Logic",
  "purpose": "Generates test code incrementally in small batches using an LLM service to create tests for testable functions",
  "userVisibleActions": [
    "Progress updates shown while tests are being generated for each function",
    "Test generation results displayed for batches of functions",
    "Error messages shown if test generation fails for specific functions"
  ],
  "developerVisibleActions": [
    "Triggers batch generation of tests for multiple functions at once",
    "Receives progress callbacks with current function being tested and completion percentage",
    "Gets back a map of test generation results keyed by function name",
    "Can provide custom progress handlers to track generation status",
    "Accesses generated test code and execution results for each function"
  ],
  "keyFunctions": [
    {
      "name": "generateTestBatch",
      "desc": "Generates tests for multiple functions in a batch, processing them one at a time with progress tracking",
      "inputs": "functions array, workspace root path, LLM service instance, optional progress callback",
      "outputs": "Map of function names to TestGenerationResult objects"
    },
    {
      "name": "extractFunctionSource",
      "desc": "Extracts the source code for a specific function from the workspace",
      "inputs": "TestableFunction object, workspace root path",
      "outputs": "Source code string for the function"
    },
    {
      "name": "buildGenerationPrompt",
      "desc": "Creates an LLM prompt for generating tests based on function details and existing code",
      "inputs": "function object, source code, test framework type, existing mock code",
      "outputs": "Formatted prompt string for the LLM"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "TestableFunction",
    "TestGenerationState",
    "TestGenerationResult",
    "buildGenerationPrompt",
    "TestExecutionService",
    "SWLogger"
  ],
  "intent": "This file exists to orchestrate the automated generation of unit tests using an LLM in manageable batches, allowing developers to generate test suites for multiple functions incrementally with progress tracking and result collection, solving the problem of manually writing repetitive test code.",
  "rawContent": "```json\n{\n  \"purpose\": \"Generates test code incrementally in small batches using an LLM service to create tests for testable functions\",\n  \"userVisibleActions\": [\n    \"Progress updates shown while tests are being generated for each function\",\n    \"Test generation results displayed for batches of functions\",\n    \"Error messages shown if test generation fails for specific functions\"\n  ],\n  \"developerVisibleActions\": [\n    \"Triggers batch generation of tests for multiple functions at once\",\n    \"Receives progress callbacks with current function being tested and completion percentage\",\n    \"Gets back a map of test generation results keyed by function name\",\n    \"Can provide custom progress handlers to track generation status\",\n    \"Accesses generated test code and execution results for each function\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"generateTestBatch\",\n      \"desc\": \"Generates tests for multiple functions in a batch, processing them one at a time with progress tracking\",\n      \"inputs\": \"functions array, workspace root path, LLM service instance, optional progress callback\",\n      \"outputs\": \"Map of function names to TestGenerationResult objects\"\n    },\n    {\n      \"name\": \"extractFunctionSource\",\n      \"desc\": \"Extracts the source code for a specific function from the workspace\",\n      \"inputs\": \"TestableFunction object, workspace root path\",\n      \"outputs\": \"Source code string for the function\"\n    },\n    {\n      \"name\": \"buildGenerationPrompt\",\n      \"desc\": \"Creates an LLM prompt for generating tests based on function details and existing code\",\n      \"inputs\": \"function object, source code, test framework type, existing mock code\",\n      \"outputs\": \"Formatted prompt string for the LLM\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"TestableFunction\",\n    \"TestGenerationState\",\n    \"TestGenerationResult\",\n    \"buildGenerationPrompt\",\n    \"TestExecutionService\",\n    \"SWLogger\"\n  ],\n  \"intent\": \"This file exists to orchestrate the automated generation of unit tests using an LLM in manageable batches, allowing developers to generate test suites for multiple functions incrementally with progress tracking and result collection, solving the problem of manually writing repetitive test code.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-21T01:38:48.659Z"
  }
}