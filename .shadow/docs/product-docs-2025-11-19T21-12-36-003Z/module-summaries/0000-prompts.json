{
  "module": "src/domain/prompts",
  "moduleType": "other",
  "capabilities": [
    "Generate structured prompts for LLM-based architecture analysis that produce comprehensive project documentation",
    "Create prompts for extracting user-facing product features and capabilities from codebases",
    "Build comprehensive test plan generation prompts that produce testing strategies for code files",
    "Generate code analysis prompts that explain file functionality, dependencies, and behavior",
    "Produce module-level summary prompts that consolidate related files into cohesive documentation",
    "Create detailed refactoring analysis prompts with extraction plans and migration steps",
    "Generate function-level analysis prompts that examine responsibilities, dependencies, and call relationships"
  ],
  "summary": "The prompts module provides centralized prompt construction services for all LLM-based code analysis and documentation tasks. It eliminates prompt duplication by offering specialized builders that generate structured, consistent prompts for different analysis purposes including architecture documentation, product feature extraction, test planning, and code understanding.\n\nUsers can leverage this module to generate comprehensive refactoring reports that include detailed extraction plans, step-by-step migration instructions, and before-and-after code examples. The module supports both high-level architecture analysis workflows and granular function-level analysis, providing detailed insights into code responsibilities, dependencies, and relationships.\n\nThe module serves as the foundation for automated documentation generation, enabling users to transform raw code into structured documentation, test plans, and refactoring strategies through carefully crafted LLM prompts that ensure consistent, high-quality output across all analysis tasks.",
  "files": [
    {
      "file": "src/domain/prompts/promptBuilder.ts",
      "role": "Core Logic",
      "purpose": "Provides centralized prompt construction services for all LLM analysis tasks, eliminating duplication by building structured prompts for architecture analysis, documentation, test generation, and code understanding.",
      "userVisibleActions": [
        "Generates architecture analysis prompts that produce structured project architecture documentation",
        "Creates product documentation prompts that extract user-facing features and capabilities",
        "Builds test plan prompts that generate comprehensive test strategies for code files",
        "Produces code analysis prompts that explain file functionality and behavior",
        "Generates module summary prompts that consolidate related files into cohesive documentation"
      ],
      "developerVisibleActions": [
        "Developer calls buildArchitecturePrompt to get a prompt for analyzing project structure and patterns",
        "Developer calls buildProductDocsPrompt to generate prompts for extracting product documentation",
        "Developer calls buildProductPurposePrompt to create prompts for understanding product purpose and value",
        "Developer calls buildFileAnalysisPrompt to generate prompts for analyzing individual files",
        "Developer calls buildModuleRollupPrompt to create prompts for summarizing module-level functionality",
        "Developer calls buildProductLevelPrompt to generate comprehensive product-wide documentation prompts",
        "Developer calls buildPerFileTestPlanPrompt to create prompts for test planning per file",
        "Developer calls buildTestCodeGenerationPrompt to generate actual test code from test plans",
        "Receives AnalysisContext, CodeAnalysis, and FileInfo objects as input",
        "Returns formatted string prompts ready for LLM consumption",
        "Incorporates existing code analysis, file metadata, and project structure into prompts"
      ],
      "keyFunctions": [
        {
          "name": "buildArchitecturePrompt",
          "desc": "Constructs a prompt for LLM to analyze project architecture, patterns, and structure",
          "inputs": "context: AnalysisContext, optional codeAnalysis, productDocs, productPurposeAnalysis, fileAccessHelper",
          "outputs": "formatted prompt string for architecture analysis"
        },
        {
          "name": "buildProductDocsPrompt",
          "desc": "Creates a prompt for extracting user-facing product documentation and features",
          "inputs": "context: AnalysisContext",
          "outputs": "formatted prompt string for product documentation extraction"
        },
        {
          "name": "buildProductPurposePrompt",
          "desc": "Generates a prompt for understanding product purpose, value proposition, and target users",
          "inputs": "productDocs: EnhancedProductDocumentation, context: AnalysisContext",
          "outputs": "formatted prompt string for product purpose analysis"
        },
        {
          "name": "buildFileAnalysisPrompt",
          "desc": "Creates a prompt for analyzing individual file functionality and behavior",
          "inputs": "file: FileInfo, content: string, role: string",
          "outputs": "formatted prompt string for file analysis"
        },
        {
          "name": "buildModuleRollupPrompt",
          "desc": "Constructs a prompt for rolling up multiple file summaries into module-level documentation",
          "inputs": "modulePath: string, moduleType: string, files: FileSummary[]",
          "outputs": "formatted prompt string for module summary generation"
        },
        {
          "name": "buildProductLevelPrompt",
          "desc": "Generates a comprehensive prompt for product-wide documentation synthesis",
          "inputs": "fileSummaries: FileSummary[], moduleSummaries: ModuleSummary[], analysis: CodeAnalysis, fileAccessHelper: FileAccessHelper",
          "outputs": "formatted prompt string for product-level documentation"
        },
        {
          "name": "buildPerFileTestPlanPrompt",
          "desc": "Creates a prompt for generating test plans for specific files and functions",
          "inputs": "filePath, fileContent, functionMetadata, existingTests, language, testFramework, optional projectSummary",
          "outputs": "formatted prompt string for test plan generation"
        },
        {
          "name": "buildTestCodeGenerationPrompt",
          "desc": "Constructs a prompt for generating actual test code from test plan items",
          "inputs": "testPlanItem, sourceCode, functionCode, language, testFramework",
          "outputs": "formatted prompt string for test code generation"
        }
      ],
      "dependencies": [
        "../../llmService",
        "../../analyzer",
        "../../fileDocumentation",
        "../../fileAccessHelper"
      ],
      "intent": "This file exists to solve the problem of prompt construction duplication across the codebase. By centralizing all LLM prompt building logic in one place, it ensures consistency in how prompts are structured, eliminates code duplication, and makes it easier to maintain and improve prompt quality for various analysis tasks including architecture analysis, documentation extraction, and test generation.",
      "rawContent": "```json\n{\n  \"purpose\": \"Provides centralized prompt construction services for all LLM analysis tasks, eliminating duplication by building structured prompts for architecture analysis, documentation, test generation, and code understanding.\",\n  \"userVisibleActions\": [\n    \"Generates architecture analysis prompts that produce structured project architecture documentation\",\n    \"Creates product documentation prompts that extract user-facing features and capabilities\",\n    \"Builds test plan prompts that generate comprehensive test strategies for code files\",\n    \"Produces code analysis prompts that explain file functionality and behavior\",\n    \"Generates module summary prompts that consolidate related files into cohesive documentation\"\n  ],\n  \"developerVisibleActions\": [\n    \"Developer calls buildArchitecturePrompt to get a prompt for analyzing project structure and patterns\",\n    \"Developer calls buildProductDocsPrompt to generate prompts for extracting product documentation\",\n    \"Developer calls buildProductPurposePrompt to create prompts for understanding product purpose and value\",\n    \"Developer calls buildFileAnalysisPrompt to generate prompts for analyzing individual files\",\n    \"Developer calls buildModuleRollupPrompt to create prompts for summarizing module-level functionality\",\n    \"Developer calls buildProductLevelPrompt to generate comprehensive product-wide documentation prompts\",\n    \"Developer calls buildPerFileTestPlanPrompt to create prompts for test planning per file\",\n    \"Developer calls buildTestCodeGenerationPrompt to generate actual test code from test plans\",\n    \"Receives AnalysisContext, CodeAnalysis, and FileInfo objects as input\",\n    \"Returns formatted string prompts ready for LLM consumption\",\n    \"Incorporates existing code analysis, file metadata, and project structure into prompts\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"buildArchitecturePrompt\",\n      \"desc\": \"Constructs a prompt for LLM to analyze project architecture, patterns, and structure\",\n      \"inputs\": \"context: AnalysisContext, optional codeAnalysis, productDocs, productPurposeAnalysis, fileAccessHelper\",\n      \"outputs\": \"formatted prompt string for architecture analysis\"\n    },\n    {\n      \"name\": \"buildProductDocsPrompt\",\n      \"desc\": \"Creates a prompt for extracting user-facing product documentation and features\",\n      \"inputs\": \"context: AnalysisContext\",\n      \"outputs\": \"formatted prompt string for product documentation extraction\"\n    },\n    {\n      \"name\": \"buildProductPurposePrompt\",\n      \"desc\": \"Generates a prompt for understanding product purpose, value proposition, and target users\",\n      \"inputs\": \"productDocs: EnhancedProductDocumentation, context: AnalysisContext\",\n      \"outputs\": \"formatted prompt string for product purpose analysis\"\n    },\n    {\n      \"name\": \"buildFileAnalysisPrompt\",\n      \"desc\": \"Creates a prompt for analyzing individual file functionality and behavior\",\n      \"inputs\": \"file: FileInfo, content: string, role: string\",\n      \"outputs\": \"formatted prompt string for file analysis\"\n    },\n    {\n      \"name\": \"buildModuleRollupPrompt\",\n      \"desc\": \"Constructs a prompt for rolling up multiple file summaries into module-level documentation\",\n      \"inputs\": \"modulePath: string, moduleType: string, files: FileSummary[]\",\n      \"outputs\": \"formatted prompt string for module summary generation\"\n    },\n    {\n      \"name\": \"buildProductLevelPrompt\",\n      \"desc\": \"Generates a comprehensive prompt for product-wide documentation synthesis\",\n      \"inputs\": \"fileSummaries: FileSummary[], moduleSummaries: ModuleSummary[], analysis: CodeAnalysis, fileAccessHelper: FileAccessHelper\",\n      \"outputs\": \"formatted prompt string for product-level documentation\"\n    },\n    {\n      \"name\": \"buildPerFileTestPlanPrompt\",\n      \"desc\": \"Creates a prompt for generating test plans for specific files and functions\",\n      \"inputs\": \"filePath, fileContent, functionMetadata, existingTests, language, testFramework, optional projectSummary\",\n      \"outputs\": \"formatted prompt string for test plan generation\"\n    },\n    {\n      \"name\": \"buildTestCodeGenerationPrompt\",\n      \"desc\": \"Constructs a prompt for generating actual test code from test plan items\",\n      \"inputs\": \"testPlanItem, sourceCode, functionCode, language, testFramework\",\n      \"outputs\": \"formatted prompt string for test code generation\"\n    }\n  ],\n  \"dependencies\": [\n    \"../../llmService\",\n    \"../../analyzer\",\n    \"../../fileDocumentation\",\n    \"../../fileAccessHelper\"\n  ],\n  \"intent\": \"This file exists to solve the problem of prompt construction duplication across the codebase. By centralizing all LLM prompt building logic in one place, it ensures consistency in how prompts are structured, eliminates code duplication, and makes it easier to maintain and improve prompt quality for various analysis tasks including architecture analysis, documentation extraction, and test generation.\"\n}\n```"
    },
    {
      "file": "src/domain/prompts/refactoringPromptBuilder.ts",
      "role": "Core Logic",
      "purpose": "Generates detailed, prescriptive prompts for LLM-based code refactoring analysis with extraction plans and migration steps.",
      "userVisibleActions": [
        "Receives comprehensive refactoring reports that explain what code should be extracted and why",
        "Gets detailed step-by-step migration instructions for code reorganization",
        "Views before-and-after code examples showing proposed refactoring changes",
        "Sees function-level analysis including responsibilities, dependencies, and call relationships"
      ],
      "developerVisibleActions": [
        "Creates structured prompts that guide LLMs to generate refactoring recommendations",
        "Combines code analysis, product documentation, and architecture insights into refactoring instructions",
        "Builds extraction plans that specify which functions should move to which files",
        "Generates function analysis reports showing dependencies, dependents, and responsibilities",
        "Provides detailed requirements for code extraction with migration steps and examples"
      ],
      "keyFunctions": [
        {
          "name": "buildDetailedRefactoringPrompt",
          "desc": "Constructs a comprehensive prompt for generating refactoring reports with function analysis and extraction plans",
          "inputs": "AnalysisContext, CodeAnalysis, optional EnhancedProductDocumentation, optional LLMInsights, optional FunctionAnalysis array",
          "outputs": "Complete prompt string for LLM refactoring analysis"
        },
        {
          "name": "buildBasePrompt",
          "desc": "Creates the foundational prompt structure combining context, code analysis, and documentation",
          "inputs": "AnalysisContext, CodeAnalysis, optional ProductDocumentation, optional ArchitectureInsights",
          "outputs": "Base prompt string"
        },
        {
          "name": "buildFunctionAnalysisSection",
          "desc": "Generates detailed analysis section for individual functions showing their relationships and responsibilities",
          "inputs": "Array of FunctionAnalysis objects",
          "outputs": "Formatted function analysis text"
        },
        {
          "name": "buildExtractionRequirementsSection",
          "desc": "Creates instructions for how to structure code extraction recommendations",
          "inputs": "None (defines format requirements)",
          "outputs": "Extraction requirements text"
        }
      ],
      "dependencies": [
        "../../analyzer (CodeAnalysis, FileInfo, FunctionMetadata)",
        "../../llmService (AnalysisContext, LLMInsights)",
        "../../fileDocumentation (EnhancedProductDocumentation)"
      ],
      "intent": "This file exists to standardize and enhance how refactoring instructions are communicated to LLMs, ensuring they generate actionable, detailed refactoring reports with concrete extraction plans, migration steps, and code examples rather than vague suggestions.",
      "rawContent": "```json\n{\n  \"purpose\": \"Generates detailed, prescriptive prompts for LLM-based code refactoring analysis with extraction plans and migration steps.\",\n  \"userVisibleActions\": [\n    \"Receives comprehensive refactoring reports that explain what code should be extracted and why\",\n    \"Gets detailed step-by-step migration instructions for code reorganization\",\n    \"Views before-and-after code examples showing proposed refactoring changes\",\n    \"Sees function-level analysis including responsibilities, dependencies, and call relationships\"\n  ],\n  \"developerVisibleActions\": [\n    \"Creates structured prompts that guide LLMs to generate refactoring recommendations\",\n    \"Combines code analysis, product documentation, and architecture insights into refactoring instructions\",\n    \"Builds extraction plans that specify which functions should move to which files\",\n    \"Generates function analysis reports showing dependencies, dependents, and responsibilities\",\n    \"Provides detailed requirements for code extraction with migration steps and examples\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"buildDetailedRefactoringPrompt\",\n      \"desc\": \"Constructs a comprehensive prompt for generating refactoring reports with function analysis and extraction plans\",\n      \"inputs\": \"AnalysisContext, CodeAnalysis, optional EnhancedProductDocumentation, optional LLMInsights, optional FunctionAnalysis array\",\n      \"outputs\": \"Complete prompt string for LLM refactoring analysis\"\n    },\n    {\n      \"name\": \"buildBasePrompt\",\n      \"desc\": \"Creates the foundational prompt structure combining context, code analysis, and documentation\",\n      \"inputs\": \"AnalysisContext, CodeAnalysis, optional ProductDocumentation, optional ArchitectureInsights\",\n      \"outputs\": \"Base prompt string\"\n    },\n    {\n      \"name\": \"buildFunctionAnalysisSection\",\n      \"desc\": \"Generates detailed analysis section for individual functions showing their relationships and responsibilities\",\n      \"inputs\": \"Array of FunctionAnalysis objects\",\n      \"outputs\": \"Formatted function analysis text\"\n    },\n    {\n      \"name\": \"buildExtractionRequirementsSection\",\n      \"desc\": \"Creates instructions for how to structure code extraction recommendations\",\n      \"inputs\": \"None (defines format requirements)\",\n      \"outputs\": \"Extraction requirements text\"\n    }\n  ],\n  \"dependencies\": [\n    \"../../analyzer (CodeAnalysis, FileInfo, FunctionMetadata)\",\n    \"../../llmService (AnalysisContext, LLMInsights)\",\n    \"../../fileDocumentation (EnhancedProductDocumentation)\"\n  ],\n  \"intent\": \"This file exists to standardize and enhance how refactoring instructions are communicated to LLMs, ensuring they generate actionable, detailed refactoring reports with concrete extraction plans, migration steps, and code examples rather than vague suggestions.\"\n}\n```"
    }
  ],
  "endpoints": [],
  "commands": [],
  "workers": [],
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-19T21:26:36.088Z"
  }
}