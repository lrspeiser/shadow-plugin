{
  "file": "src/state/baseStateManager.ts",
  "role": "Core Logic",
  "purpose": "Provides a reusable base class for managing persistent state in VS Code extensions with automatic storage, validation, and change notifications",
  "userVisibleActions": [
    "State persists across VS Code sessions (user's data is saved and restored when reopening VS Code)",
    "User's settings and preferences are automatically remembered",
    "Changes to state are applied immediately and saved persistently"
  ],
  "developerVisibleActions": [
    "Extend this base class to create type-safe state managers for specific features",
    "Subscribe to state changes to react to updates in real-time",
    "Update state using either direct setState or functional updates",
    "State is automatically loaded from VS Code's global storage on initialization",
    "State changes trigger notifications to all subscribers",
    "Defensive copies prevent external mutation of state",
    "Validation runs automatically before state changes are applied",
    "Failed persistence operations are logged without crashing the extension"
  ],
  "keyFunctions": [
    {
      "name": "setState",
      "desc": "Sets new state, validates it, persists to storage, and notifies all subscribers",
      "inputs": "newState: T (the new state object)",
      "outputs": "void"
    },
    {
      "name": "getState",
      "desc": "Returns a defensive copy of the current state to prevent external mutations",
      "inputs": "none",
      "outputs": "T (deep copy of current state)"
    },
    {
      "name": "updateState",
      "desc": "Updates state using a transformation function applied to current state",
      "inputs": "updater: (current: T) => T (function that transforms current state)",
      "outputs": "void"
    },
    {
      "name": "subscribe",
      "desc": "Registers a listener function to be called whenever state changes",
      "inputs": "listener: (state: T) => void (callback function)",
      "outputs": "function (unsubscribe function to stop listening)"
    },
    {
      "name": "loadState",
      "desc": "Loads state from VS Code's global storage or returns default state if none exists",
      "inputs": "none",
      "outputs": "T (loaded or default state)"
    },
    {
      "name": "getDefaultState",
      "desc": "Abstract method that subclasses must implement to provide initial default state",
      "inputs": "none",
      "outputs": "T (default state object)"
    }
  ],
  "dependencies": [
    "vscode"
  ],
  "intent": "This file exists to eliminate duplicate state management code across the extension by providing a single, robust, reusable foundation for managing persistent state. It solves the problem of manually handling storage, validation, subscriptions, and notifications for every feature that needs to track state, ensuring consistency and reducing bugs.",
  "rawContent": "```json\n{\n  \"purpose\": \"Provides a reusable base class for managing persistent state in VS Code extensions with automatic storage, validation, and change notifications\",\n  \"userVisibleActions\": [\n    \"State persists across VS Code sessions (user's data is saved and restored when reopening VS Code)\",\n    \"User's settings and preferences are automatically remembered\",\n    \"Changes to state are applied immediately and saved persistently\"\n  ],\n  \"developerVisibleActions\": [\n    \"Extend this base class to create type-safe state managers for specific features\",\n    \"Subscribe to state changes to react to updates in real-time\",\n    \"Update state using either direct setState or functional updates\",\n    \"State is automatically loaded from VS Code's global storage on initialization\",\n    \"State changes trigger notifications to all subscribers\",\n    \"Defensive copies prevent external mutation of state\",\n    \"Validation runs automatically before state changes are applied\",\n    \"Failed persistence operations are logged without crashing the extension\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"setState\",\n      \"desc\": \"Sets new state, validates it, persists to storage, and notifies all subscribers\",\n      \"inputs\": \"newState: T (the new state object)\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"getState\",\n      \"desc\": \"Returns a defensive copy of the current state to prevent external mutations\",\n      \"inputs\": \"none\",\n      \"outputs\": \"T (deep copy of current state)\"\n    },\n    {\n      \"name\": \"updateState\",\n      \"desc\": \"Updates state using a transformation function applied to current state\",\n      \"inputs\": \"updater: (current: T) => T (function that transforms current state)\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"subscribe\",\n      \"desc\": \"Registers a listener function to be called whenever state changes\",\n      \"inputs\": \"listener: (state: T) => void (callback function)\",\n      \"outputs\": \"function (unsubscribe function to stop listening)\"\n    },\n    {\n      \"name\": \"loadState\",\n      \"desc\": \"Loads state from VS Code's global storage or returns default state if none exists\",\n      \"inputs\": \"none\",\n      \"outputs\": \"T (loaded or default state)\"\n    },\n    {\n      \"name\": \"getDefaultState\",\n      \"desc\": \"Abstract method that subclasses must implement to provide initial default state\",\n      \"inputs\": \"none\",\n      \"outputs\": \"T (default state object)\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\"\n  ],\n  \"intent\": \"This file exists to eliminate duplicate state management code across the extension by providing a single, robust, reusable foundation for managing persistent state. It solves the problem of manually handling storage, validation, subscriptions, and notifications for every feature that needs to track state, ensuring consistency and reducing bugs.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-19T21:22:52.654Z"
  }
}