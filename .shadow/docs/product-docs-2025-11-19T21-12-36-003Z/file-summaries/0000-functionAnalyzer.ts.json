{
  "file": "src/analysis/functionAnalyzer.ts",
  "role": "Core Logic",
  "purpose": "Analyzes functions in large code files to extract detailed information for generating refactoring reports",
  "userVisibleActions": [
    "Generates detailed analysis reports for functions in large files",
    "Identifies functions that exceed size thresholds and may need refactoring",
    "Provides function signatures, dependencies, and responsibilities in refactoring reports",
    "Shows which functions call or are called by other functions"
  ],
  "developerVisibleActions": [
    "Analyzes all functions in files exceeding a specified line threshold (default 500 lines)",
    "Extracts function metadata including signatures, parameters, return types",
    "Identifies function dependencies (what the function calls)",
    "Identifies function dependents (what calls this function)",
    "Determines function responsibilities by analyzing code behavior",
    "Resolves file paths from the code analysis results",
    "Handles analysis errors gracefully with warnings",
    "Returns structured FunctionAnalysis objects for report generation"
  ],
  "keyFunctions": [
    {
      "name": "analyzeFunctions",
      "desc": "Analyzes all functions in large files and extracts detailed information for refactoring",
      "inputs": "codeAnalysis (full code analysis results), largeFileThreshold (line count threshold, default 500)",
      "outputs": "Array of FunctionAnalysis objects containing detailed function information"
    },
    {
      "name": "analyzeFunction",
      "desc": "Performs detailed analysis of a single function including dependencies and responsibilities",
      "inputs": "filePath (file location), func (function info object), codeAnalysis (full analysis context)",
      "outputs": "FunctionAnalysis object with complete function details, or null if analysis fails"
    },
    {
      "name": "resolveFilePath",
      "desc": "Resolves relative or absolute file paths to full file system paths",
      "inputs": "filePath (path to resolve), codeAnalysis (context for resolution)",
      "outputs": "Full resolved file path"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "typescript",
    "../analyzer",
    "../domain/prompts/refactoringPromptBuilder"
  ],
  "intent": "This file exists to provide detailed function-level analysis for code refactoring recommendations. It extracts comprehensive information about functions in large files (signatures, dependencies, relationships) that can be used to generate intelligent refactoring suggestions and reports, helping developers identify functions that may benefit from restructuring or breaking into smaller components.",
  "rawContent": "```json\n{\n  \"purpose\": \"Analyzes functions in large code files to extract detailed information for generating refactoring reports\",\n  \"userVisibleActions\": [\n    \"Generates detailed analysis reports for functions in large files\",\n    \"Identifies functions that exceed size thresholds and may need refactoring\",\n    \"Provides function signatures, dependencies, and responsibilities in refactoring reports\",\n    \"Shows which functions call or are called by other functions\"\n  ],\n  \"developerVisibleActions\": [\n    \"Analyzes all functions in files exceeding a specified line threshold (default 500 lines)\",\n    \"Extracts function metadata including signatures, parameters, return types\",\n    \"Identifies function dependencies (what the function calls)\",\n    \"Identifies function dependents (what calls this function)\",\n    \"Determines function responsibilities by analyzing code behavior\",\n    \"Resolves file paths from the code analysis results\",\n    \"Handles analysis errors gracefully with warnings\",\n    \"Returns structured FunctionAnalysis objects for report generation\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"analyzeFunctions\",\n      \"desc\": \"Analyzes all functions in large files and extracts detailed information for refactoring\",\n      \"inputs\": \"codeAnalysis (full code analysis results), largeFileThreshold (line count threshold, default 500)\",\n      \"outputs\": \"Array of FunctionAnalysis objects containing detailed function information\"\n    },\n    {\n      \"name\": \"analyzeFunction\",\n      \"desc\": \"Performs detailed analysis of a single function including dependencies and responsibilities\",\n      \"inputs\": \"filePath (file location), func (function info object), codeAnalysis (full analysis context)\",\n      \"outputs\": \"FunctionAnalysis object with complete function details, or null if analysis fails\"\n    },\n    {\n      \"name\": \"resolveFilePath\",\n      \"desc\": \"Resolves relative or absolute file paths to full file system paths\",\n      \"inputs\": \"filePath (path to resolve), codeAnalysis (context for resolution)\",\n      \"outputs\": \"Full resolved file path\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"typescript\",\n    \"../analyzer\",\n    \"../domain/prompts/refactoringPromptBuilder\"\n  ],\n  \"intent\": \"This file exists to provide detailed function-level analysis for code refactoring recommendations. It extracts comprehensive information about functions in large files (signatures, dependencies, relationships) that can be used to generate intelligent refactoring suggestions and reports, helping developers identify functions that may benefit from restructuring or breaking into smaller components.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-19T21:14:38.336Z"
  }
}