{
  "file": "src/domain/services/fileWatcherService.ts",
  "role": "Core Logic",
  "purpose": "Provides centralized file system watching capabilities to monitor and respond to file changes, creations, and deletions across the workspace",
  "userVisibleActions": [
    "Automatically detects when files are created, modified, or deleted in the workspace",
    "Responds to changes in specific file types (e.g., .feature files, .insights files) without manual refresh",
    "Updates UI views and displays when relevant files change",
    "Triggers automatic updates when saving documents"
  ],
  "developerVisibleActions": [
    "Register file watchers for specific patterns (e.g., '**/*.feature', '**/*.insights')",
    "Handle file creation, change, and deletion events with custom callbacks",
    "Watch for document save events across all text documents",
    "Filter file changes using ignore patterns to exclude unwanted files",
    "Unregister watchers when no longer needed to prevent memory leaks",
    "Dispose all watchers when extension deactivates"
  ],
  "keyFunctions": [
    {
      "name": "watch",
      "desc": "Creates a file system watcher for a specific pattern and registers a handler for file changes",
      "inputs": "id (string), pattern (glob pattern or RelativePattern), handler (callback function), options (ignorePatterns, watchCreate, watchChange, watchDelete)",
      "outputs": "Disposable object to stop watching"
    },
    {
      "name": "unwatch",
      "desc": "Removes a specific file watcher registration by its unique ID",
      "inputs": "id (string)",
      "outputs": "void"
    },
    {
      "name": "onDocumentSave",
      "desc": "Registers a handler to be called whenever any document is saved in the workspace",
      "inputs": "handler (callback function receiving TextDocument)",
      "outputs": "Disposable object to unregister the handler"
    },
    {
      "name": "getMatchingHandlers",
      "desc": "Finds all registered handlers that should process a given file URI",
      "inputs": "uri (file URI), patternKey (pattern identifier)",
      "outputs": "Set of PatternHandler objects"
    },
    {
      "name": "shouldIgnoreFile",
      "desc": "Determines if a file should be ignored based on configured ignore patterns",
      "inputs": "filePath (string), ignorePatterns (array of glob patterns)",
      "outputs": "boolean indicating whether to ignore the file"
    },
    {
      "name": "dispose",
      "desc": "Cleans up all watchers and handlers, releasing system resources",
      "inputs": "none",
      "outputs": "void"
    }
  ],
  "dependencies": [
    "vscode",
    "path",
    "fs"
  ],
  "intent": "This file consolidates file watching functionality that was previously duplicated across multiple files (fileWatcher.ts, productNavigator.ts, insightsViewer.ts). It provides a single, reusable service for monitoring file system changes, reducing code duplication and ensuring consistent file watching behavior throughout the extension. The service allows different parts of the extension to react to file changes without each implementing their own watcher logic, and it handles cleanup to prevent resource leaks.",
  "rawContent": "```json\n{\n  \"purpose\": \"Provides centralized file system watching capabilities to monitor and respond to file changes, creations, and deletions across the workspace\",\n  \"userVisibleActions\": [\n    \"Automatically detects when files are created, modified, or deleted in the workspace\",\n    \"Responds to changes in specific file types (e.g., .feature files, .insights files) without manual refresh\",\n    \"Updates UI views and displays when relevant files change\",\n    \"Triggers automatic updates when saving documents\"\n  ],\n  \"developerVisibleActions\": [\n    \"Register file watchers for specific patterns (e.g., '**/*.feature', '**/*.insights')\",\n    \"Handle file creation, change, and deletion events with custom callbacks\",\n    \"Watch for document save events across all text documents\",\n    \"Filter file changes using ignore patterns to exclude unwanted files\",\n    \"Unregister watchers when no longer needed to prevent memory leaks\",\n    \"Dispose all watchers when extension deactivates\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"watch\",\n      \"desc\": \"Creates a file system watcher for a specific pattern and registers a handler for file changes\",\n      \"inputs\": \"id (string), pattern (glob pattern or RelativePattern), handler (callback function), options (ignorePatterns, watchCreate, watchChange, watchDelete)\",\n      \"outputs\": \"Disposable object to stop watching\"\n    },\n    {\n      \"name\": \"unwatch\",\n      \"desc\": \"Removes a specific file watcher registration by its unique ID\",\n      \"inputs\": \"id (string)\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"onDocumentSave\",\n      \"desc\": \"Registers a handler to be called whenever any document is saved in the workspace\",\n      \"inputs\": \"handler (callback function receiving TextDocument)\",\n      \"outputs\": \"Disposable object to unregister the handler\"\n    },\n    {\n      \"name\": \"getMatchingHandlers\",\n      \"desc\": \"Finds all registered handlers that should process a given file URI\",\n      \"inputs\": \"uri (file URI), patternKey (pattern identifier)\",\n      \"outputs\": \"Set of PatternHandler objects\"\n    },\n    {\n      \"name\": \"shouldIgnoreFile\",\n      \"desc\": \"Determines if a file should be ignored based on configured ignore patterns\",\n      \"inputs\": \"filePath (string), ignorePatterns (array of glob patterns)\",\n      \"outputs\": \"boolean indicating whether to ignore the file\"\n    },\n    {\n      \"name\": \"dispose\",\n      \"desc\": \"Cleans up all watchers and handlers, releasing system resources\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"path\",\n    \"fs\"\n  ],\n  \"intent\": \"This file consolidates file watching functionality that was previously duplicated across multiple files (fileWatcher.ts, productNavigator.ts, insightsViewer.ts). It provides a single, reusable service for monitoring file system changes, reducing code duplication and ensuring consistent file watching behavior throughout the extension. The service allows different parts of the extension to react to file changes without each implementing their own watcher logic, and it handles cleanup to prevent resource leaks.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-19T21:17:55.553Z"
  }
}