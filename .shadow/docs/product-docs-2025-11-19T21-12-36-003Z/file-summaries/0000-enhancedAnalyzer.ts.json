{
  "file": "src/analysis/enhancedAnalyzer.ts",
  "role": "Core Logic",
  "purpose": "Performs deep code analysis by parsing Abstract Syntax Trees (AST) to extract detailed function metadata including branches, dependencies, state mutations, and behavioral hints.",
  "userVisibleActions": [
    "Provides detailed insights about code behavior and function characteristics",
    "Shows branch complexity and decision points in code",
    "Reveals dependencies between code modules and functions",
    "Identifies state mutations and side effects in functions",
    "Maps test coverage to functions"
  ],
  "developerVisibleActions": [
    "Analyzes TypeScript/JavaScript files using AST parsing to extract function metadata",
    "Extracts branch information (if/else, switch, loops) from function bodies",
    "Profiles dependencies between functions and external modules",
    "Detects state mutations and tracks which variables/objects are modified",
    "Generates behavioral hints about function purpose and side effects",
    "Maps test files to source code functions",
    "Provides fallback regex-based analysis for non-TypeScript languages",
    "Returns structured metadata including complexity metrics and code patterns"
  ],
  "keyFunctions": [
    {
      "name": "analyzeFileMetadata",
      "desc": "Analyzes a single code file and extracts enhanced metadata for all functions in it",
      "inputs": "filePath: string, content: string, language: string, functions: FunctionInfo[]",
      "outputs": "Map<string, FunctionMetadata> containing detailed function analysis"
    },
    {
      "name": "analyzeTypeScriptFunction",
      "desc": "Uses TypeScript AST parser to deeply analyze a function's structure, branches, dependencies, and behavior",
      "inputs": "filePath: string, content: string, func: FunctionInfo, functionContent: string",
      "outputs": "FunctionMetadata with AST-derived insights"
    },
    {
      "name": "analyzeFunctionWithRegex",
      "desc": "Provides basic function analysis using pattern matching for languages without AST support",
      "inputs": "filePath: string, func: FunctionInfo, functionContent: string, language: string",
      "outputs": "FunctionMetadata with regex-based analysis"
    },
    {
      "name": "extractFunctionContent",
      "desc": "Extracts the source code content of a function between specified line numbers",
      "inputs": "content: string, startLine: number, endLine: number",
      "outputs": "string containing the function's source code"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "typescript",
    "../analyzer"
  ],
  "intent": "This file exists to provide advanced code analysis capabilities beyond basic syntax parsing. It solves the problem of understanding code behavior, complexity, and relationships by parsing the AST structure, enabling features like intelligent test generation, code documentation, and dependency mapping. It bridges the gap between simple text analysis and deep semantic understanding of code.",
  "rawContent": "```json\n{\n  \"purpose\": \"Performs deep code analysis by parsing Abstract Syntax Trees (AST) to extract detailed function metadata including branches, dependencies, state mutations, and behavioral hints.\",\n  \"userVisibleActions\": [\n    \"Provides detailed insights about code behavior and function characteristics\",\n    \"Shows branch complexity and decision points in code\",\n    \"Reveals dependencies between code modules and functions\",\n    \"Identifies state mutations and side effects in functions\",\n    \"Maps test coverage to functions\"\n  ],\n  \"developerVisibleActions\": [\n    \"Analyzes TypeScript/JavaScript files using AST parsing to extract function metadata\",\n    \"Extracts branch information (if/else, switch, loops) from function bodies\",\n    \"Profiles dependencies between functions and external modules\",\n    \"Detects state mutations and tracks which variables/objects are modified\",\n    \"Generates behavioral hints about function purpose and side effects\",\n    \"Maps test files to source code functions\",\n    \"Provides fallback regex-based analysis for non-TypeScript languages\",\n    \"Returns structured metadata including complexity metrics and code patterns\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"analyzeFileMetadata\",\n      \"desc\": \"Analyzes a single code file and extracts enhanced metadata for all functions in it\",\n      \"inputs\": \"filePath: string, content: string, language: string, functions: FunctionInfo[]\",\n      \"outputs\": \"Map<string, FunctionMetadata> containing detailed function analysis\"\n    },\n    {\n      \"name\": \"analyzeTypeScriptFunction\",\n      \"desc\": \"Uses TypeScript AST parser to deeply analyze a function's structure, branches, dependencies, and behavior\",\n      \"inputs\": \"filePath: string, content: string, func: FunctionInfo, functionContent: string\",\n      \"outputs\": \"FunctionMetadata with AST-derived insights\"\n    },\n    {\n      \"name\": \"analyzeFunctionWithRegex\",\n      \"desc\": \"Provides basic function analysis using pattern matching for languages without AST support\",\n      \"inputs\": \"filePath: string, func: FunctionInfo, functionContent: string, language: string\",\n      \"outputs\": \"FunctionMetadata with regex-based analysis\"\n    },\n    {\n      \"name\": \"extractFunctionContent\",\n      \"desc\": \"Extracts the source code content of a function between specified line numbers\",\n      \"inputs\": \"content: string, startLine: number, endLine: number\",\n      \"outputs\": \"string containing the function's source code\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"typescript\",\n    \"../analyzer\"\n  ],\n  \"intent\": \"This file exists to provide advanced code analysis capabilities beyond basic syntax parsing. It solves the problem of understanding code behavior, complexity, and relationships by parsing the AST structure, enabling features like intelligent test generation, code documentation, and dependency mapping. It bridges the gap between simple text analysis and deep semantic understanding of code.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-19T21:14:26.648Z"
  }
}