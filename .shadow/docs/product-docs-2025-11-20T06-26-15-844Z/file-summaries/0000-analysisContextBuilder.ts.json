{
  "file": "src/context/analysisContextBuilder.ts",
  "role": "Core Logic",
  "purpose": "Converts code analysis results into a format suitable for LLM processing and saves them to disk for future reference",
  "userVisibleActions": [
    "Code analysis results are automatically saved to .shadow/docs/code-analysis.json in the workspace",
    "Analysis data persists between sessions for faster subsequent operations"
  ],
  "developerVisibleActions": [
    "Transform raw code analysis data into a structured context format that LLMs can process",
    "Persist analysis results with metadata (timestamp, version) to the .shadow/docs directory",
    "Access previously generated analysis data without re-scanning the codebase",
    "View saved analysis including file structure, imports, entry points, and code statistics"
  ],
  "keyFunctions": [
    {
      "name": "convertCodeAnalysisToContext",
      "desc": "Transforms CodeAnalysis data structure into AnalysisContext format suitable for LLM consumption",
      "inputs": "CodeAnalysis object containing files, imports, entry points, and statistics",
      "outputs": "AnalysisContext object with formatted file information, imports, entry points, orphaned files, and totals"
    },
    {
      "name": "saveCodeAnalysis",
      "desc": "Persists code analysis results to a JSON file in the workspace's .shadow/docs directory with generation metadata",
      "inputs": "CodeAnalysis object to be saved",
      "outputs": "void (writes to file system)"
    }
  ],
  "dependencies": [
    "vscode",
    "fs",
    "path",
    "../analyzer",
    "../llmService"
  ],
  "intent": "This file bridges the gap between raw code analysis and LLM processing by transforming analysis data into an LLM-friendly format and caching it to disk. This allows documentation generation to reuse expensive analysis results across multiple requests and sessions, improving performance and enabling consistent context for AI-generated documentation.",
  "rawContent": "```json\n{\n  \"purpose\": \"Converts code analysis results into a format suitable for LLM processing and saves them to disk for future reference\",\n  \"userVisibleActions\": [\n    \"Code analysis results are automatically saved to .shadow/docs/code-analysis.json in the workspace\",\n    \"Analysis data persists between sessions for faster subsequent operations\"\n  ],\n  \"developerVisibleActions\": [\n    \"Transform raw code analysis data into a structured context format that LLMs can process\",\n    \"Persist analysis results with metadata (timestamp, version) to the .shadow/docs directory\",\n    \"Access previously generated analysis data without re-scanning the codebase\",\n    \"View saved analysis including file structure, imports, entry points, and code statistics\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"convertCodeAnalysisToContext\",\n      \"desc\": \"Transforms CodeAnalysis data structure into AnalysisContext format suitable for LLM consumption\",\n      \"inputs\": \"CodeAnalysis object containing files, imports, entry points, and statistics\",\n      \"outputs\": \"AnalysisContext object with formatted file information, imports, entry points, orphaned files, and totals\"\n    },\n    {\n      \"name\": \"saveCodeAnalysis\",\n      \"desc\": \"Persists code analysis results to a JSON file in the workspace's .shadow/docs directory with generation metadata\",\n      \"inputs\": \"CodeAnalysis object to be saved\",\n      \"outputs\": \"void (writes to file system)\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"fs\",\n    \"path\",\n    \"../analyzer\",\n    \"../llmService\"\n  ],\n  \"intent\": \"This file bridges the gap between raw code analysis and LLM processing by transforming analysis data into an LLM-friendly format and caching it to disk. This allows documentation generation to reuse expensive analysis results across multiple requests and sessions, improving performance and enabling consistent context for AI-generated documentation.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T06:29:28.733Z"
  }
}