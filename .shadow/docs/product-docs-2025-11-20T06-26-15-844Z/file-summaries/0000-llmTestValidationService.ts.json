{
  "file": "src/domain/services/testing/llmTestValidationService.ts",
  "role": "Core Logic",
  "purpose": "Validates tests by running them, detecting failures, and automatically fixing failing tests using an LLM.",
  "userVisibleActions": [
    "Tests are automatically executed in the workspace",
    "Test results are displayed showing passed, failed, and total test counts",
    "Failing tests are automatically fixed through multiple attempts",
    "Progress updates are shown for each fix attempt",
    "Final test validation reports are generated with success/failure statistics"
  ],
  "developerVisibleActions": [
    "Trigger test execution for entire workspace or specific test files",
    "Initiate automatic fixing of failing tests with configurable retry attempts",
    "Receive structured test execution results with pass/fail counts per file",
    "Get detailed test reports including failure messages and stack traces",
    "Access test report summaries with overall statistics",
    "Monitor fix attempt progress through logged messages"
  ],
  "keyFunctions": [
    {
      "name": "runTests",
      "desc": "Executes all tests or tests in a specific file and captures results",
      "inputs": "workspaceRoot (string), optional testFile (string)",
      "outputs": "Promise<TestExecutionResult[]> - array of test results per file"
    },
    {
      "name": "fixFailingTest",
      "desc": "Attempts to automatically fix a failing test using LLM with retry logic",
      "inputs": "testFilePath (string), executionResult (TestExecutionResult), workspaceRoot (string), llmService (any), optional maxAttempts (number, default 3)",
      "outputs": "Promise<{success: boolean, attempts: number, finalError?: string}>"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "TestExecutionService",
    "testResultTypes (TestExecutionResult, TestReport, TestReportSummary)",
    "testPrompts (buildFixPrompt)",
    "SWLogger"
  ],
  "intent": "This file exists to automate the test validation workflow by running tests, identifying failures, and using LLM capabilities to automatically fix broken tests with intelligent retry logic. It solves the problem of manual test debugging and fixing by providing an automated validation and repair pipeline for generated or existing tests.",
  "rawContent": "```json\n{\n  \"purpose\": \"Validates tests by running them, detecting failures, and automatically fixing failing tests using an LLM.\",\n  \"userVisibleActions\": [\n    \"Tests are automatically executed in the workspace\",\n    \"Test results are displayed showing passed, failed, and total test counts\",\n    \"Failing tests are automatically fixed through multiple attempts\",\n    \"Progress updates are shown for each fix attempt\",\n    \"Final test validation reports are generated with success/failure statistics\"\n  ],\n  \"developerVisibleActions\": [\n    \"Trigger test execution for entire workspace or specific test files\",\n    \"Initiate automatic fixing of failing tests with configurable retry attempts\",\n    \"Receive structured test execution results with pass/fail counts per file\",\n    \"Get detailed test reports including failure messages and stack traces\",\n    \"Access test report summaries with overall statistics\",\n    \"Monitor fix attempt progress through logged messages\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"runTests\",\n      \"desc\": \"Executes all tests or tests in a specific file and captures results\",\n      \"inputs\": \"workspaceRoot (string), optional testFile (string)\",\n      \"outputs\": \"Promise<TestExecutionResult[]> - array of test results per file\"\n    },\n    {\n      \"name\": \"fixFailingTest\",\n      \"desc\": \"Attempts to automatically fix a failing test using LLM with retry logic\",\n      \"inputs\": \"testFilePath (string), executionResult (TestExecutionResult), workspaceRoot (string), llmService (any), optional maxAttempts (number, default 3)\",\n      \"outputs\": \"Promise<{success: boolean, attempts: number, finalError?: string}>\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"TestExecutionService\",\n    \"testResultTypes (TestExecutionResult, TestReport, TestReportSummary)\",\n    \"testPrompts (buildFixPrompt)\",\n    \"SWLogger\"\n  ],\n  \"intent\": \"This file exists to automate the test validation workflow by running tests, identifying failures, and using LLM capabilities to automatically fix broken tests with intelligent retry logic. It solves the problem of manual test debugging and fixing by providing an automated validation and repair pipeline for generated or existing tests.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T06:33:02.784Z"
  }
}