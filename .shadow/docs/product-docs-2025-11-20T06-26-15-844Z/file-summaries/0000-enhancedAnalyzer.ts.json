{
  "file": "src/analysis/enhancedAnalyzer.ts",
  "role": "Core Logic",
  "purpose": "Provides deep code analysis capabilities that extract function metadata, branch logic, dependencies, state mutations, and behavioral patterns from code files using AST parsing.",
  "userVisibleActions": [
    "Receives detailed analysis of code behavior including what functions do and how they interact",
    "Gets information about code complexity and branching logic",
    "Sees enhanced test coverage recommendations based on code structure",
    "Receives behavioral hints about what code does from a user perspective"
  ],
  "developerVisibleActions": [
    "Developer calls analyzeFileMetadata() to get comprehensive function metadata for a file",
    "Developer receives structured data about branches, dependencies, and state mutations",
    "Developer gets AST-based analysis for TypeScript/JavaScript and regex-based fallback for other languages",
    "Developer accesses branch information showing conditional logic and decision points in code",
    "Developer receives dependency profiling showing which modules and functions are imported/used",
    "Developer gets state mutation tracking showing which variables and properties are modified",
    "Developer receives behavioral hints describing what code does from an external perspective",
    "Developer can extract function content between specific line ranges",
    "Developer gets test mapping suggestions for better code coverage"
  ],
  "keyFunctions": [
    {
      "name": "analyzeFileMetadata",
      "desc": "Analyzes a file and extracts enhanced metadata for all functions including branches, dependencies, and behavioral patterns",
      "inputs": "filePath (string), content (string), language (string), functions (FunctionInfo[])",
      "outputs": "Promise<Map<string, FunctionMetadata>> - Map of function names to their metadata"
    },
    {
      "name": "analyzeTypeScriptFunction",
      "desc": "Performs AST-based analysis on TypeScript/JavaScript functions to extract detailed metadata",
      "inputs": "filePath (string), content (string), func (FunctionInfo), functionContent (string)",
      "outputs": "Promise<FunctionMetadata> - Detailed function metadata including AST-parsed information"
    },
    {
      "name": "analyzeFunctionWithRegex",
      "desc": "Provides fallback regex-based analysis for languages that don't have AST parsing support",
      "inputs": "filePath (string), func (FunctionInfo), functionContent (string), language (string)",
      "outputs": "FunctionMetadata - Basic function metadata extracted via pattern matching"
    },
    {
      "name": "extractFunctionContent",
      "desc": "Extracts the source code content of a function between specified line numbers",
      "inputs": "content (string), startLine (number), endLine (number)",
      "outputs": "string - The extracted function source code"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "typescript",
    "../analyzer (CodeAnalysis, FunctionMetadata, BranchInfo, DependencyInfo, StateMutationInfo, TestMapping, BehavioralHints, FunctionInfo)"
  ],
  "intent": "This file exists to provide sophisticated code understanding capabilities that go beyond basic parsing. It solves the problem of deeply understanding code behavior by extracting not just what functions exist, but how they work (branches), what they depend on (imports), what they change (mutations), and what they do from a behavioral perspective. This enables intelligent test generation, documentation, and code comprehension features.",
  "rawContent": "```json\n{\n  \"purpose\": \"Provides deep code analysis capabilities that extract function metadata, branch logic, dependencies, state mutations, and behavioral patterns from code files using AST parsing.\",\n  \"userVisibleActions\": [\n    \"Receives detailed analysis of code behavior including what functions do and how they interact\",\n    \"Gets information about code complexity and branching logic\",\n    \"Sees enhanced test coverage recommendations based on code structure\",\n    \"Receives behavioral hints about what code does from a user perspective\"\n  ],\n  \"developerVisibleActions\": [\n    \"Developer calls analyzeFileMetadata() to get comprehensive function metadata for a file\",\n    \"Developer receives structured data about branches, dependencies, and state mutations\",\n    \"Developer gets AST-based analysis for TypeScript/JavaScript and regex-based fallback for other languages\",\n    \"Developer accesses branch information showing conditional logic and decision points in code\",\n    \"Developer receives dependency profiling showing which modules and functions are imported/used\",\n    \"Developer gets state mutation tracking showing which variables and properties are modified\",\n    \"Developer receives behavioral hints describing what code does from an external perspective\",\n    \"Developer can extract function content between specific line ranges\",\n    \"Developer gets test mapping suggestions for better code coverage\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"analyzeFileMetadata\",\n      \"desc\": \"Analyzes a file and extracts enhanced metadata for all functions including branches, dependencies, and behavioral patterns\",\n      \"inputs\": \"filePath (string), content (string), language (string), functions (FunctionInfo[])\",\n      \"outputs\": \"Promise<Map<string, FunctionMetadata>> - Map of function names to their metadata\"\n    },\n    {\n      \"name\": \"analyzeTypeScriptFunction\",\n      \"desc\": \"Performs AST-based analysis on TypeScript/JavaScript functions to extract detailed metadata\",\n      \"inputs\": \"filePath (string), content (string), func (FunctionInfo), functionContent (string)\",\n      \"outputs\": \"Promise<FunctionMetadata> - Detailed function metadata including AST-parsed information\"\n    },\n    {\n      \"name\": \"analyzeFunctionWithRegex\",\n      \"desc\": \"Provides fallback regex-based analysis for languages that don't have AST parsing support\",\n      \"inputs\": \"filePath (string), func (FunctionInfo), functionContent (string), language (string)\",\n      \"outputs\": \"FunctionMetadata - Basic function metadata extracted via pattern matching\"\n    },\n    {\n      \"name\": \"extractFunctionContent\",\n      \"desc\": \"Extracts the source code content of a function between specified line numbers\",\n      \"inputs\": \"content (string), startLine (number), endLine (number)\",\n      \"outputs\": \"string - The extracted function source code\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"typescript\",\n    \"../analyzer (CodeAnalysis, FunctionMetadata, BranchInfo, DependencyInfo, StateMutationInfo, TestMapping, BehavioralHints, FunctionInfo)\"\n  ],\n  \"intent\": \"This file exists to provide sophisticated code understanding capabilities that go beyond basic parsing. It solves the problem of deeply understanding code behavior by extracting not just what functions exist, but how they work (branches), what they depend on (imports), what they change (mutations), and what they do from a behavioral perspective. This enables intelligent test generation, documentation, and code comprehension features.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T06:28:04.022Z"
  }
}