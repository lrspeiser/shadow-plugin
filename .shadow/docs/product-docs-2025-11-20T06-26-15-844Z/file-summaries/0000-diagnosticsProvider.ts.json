{
  "file": "src/diagnosticsProvider.ts",
  "role": "Core Logic",
  "purpose": "Manages the display of code insights and warnings in the VS Code Problems panel by creating and updating diagnostic markers.",
  "userVisibleActions": [
    "Code insights appear as warnings or errors in the Problems panel",
    "Inline squiggly lines appear under problematic code lines",
    "Clicking on a problem in the Problems panel navigates to the affected code location",
    "Problem markers are grouped by file in the Problems panel",
    "Diagnostics show 'Shadow Watch' as the source in the Problems panel"
  ],
  "developerVisibleActions": [
    "Diagnostics are automatically updated when new insights are generated",
    "All diagnostics are cleared when the diagnostics collection is reset",
    "Diagnostics can be updated for individual files or all files at once",
    "Each diagnostic is linked to an insight ID for traceability",
    "Severity levels (error, warning, info) determine the visual appearance of diagnostics"
  ],
  "keyFunctions": [
    {
      "name": "updateDiagnostics",
      "desc": "Updates all diagnostic markers across all files based on a collection of insights",
      "inputs": "insights: Insight[] - array of code insights to display",
      "outputs": "void - displays diagnostics in Problems panel"
    },
    {
      "name": "updateDiagnosticsForFile",
      "desc": "Updates diagnostic markers for a specific file only",
      "inputs": "uri: vscode.Uri - file location, insights: Insight[] - insights for that file",
      "outputs": "void - displays diagnostics for the specified file"
    },
    {
      "name": "clear",
      "desc": "Removes all diagnostic markers from the Problems panel",
      "inputs": "none",
      "outputs": "void - clears all displayed diagnostics"
    },
    {
      "name": "createDiagnostic",
      "desc": "Converts an insight into a VS Code diagnostic marker with severity, location, and description",
      "inputs": "insight: Insight - the insight to convert",
      "outputs": "vscode.Diagnostic - a VS Code diagnostic object"
    },
    {
      "name": "dispose",
      "desc": "Cleans up and removes the diagnostic collection when no longer needed",
      "inputs": "none",
      "outputs": "void - releases resources"
    }
  ],
  "dependencies": [
    "vscode",
    "./insightGenerator"
  ],
  "intent": "This file exists to bridge between the Shadow Watch insight generation system and VS Code's built-in Problems panel, making code insights visible and actionable for users by displaying them as standard IDE diagnostics that users are familiar with.",
  "rawContent": "```json\n{\n  \"purpose\": \"Manages the display of code insights and warnings in the VS Code Problems panel by creating and updating diagnostic markers.\",\n  \"userVisibleActions\": [\n    \"Code insights appear as warnings or errors in the Problems panel\",\n    \"Inline squiggly lines appear under problematic code lines\",\n    \"Clicking on a problem in the Problems panel navigates to the affected code location\",\n    \"Problem markers are grouped by file in the Problems panel\",\n    \"Diagnostics show 'Shadow Watch' as the source in the Problems panel\"\n  ],\n  \"developerVisibleActions\": [\n    \"Diagnostics are automatically updated when new insights are generated\",\n    \"All diagnostics are cleared when the diagnostics collection is reset\",\n    \"Diagnostics can be updated for individual files or all files at once\",\n    \"Each diagnostic is linked to an insight ID for traceability\",\n    \"Severity levels (error, warning, info) determine the visual appearance of diagnostics\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"updateDiagnostics\",\n      \"desc\": \"Updates all diagnostic markers across all files based on a collection of insights\",\n      \"inputs\": \"insights: Insight[] - array of code insights to display\",\n      \"outputs\": \"void - displays diagnostics in Problems panel\"\n    },\n    {\n      \"name\": \"updateDiagnosticsForFile\",\n      \"desc\": \"Updates diagnostic markers for a specific file only\",\n      \"inputs\": \"uri: vscode.Uri - file location, insights: Insight[] - insights for that file\",\n      \"outputs\": \"void - displays diagnostics for the specified file\"\n    },\n    {\n      \"name\": \"clear\",\n      \"desc\": \"Removes all diagnostic markers from the Problems panel\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void - clears all displayed diagnostics\"\n    },\n    {\n      \"name\": \"createDiagnostic\",\n      \"desc\": \"Converts an insight into a VS Code diagnostic marker with severity, location, and description\",\n      \"inputs\": \"insight: Insight - the insight to convert\",\n      \"outputs\": \"vscode.Diagnostic - a VS Code diagnostic object\"\n    },\n    {\n      \"name\": \"dispose\",\n      \"desc\": \"Cleans up and removes the diagnostic collection when no longer needed\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void - releases resources\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"./insightGenerator\"\n  ],\n  \"intent\": \"This file exists to bridge between the Shadow Watch insight generation system and VS Code's built-in Problems panel, making code insights visible and actionable for users by displaying them as standard IDE diagnostics that users are familiar with.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T06:29:41.390Z"
  }
}