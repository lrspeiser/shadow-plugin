{
  "file": "src/analysis/functionAnalyzer.ts",
  "role": "Core Logic",
  "purpose": "Analyzes functions in large code files to extract detailed information about signatures, dependencies, and responsibilities for refactoring recommendations.",
  "userVisibleActions": [
    "Receives refactoring reports that identify which functions in large files should be split or refactored",
    "Gets function-level insights showing what each function does and what it depends on",
    "Views function responsibilities and their relationships to other code"
  ],
  "developerVisibleActions": [
    "Analyzes functions in files exceeding a size threshold (default 500 lines)",
    "Extracts function signatures, parameters, and return types from TypeScript code",
    "Identifies function dependencies (what other code the function calls)",
    "Identifies function dependents (what other code calls this function)",
    "Determines function responsibilities and purpose",
    "Generates structured FunctionAnalysis objects for each function in large files",
    "Handles analysis failures gracefully with warnings when individual functions cannot be analyzed",
    "Resolves file paths and verifies file existence before analysis"
  ],
  "keyFunctions": [
    {
      "name": "analyzeFunctions",
      "desc": "Analyzes all functions in files larger than the threshold size",
      "inputs": "codeAnalysis (CodeAnalysis object), largeFileThreshold (optional, default 500 lines)",
      "outputs": "Promise<FunctionAnalysis[]> - array of detailed function analyses"
    },
    {
      "name": "analyzeFunction",
      "desc": "Performs detailed analysis on a single function",
      "inputs": "filePath (string), func (FunctionInfo), codeAnalysis (CodeAnalysis)",
      "outputs": "Promise<FunctionAnalysis | null> - detailed function analysis or null if failed"
    },
    {
      "name": "resolveFilePath",
      "desc": "Resolves and validates the full path to a source file",
      "inputs": "filePath (string), codeAnalysis (CodeAnalysis)",
      "outputs": "string or null - full resolved file path"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "typescript",
    "../analyzer",
    "../domain/prompts/refactoringPromptBuilder"
  ],
  "intent": "This file exists to provide deep function-level analysis for refactoring recommendations. When developers work with large files, they need to understand which functions can be safely extracted or refactored. This analyzer inspects each function's signature, what it calls, what calls it, and what it does, enabling intelligent refactoring suggestions that maintain code correctness while improving maintainability.",
  "rawContent": "```json\n{\n  \"purpose\": \"Analyzes functions in large code files to extract detailed information about signatures, dependencies, and responsibilities for refactoring recommendations.\",\n  \"userVisibleActions\": [\n    \"Receives refactoring reports that identify which functions in large files should be split or refactored\",\n    \"Gets function-level insights showing what each function does and what it depends on\",\n    \"Views function responsibilities and their relationships to other code\"\n  ],\n  \"developerVisibleActions\": [\n    \"Analyzes functions in files exceeding a size threshold (default 500 lines)\",\n    \"Extracts function signatures, parameters, and return types from TypeScript code\",\n    \"Identifies function dependencies (what other code the function calls)\",\n    \"Identifies function dependents (what other code calls this function)\",\n    \"Determines function responsibilities and purpose\",\n    \"Generates structured FunctionAnalysis objects for each function in large files\",\n    \"Handles analysis failures gracefully with warnings when individual functions cannot be analyzed\",\n    \"Resolves file paths and verifies file existence before analysis\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"analyzeFunctions\",\n      \"desc\": \"Analyzes all functions in files larger than the threshold size\",\n      \"inputs\": \"codeAnalysis (CodeAnalysis object), largeFileThreshold (optional, default 500 lines)\",\n      \"outputs\": \"Promise<FunctionAnalysis[]> - array of detailed function analyses\"\n    },\n    {\n      \"name\": \"analyzeFunction\",\n      \"desc\": \"Performs detailed analysis on a single function\",\n      \"inputs\": \"filePath (string), func (FunctionInfo), codeAnalysis (CodeAnalysis)\",\n      \"outputs\": \"Promise<FunctionAnalysis | null> - detailed function analysis or null if failed\"\n    },\n    {\n      \"name\": \"resolveFilePath\",\n      \"desc\": \"Resolves and validates the full path to a source file\",\n      \"inputs\": \"filePath (string), codeAnalysis (CodeAnalysis)\",\n      \"outputs\": \"string or null - full resolved file path\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"typescript\",\n    \"../analyzer\",\n    \"../domain/prompts/refactoringPromptBuilder\"\n  ],\n  \"intent\": \"This file exists to provide deep function-level analysis for refactoring recommendations. When developers work with large files, they need to understand which functions can be safely extracted or refactored. This analyzer inspects each function's signature, what it calls, what calls it, and what it does, enabling intelligent refactoring suggestions that maintain code correctness while improving maintainability.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T06:28:16.902Z"
  }
}