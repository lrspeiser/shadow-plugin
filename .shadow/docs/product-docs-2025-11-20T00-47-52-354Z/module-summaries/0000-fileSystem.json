{
  "module": "src/infrastructure/fileSystem",
  "moduleType": "other",
  "capabilities": [
    "Efficiently processes multiple files in parallel across the codebase",
    "Automatically caches file contents to reduce redundant file system reads",
    "Intelligently filters out common non-source directories (node_modules, .git, dist, build, etc.)",
    "Detects file changes automatically and invalidates cached content",
    "Manages memory through automatic cache cleanup",
    "Handles processing errors gracefully without stopping the entire operation"
  ],
  "summary": "The fileSystem module provides high-performance file processing infrastructure that handles reading, filtering, and caching operations across the codebase. It serves as the foundation for any feature that needs to analyze or process multiple files efficiently.\n\nWhen you work with files, this module automatically skips irrelevant directories like node_modules, .git, dist, build, .shadow, coverage, .vscode, and .idea to focus only on source files. It processes files in parallel for maximum speed while caching frequently accessed files to avoid redundant reads. The cache automatically detects when files change and refreshes its content, ensuring you always work with up-to-date data.\n\nThis module is used internally by other features that need to scan, analyze, or process files across your project. It ensures these operations complete quickly even in large codebases, while keeping memory usage under control through intelligent cache management and cleanup.",
  "files": [
    {
      "file": "src/infrastructure/fileSystem/fileCache.ts",
      "role": "Core Logic",
      "purpose": "Optimizes file system operations by caching file contents to reduce redundant reads across multiple components.",
      "userVisibleActions": [
        "Files load faster when accessed multiple times within a short period",
        "Changes to files are automatically detected and reflected immediately",
        "Memory usage is kept under control through automatic cache cleanup"
      ],
      "developerVisibleActions": [
        "Retrieve file content through cache with automatic fallback to disk reads",
        "Cache automatically invalidates when files change on disk",
        "Access cache statistics to monitor performance (hits, misses, evictions)",
        "Configure cache size limits and time-to-live (TTL) settings",
        "Cache entries are automatically evicted using LRU policy when size limit is reached",
        "File changes are detected via file system watcher for automatic invalidation"
      ],
      "keyFunctions": [
        {
          "name": "getFile",
          "desc": "Retrieves file content from cache or reads from disk if not cached or stale",
          "inputs": "filePath: string",
          "outputs": "Promise<string> - file content"
        },
        {
          "name": "isStale",
          "desc": "Determines if a cached file has exceeded its time-to-live threshold",
          "inputs": "cached: CachedFile",
          "outputs": "boolean - true if expired"
        },
        {
          "name": "getFileHash",
          "desc": "Computes hash of file to detect content changes",
          "inputs": "filePath: string",
          "outputs": "Promise<string> - file hash"
        },
        {
          "name": "evictIfNeeded",
          "desc": "Removes least recently used cache entries when size limit is exceeded",
          "inputs": "none",
          "outputs": "void"
        },
        {
          "name": "setupWatcher",
          "desc": "Configures file system watcher to automatically invalidate cache on file changes",
          "inputs": "none",
          "outputs": "void"
        },
        {
          "name": "invalidate",
          "desc": "Removes specific file from cache when it changes",
          "inputs": "filePath: string",
          "outputs": "void"
        },
        {
          "name": "clear",
          "desc": "Removes all entries from cache",
          "inputs": "none",
          "outputs": "void"
        },
        {
          "name": "getStats",
          "desc": "Returns cache performance metrics",
          "inputs": "none",
          "outputs": "CacheStats - hits, misses, evictions, size"
        }
      ],
      "dependencies": [
        "vscode",
        "fs",
        "path"
      ],
      "intent": "This file exists to improve extension performance by preventing redundant file system reads. It solves the problem of multiple components requesting the same file content repeatedly, which would slow down operations. The cache intelligently manages memory by evicting old entries and automatically detects file changes to ensure data stays fresh.",
      "rawContent": "```json\n{\n  \"purpose\": \"Optimizes file system operations by caching file contents to reduce redundant reads across multiple components.\",\n  \"userVisibleActions\": [\n    \"Files load faster when accessed multiple times within a short period\",\n    \"Changes to files are automatically detected and reflected immediately\",\n    \"Memory usage is kept under control through automatic cache cleanup\"\n  ],\n  \"developerVisibleActions\": [\n    \"Retrieve file content through cache with automatic fallback to disk reads\",\n    \"Cache automatically invalidates when files change on disk\",\n    \"Access cache statistics to monitor performance (hits, misses, evictions)\",\n    \"Configure cache size limits and time-to-live (TTL) settings\",\n    \"Cache entries are automatically evicted using LRU policy when size limit is reached\",\n    \"File changes are detected via file system watcher for automatic invalidation\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"getFile\",\n      \"desc\": \"Retrieves file content from cache or reads from disk if not cached or stale\",\n      \"inputs\": \"filePath: string\",\n      \"outputs\": \"Promise<string> - file content\"\n    },\n    {\n      \"name\": \"isStale\",\n      \"desc\": \"Determines if a cached file has exceeded its time-to-live threshold\",\n      \"inputs\": \"cached: CachedFile\",\n      \"outputs\": \"boolean - true if expired\"\n    },\n    {\n      \"name\": \"getFileHash\",\n      \"desc\": \"Computes hash of file to detect content changes\",\n      \"inputs\": \"filePath: string\",\n      \"outputs\": \"Promise<string> - file hash\"\n    },\n    {\n      \"name\": \"evictIfNeeded\",\n      \"desc\": \"Removes least recently used cache entries when size limit is exceeded\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"setupWatcher\",\n      \"desc\": \"Configures file system watcher to automatically invalidate cache on file changes\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"invalidate\",\n      \"desc\": \"Removes specific file from cache when it changes\",\n      \"inputs\": \"filePath: string\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"clear\",\n      \"desc\": \"Removes all entries from cache\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"getStats\",\n      \"desc\": \"Returns cache performance metrics\",\n      \"inputs\": \"none\",\n      \"outputs\": \"CacheStats - hits, misses, evictions, size\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"fs\",\n    \"path\"\n  ],\n  \"intent\": \"This file exists to improve extension performance by preventing redundant file system reads. It solves the problem of multiple components requesting the same file content repeatedly, which would slow down operations. The cache intelligently manages memory by evicting old entries and automatically detects file changes to ensure data stays fresh.\"\n}\n```"
    },
    {
      "file": "src/infrastructure/fileSystem/fileProcessor.ts",
      "role": "Core Logic",
      "purpose": "Provides a unified, reusable system for filtering, reading, and processing multiple files in parallel across the codebase",
      "userVisibleActions": [
        "Files in common directories like node_modules, .git, dist, build, .shadow, coverage, .vscode, and .idea are automatically skipped during processing",
        "Files are processed in parallel for faster completion",
        "Error handling ensures processing continues even if individual files fail"
      ],
      "developerVisibleActions": [
        "Developer creates a FileProcessor instance to handle bulk file operations",
        "Developer provides a list of file paths and a processing function",
        "Developer receives processed results for all files that passed filtering",
        "Developer can customize which files to process by providing a custom IFileFilter implementation",
        "Developer can customize how files are read by providing a custom IFileReader implementation",
        "Developer provides error context for better error tracking and debugging",
        "Developer uses DefaultFileFilter to automatically exclude common non-source directories",
        "Developer uses DefaultFileReader for standard UTF-8 file reading"
      ],
      "keyFunctions": [
        {
          "name": "shouldProcess",
          "desc": "Determines if a file should be processed based on its path",
          "inputs": "filePath: string",
          "outputs": "boolean indicating if file should be processed"
        },
        {
          "name": "readFile",
          "desc": "Reads a file's content as UTF-8 text",
          "inputs": "filePath: string",
          "outputs": "Promise<string> containing file content"
        },
        {
          "name": "processFiles",
          "desc": "Filters, reads, and processes multiple files in parallel using a provided processing function",
          "inputs": "files: string[], processor: function, optional context: ErrorContext",
          "outputs": "Promise<T[]> containing array of processed results"
        }
      ],
      "dependencies": [
        "fs",
        "path",
        "../../utils/errorHandler"
      ],
      "intent": "This file exists to eliminate duplicate file processing patterns throughout the codebase by providing a single, reusable implementation that handles filtering unwanted files, reading file contents, and processing multiple files in parallel with proper error handling",
      "rawContent": "```json\n{\n  \"purpose\": \"Provides a unified, reusable system for filtering, reading, and processing multiple files in parallel across the codebase\",\n  \"userVisibleActions\": [\n    \"Files in common directories like node_modules, .git, dist, build, .shadow, coverage, .vscode, and .idea are automatically skipped during processing\",\n    \"Files are processed in parallel for faster completion\",\n    \"Error handling ensures processing continues even if individual files fail\"\n  ],\n  \"developerVisibleActions\": [\n    \"Developer creates a FileProcessor instance to handle bulk file operations\",\n    \"Developer provides a list of file paths and a processing function\",\n    \"Developer receives processed results for all files that passed filtering\",\n    \"Developer can customize which files to process by providing a custom IFileFilter implementation\",\n    \"Developer can customize how files are read by providing a custom IFileReader implementation\",\n    \"Developer provides error context for better error tracking and debugging\",\n    \"Developer uses DefaultFileFilter to automatically exclude common non-source directories\",\n    \"Developer uses DefaultFileReader for standard UTF-8 file reading\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"shouldProcess\",\n      \"desc\": \"Determines if a file should be processed based on its path\",\n      \"inputs\": \"filePath: string\",\n      \"outputs\": \"boolean indicating if file should be processed\"\n    },\n    {\n      \"name\": \"readFile\",\n      \"desc\": \"Reads a file's content as UTF-8 text\",\n      \"inputs\": \"filePath: string\",\n      \"outputs\": \"Promise<string> containing file content\"\n    },\n    {\n      \"name\": \"processFiles\",\n      \"desc\": \"Filters, reads, and processes multiple files in parallel using a provided processing function\",\n      \"inputs\": \"files: string[], processor: function, optional context: ErrorContext\",\n      \"outputs\": \"Promise<T[]> containing array of processed results\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"../../utils/errorHandler\"\n  ],\n  \"intent\": \"This file exists to eliminate duplicate file processing patterns throughout the codebase by providing a single, reusable implementation that handles filtering unwanted files, reading file contents, and processing multiple files in parallel with proper error handling\"\n}\n```"
    }
  ],
  "endpoints": [],
  "commands": [],
  "workers": [],
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T01:01:33.694Z"
  }
}