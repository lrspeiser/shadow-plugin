{
  "file": "src/domain/services/testing/llmTestPlanningService.ts",
  "role": "Core Logic",
  "purpose": "Analyzes code functions and creates a prioritized test plan using LLM guidance based on complexity, dependencies, and product context.",
  "userVisibleActions": [
    "Receives analysis of which functions in their codebase are testable and which are not",
    "Gets a prioritized test plan showing which functions should be tested first based on complexity and risk",
    "Views function groups organized by testing priority",
    "Sees statistics about total functions vs testable functions in their codebase"
  ],
  "developerVisibleActions": [
    "Calls analyzeFunctions() to extract function metadata from code analysis results",
    "Calls createTestPlan() to generate an LLM-based test strategy with prioritized function groups",
    "Calls saveTestPlan() to persist the generated test plan to disk for later use",
    "Reviews log messages showing test planning progress and statistics",
    "Uses the resulting TestPlan object containing function groups, testability status, and testing priorities"
  ],
  "keyFunctions": [
    {
      "name": "analyzeFunctions",
      "desc": "Extracts and normalizes function metadata from code analysis results",
      "inputs": "codeAnalysis object containing function information",
      "outputs": "Array of function objects with name, file, lines, complexity, parameters, and return type"
    },
    {
      "name": "createTestPlan",
      "desc": "Generates a prioritized test plan by sending function data to LLM with product and architecture context",
      "inputs": "AnalysisContext, functions array, llmService, optional productDocs and architectureInsights",
      "outputs": "TestPlan object with function groups, testability counts, and testing priorities"
    },
    {
      "name": "saveTestPlan",
      "desc": "Persists the generated test plan to a JSON file on disk",
      "inputs": "TestPlan object and file path where to save",
      "outputs": "File written to disk (void return)"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "testPlanTypes",
    "testPrompts",
    "AnalysisContext",
    "SWLogger"
  ],
  "intent": "This service exists to bridge code analysis results with test generation by intelligently prioritizing which functions should be tested first. It solves the problem of determining testing priorities in large codebases by using LLM reasoning to consider complexity, dependencies, and business context rather than testing everything indiscriminately.",
  "rawContent": "```json\n{\n  \"purpose\": \"Analyzes code functions and creates a prioritized test plan using LLM guidance based on complexity, dependencies, and product context.\",\n  \"userVisibleActions\": [\n    \"Receives analysis of which functions in their codebase are testable and which are not\",\n    \"Gets a prioritized test plan showing which functions should be tested first based on complexity and risk\",\n    \"Views function groups organized by testing priority\",\n    \"Sees statistics about total functions vs testable functions in their codebase\"\n  ],\n  \"developerVisibleActions\": [\n    \"Calls analyzeFunctions() to extract function metadata from code analysis results\",\n    \"Calls createTestPlan() to generate an LLM-based test strategy with prioritized function groups\",\n    \"Calls saveTestPlan() to persist the generated test plan to disk for later use\",\n    \"Reviews log messages showing test planning progress and statistics\",\n    \"Uses the resulting TestPlan object containing function groups, testability status, and testing priorities\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"analyzeFunctions\",\n      \"desc\": \"Extracts and normalizes function metadata from code analysis results\",\n      \"inputs\": \"codeAnalysis object containing function information\",\n      \"outputs\": \"Array of function objects with name, file, lines, complexity, parameters, and return type\"\n    },\n    {\n      \"name\": \"createTestPlan\",\n      \"desc\": \"Generates a prioritized test plan by sending function data to LLM with product and architecture context\",\n      \"inputs\": \"AnalysisContext, functions array, llmService, optional productDocs and architectureInsights\",\n      \"outputs\": \"TestPlan object with function groups, testability counts, and testing priorities\"\n    },\n    {\n      \"name\": \"saveTestPlan\",\n      \"desc\": \"Persists the generated test plan to a JSON file on disk\",\n      \"inputs\": \"TestPlan object and file path where to save\",\n      \"outputs\": \"File written to disk (void return)\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"testPlanTypes\",\n    \"testPrompts\",\n    \"AnalysisContext\",\n    \"SWLogger\"\n  ],\n  \"intent\": \"This service exists to bridge code analysis results with test generation by intelligently prioritizing which functions should be tested first. It solves the problem of determining testing priorities in large codebases by using LLM reasoning to consider complexity, dependencies, and business context rather than testing everything indiscriminately.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T00:53:58.034Z"
  }
}