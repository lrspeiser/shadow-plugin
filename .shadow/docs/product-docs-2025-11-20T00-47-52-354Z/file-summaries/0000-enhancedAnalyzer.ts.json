{
  "file": "src/analysis/enhancedAnalyzer.ts",
  "role": "Core Logic",
  "purpose": "Performs deep code analysis by parsing Abstract Syntax Trees (AST) to extract detailed function metadata, control flow branches, dependencies, and behavioral patterns from source code files.",
  "userVisibleActions": [
    "Receives detailed analysis of code functions including their complexity, dependencies, and behavior patterns",
    "Gets insights into how functions modify state and interact with external dependencies",
    "Views control flow analysis showing different execution paths and branches in code",
    "Sees behavioral hints about what functions do (e.g., validation, transformation, API calls)"
  ],
  "developerVisibleActions": [
    "Calls analyzeFileMetadata() to analyze an entire file and get metadata for all functions",
    "Receives structured FunctionMetadata objects containing branches, dependencies, state mutations, and behavioral hints",
    "Gets TypeScript/JavaScript AST-based analysis for deeper insights compared to regex-based analysis",
    "Accesses branch information showing conditional logic paths and complexity metrics",
    "Retrieves dependency information showing external module usage and side effects",
    "Obtains state mutation tracking showing what variables and properties are modified",
    "Receives behavioral hints categorizing function purposes (validators, transformers, API handlers, etc.)"
  ],
  "keyFunctions": [
    {
      "name": "analyzeFileMetadata",
      "desc": "Analyzes all functions in a file and returns detailed metadata for each",
      "inputs": "filePath (string), content (string), language (string), functions (FunctionInfo[])",
      "outputs": "Map<string, FunctionMetadata> containing analysis results for each function"
    },
    {
      "name": "analyzeTypeScriptFunction",
      "desc": "Performs AST-based analysis on TypeScript/JavaScript functions for detailed insights",
      "inputs": "filePath (string), content (string), func (FunctionInfo), functionContent (string)",
      "outputs": "FunctionMetadata with branches, dependencies, mutations, and behavioral hints"
    },
    {
      "name": "analyzeFunctionWithRegex",
      "desc": "Fallback analysis method using pattern matching for non-TypeScript languages",
      "inputs": "filePath (string), func (FunctionInfo), functionContent (string), language (string)",
      "outputs": "FunctionMetadata with basic analysis from regex patterns"
    },
    {
      "name": "extractFunctionContent",
      "desc": "Extracts the source code content for a specific function by line numbers",
      "inputs": "content (string), startLine (number), endLine (number)",
      "outputs": "String containing the function's source code"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "typescript",
    "../analyzer (CodeAnalysis, FunctionMetadata, BranchInfo, DependencyInfo, StateMutationInfo, TestMapping, BehavioralHints, FunctionInfo)"
  ],
  "intent": "This file exists to provide advanced code intelligence beyond basic parsing. It solves the problem of understanding code behavior at a semantic level by analyzing control flow, tracking state changes, identifying dependencies, and categorizing function purposes. This enables smarter test generation, documentation creation, and code understanding tools.",
  "rawContent": "```json\n{\n  \"purpose\": \"Performs deep code analysis by parsing Abstract Syntax Trees (AST) to extract detailed function metadata, control flow branches, dependencies, and behavioral patterns from source code files.\",\n  \"userVisibleActions\": [\n    \"Receives detailed analysis of code functions including their complexity, dependencies, and behavior patterns\",\n    \"Gets insights into how functions modify state and interact with external dependencies\",\n    \"Views control flow analysis showing different execution paths and branches in code\",\n    \"Sees behavioral hints about what functions do (e.g., validation, transformation, API calls)\"\n  ],\n  \"developerVisibleActions\": [\n    \"Calls analyzeFileMetadata() to analyze an entire file and get metadata for all functions\",\n    \"Receives structured FunctionMetadata objects containing branches, dependencies, state mutations, and behavioral hints\",\n    \"Gets TypeScript/JavaScript AST-based analysis for deeper insights compared to regex-based analysis\",\n    \"Accesses branch information showing conditional logic paths and complexity metrics\",\n    \"Retrieves dependency information showing external module usage and side effects\",\n    \"Obtains state mutation tracking showing what variables and properties are modified\",\n    \"Receives behavioral hints categorizing function purposes (validators, transformers, API handlers, etc.)\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"analyzeFileMetadata\",\n      \"desc\": \"Analyzes all functions in a file and returns detailed metadata for each\",\n      \"inputs\": \"filePath (string), content (string), language (string), functions (FunctionInfo[])\",\n      \"outputs\": \"Map<string, FunctionMetadata> containing analysis results for each function\"\n    },\n    {\n      \"name\": \"analyzeTypeScriptFunction\",\n      \"desc\": \"Performs AST-based analysis on TypeScript/JavaScript functions for detailed insights\",\n      \"inputs\": \"filePath (string), content (string), func (FunctionInfo), functionContent (string)\",\n      \"outputs\": \"FunctionMetadata with branches, dependencies, mutations, and behavioral hints\"\n    },\n    {\n      \"name\": \"analyzeFunctionWithRegex\",\n      \"desc\": \"Fallback analysis method using pattern matching for non-TypeScript languages\",\n      \"inputs\": \"filePath (string), func (FunctionInfo), functionContent (string), language (string)\",\n      \"outputs\": \"FunctionMetadata with basic analysis from regex patterns\"\n    },\n    {\n      \"name\": \"extractFunctionContent\",\n      \"desc\": \"Extracts the source code content for a specific function by line numbers\",\n      \"inputs\": \"content (string), startLine (number), endLine (number)\",\n      \"outputs\": \"String containing the function's source code\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"typescript\",\n    \"../analyzer (CodeAnalysis, FunctionMetadata, BranchInfo, DependencyInfo, StateMutationInfo, TestMapping, BehavioralHints, FunctionInfo)\"\n  ],\n  \"intent\": \"This file exists to provide advanced code intelligence beyond basic parsing. It solves the problem of understanding code behavior at a semantic level by analyzing control flow, tracking state changes, identifying dependencies, and categorizing function purposes. This enables smarter test generation, documentation creation, and code understanding tools.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T00:49:34.720Z"
  }
}