{
  "file": "src/fileWatcher.ts",
  "role": "Core Logic",
  "purpose": "Monitors file changes in the workspace and triggers automatic code analysis when files are saved",
  "userVisibleActions": [
    "Automatically analyzes code when files are saved in the editor",
    "Shows analysis progress indicator during file analysis",
    "Updates diagnostics and insights view after file changes",
    "Respects user's 'analyze on save' configuration setting"
  ],
  "developerVisibleActions": [
    "Starts/stops file watching based on configuration settings",
    "Debounces analysis requests to prevent multiple simultaneous analyses",
    "Handles document save events and triggers analysis pipeline",
    "Manages analysis state to prevent concurrent analyses",
    "Cleans up resources when stopping the watcher"
  ],
  "keyFunctions": [
    {
      "name": "start",
      "desc": "Begins watching for file save events if analyze-on-save is enabled",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "stop",
      "desc": "Stops watching for file changes and cleans up resources",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "onFileSaved",
      "desc": "Handles file save events and triggers debounced analysis",
      "inputs": "document (TextDocument)",
      "outputs": "Promise<void>"
    },
    {
      "name": "shouldAnalyzeFile",
      "desc": "Determines if a file should be analyzed based on file type and configuration",
      "inputs": "document (TextDocument)",
      "outputs": "boolean"
    },
    {
      "name": "triggerAnalysis",
      "desc": "Executes the full analysis pipeline for a document",
      "inputs": "document (TextDocument)",
      "outputs": "Promise<void>"
    },
    {
      "name": "dispose",
      "desc": "Cleans up all resources and event listeners",
      "inputs": "none",
      "outputs": "void"
    }
  ],
  "dependencies": [
    "vscode",
    "path",
    "CodeAnalyzer",
    "InsightGenerator",
    "DiagnosticsProvider",
    "InsightsTreeProvider",
    "ConfigurationManager",
    "ErrorHandler",
    "FileWatcherService"
  ],
  "intent": "This file exists to provide automatic, real-time code analysis by monitoring when users save files. It solves the problem of having to manually trigger analysis by automatically detecting file changes and running the analysis pipeline, while preventing duplicate analyses through debouncing and state management.",
  "rawContent": "```json\n{\n  \"purpose\": \"Monitors file changes in the workspace and triggers automatic code analysis when files are saved\",\n  \"userVisibleActions\": [\n    \"Automatically analyzes code when files are saved in the editor\",\n    \"Shows analysis progress indicator during file analysis\",\n    \"Updates diagnostics and insights view after file changes\",\n    \"Respects user's 'analyze on save' configuration setting\"\n  ],\n  \"developerVisibleActions\": [\n    \"Starts/stops file watching based on configuration settings\",\n    \"Debounces analysis requests to prevent multiple simultaneous analyses\",\n    \"Handles document save events and triggers analysis pipeline\",\n    \"Manages analysis state to prevent concurrent analyses\",\n    \"Cleans up resources when stopping the watcher\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"start\",\n      \"desc\": \"Begins watching for file save events if analyze-on-save is enabled\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"stop\",\n      \"desc\": \"Stops watching for file changes and cleans up resources\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"onFileSaved\",\n      \"desc\": \"Handles file save events and triggers debounced analysis\",\n      \"inputs\": \"document (TextDocument)\",\n      \"outputs\": \"Promise<void>\"\n    },\n    {\n      \"name\": \"shouldAnalyzeFile\",\n      \"desc\": \"Determines if a file should be analyzed based on file type and configuration\",\n      \"inputs\": \"document (TextDocument)\",\n      \"outputs\": \"boolean\"\n    },\n    {\n      \"name\": \"triggerAnalysis\",\n      \"desc\": \"Executes the full analysis pipeline for a document\",\n      \"inputs\": \"document (TextDocument)\",\n      \"outputs\": \"Promise<void>\"\n    },\n    {\n      \"name\": \"dispose\",\n      \"desc\": \"Cleans up all resources and event listeners\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"path\",\n    \"CodeAnalyzer\",\n    \"InsightGenerator\",\n    \"DiagnosticsProvider\",\n    \"InsightsTreeProvider\",\n    \"ConfigurationManager\",\n    \"ErrorHandler\",\n    \"FileWatcherService\"\n  ],\n  \"intent\": \"This file exists to provide automatic, real-time code analysis by monitoring when users save files. It solves the problem of having to manually trigger analysis by automatically detecting file changes and running the analysis pipeline, while preventing duplicate analyses through debouncing and state management.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T00:55:57.680Z"
  }
}