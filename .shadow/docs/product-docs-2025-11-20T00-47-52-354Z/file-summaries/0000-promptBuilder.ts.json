{
  "file": "src/domain/prompts/promptBuilder.ts",
  "role": "Core Logic",
  "purpose": "Centralized prompt construction service that builds specialized prompts for different types of LLM-based code analysis tasks",
  "userVisibleActions": [
    "Generates architecture analysis of the codebase",
    "Produces product documentation summaries",
    "Analyzes product purpose and value proposition",
    "Creates detailed file-level code analysis",
    "Generates module-level summaries from multiple files",
    "Produces comprehensive product-level documentation",
    "Creates test plans for source code files",
    "Generates actual test code from test plans"
  ],
  "developerVisibleActions": [
    "Developer calls buildArchitecturePrompt to get an LLM prompt for analyzing system architecture",
    "Developer calls buildProductDocsPrompt to generate prompts for extracting product documentation",
    "Developer calls buildProductPurposePrompt to create prompts for analyzing product purpose",
    "Developer calls buildFileAnalysisPrompt to generate prompts for analyzing individual files",
    "Developer calls buildModuleRollupPrompt to create prompts that summarize multiple files into module documentation",
    "Developer calls buildProductLevelPrompt to generate prompts for overall product analysis",
    "Developer calls buildPerFileTestPlanPrompt to create test planning prompts for specific files",
    "Developer calls buildTestCodeGenerationPrompt to generate actual test code from test plans",
    "Prompts are constructed with specific context, code analysis data, and documentation",
    "Each prompt builder method accepts relevant context and returns a formatted string ready for LLM consumption"
  ],
  "keyFunctions": [
    {
      "name": "buildArchitecturePrompt",
      "desc": "Constructs a prompt for analyzing codebase architecture",
      "inputs": "context (AnalysisContext), optional codeAnalysis, productDocs, productPurposeAnalysis, fileAccessHelper",
      "outputs": "Formatted prompt string for LLM"
    },
    {
      "name": "buildProductDocsPrompt",
      "desc": "Constructs a prompt for extracting product documentation",
      "inputs": "context (AnalysisContext)",
      "outputs": "Formatted prompt string for LLM"
    },
    {
      "name": "buildProductPurposePrompt",
      "desc": "Constructs a prompt for analyzing product purpose and value",
      "inputs": "productDocs (EnhancedProductDocumentation), context (AnalysisContext)",
      "outputs": "Formatted prompt string for LLM"
    },
    {
      "name": "buildFileAnalysisPrompt",
      "desc": "Constructs a prompt for analyzing a single source file",
      "inputs": "file (FileInfo), content (string), role (string)",
      "outputs": "Formatted prompt string for LLM"
    },
    {
      "name": "buildModuleRollupPrompt",
      "desc": "Constructs a prompt for summarizing multiple files into a module",
      "inputs": "modulePath (string), moduleType (string), files (FileSummary[])",
      "outputs": "Formatted prompt string for LLM"
    },
    {
      "name": "buildProductLevelPrompt",
      "desc": "Constructs a prompt for overall product-level analysis",
      "inputs": "fileSummaries (FileSummary[]), moduleSummaries (ModuleSummary[]), analysis (CodeAnalysis), fileAccessHelper (FileAccessHelper)",
      "outputs": "Formatted prompt string for LLM"
    },
    {
      "name": "buildPerFileTestPlanPrompt",
      "desc": "Constructs a prompt for creating test plans for a specific file",
      "inputs": "filePath, fileContent, functionMetadata, existingTests, language, testFramework, optional projectSummary",
      "outputs": "Formatted prompt string for LLM"
    },
    {
      "name": "buildTestCodeGenerationPrompt",
      "desc": "Constructs a prompt for generating actual test code from a test plan",
      "inputs": "testPlanItem, sourceCode, functionCode, language, testFramework",
      "outputs": "Formatted prompt string for LLM"
    }
  ],
  "dependencies": [
    "../../llmService",
    "../../analyzer",
    "../../fileDocumentation",
    "../../fileAccessHelper"
  ],
  "intent": "Eliminates prompt construction duplication across the codebase by centralizing all LLM prompt building logic in one place, ensuring consistent prompt formatting and structure for various analysis tasks including architecture analysis, documentation generation, and test creation",
  "rawContent": "```json\n{\n  \"purpose\": \"Centralized prompt construction service that builds specialized prompts for different types of LLM-based code analysis tasks\",\n  \"userVisibleActions\": [\n    \"Generates architecture analysis of the codebase\",\n    \"Produces product documentation summaries\",\n    \"Analyzes product purpose and value proposition\",\n    \"Creates detailed file-level code analysis\",\n    \"Generates module-level summaries from multiple files\",\n    \"Produces comprehensive product-level documentation\",\n    \"Creates test plans for source code files\",\n    \"Generates actual test code from test plans\"\n  ],\n  \"developerVisibleActions\": [\n    \"Developer calls buildArchitecturePrompt to get an LLM prompt for analyzing system architecture\",\n    \"Developer calls buildProductDocsPrompt to generate prompts for extracting product documentation\",\n    \"Developer calls buildProductPurposePrompt to create prompts for analyzing product purpose\",\n    \"Developer calls buildFileAnalysisPrompt to generate prompts for analyzing individual files\",\n    \"Developer calls buildModuleRollupPrompt to create prompts that summarize multiple files into module documentation\",\n    \"Developer calls buildProductLevelPrompt to generate prompts for overall product analysis\",\n    \"Developer calls buildPerFileTestPlanPrompt to create test planning prompts for specific files\",\n    \"Developer calls buildTestCodeGenerationPrompt to generate actual test code from test plans\",\n    \"Prompts are constructed with specific context, code analysis data, and documentation\",\n    \"Each prompt builder method accepts relevant context and returns a formatted string ready for LLM consumption\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"buildArchitecturePrompt\",\n      \"desc\": \"Constructs a prompt for analyzing codebase architecture\",\n      \"inputs\": \"context (AnalysisContext), optional codeAnalysis, productDocs, productPurposeAnalysis, fileAccessHelper\",\n      \"outputs\": \"Formatted prompt string for LLM\"\n    },\n    {\n      \"name\": \"buildProductDocsPrompt\",\n      \"desc\": \"Constructs a prompt for extracting product documentation\",\n      \"inputs\": \"context (AnalysisContext)\",\n      \"outputs\": \"Formatted prompt string for LLM\"\n    },\n    {\n      \"name\": \"buildProductPurposePrompt\",\n      \"desc\": \"Constructs a prompt for analyzing product purpose and value\",\n      \"inputs\": \"productDocs (EnhancedProductDocumentation), context (AnalysisContext)\",\n      \"outputs\": \"Formatted prompt string for LLM\"\n    },\n    {\n      \"name\": \"buildFileAnalysisPrompt\",\n      \"desc\": \"Constructs a prompt for analyzing a single source file\",\n      \"inputs\": \"file (FileInfo), content (string), role (string)\",\n      \"outputs\": \"Formatted prompt string for LLM\"\n    },\n    {\n      \"name\": \"buildModuleRollupPrompt\",\n      \"desc\": \"Constructs a prompt for summarizing multiple files into a module\",\n      \"inputs\": \"modulePath (string), moduleType (string), files (FileSummary[])\",\n      \"outputs\": \"Formatted prompt string for LLM\"\n    },\n    {\n      \"name\": \"buildProductLevelPrompt\",\n      \"desc\": \"Constructs a prompt for overall product-level analysis\",\n      \"inputs\": \"fileSummaries (FileSummary[]), moduleSummaries (ModuleSummary[]), analysis (CodeAnalysis), fileAccessHelper (FileAccessHelper)\",\n      \"outputs\": \"Formatted prompt string for LLM\"\n    },\n    {\n      \"name\": \"buildPerFileTestPlanPrompt\",\n      \"desc\": \"Constructs a prompt for creating test plans for a specific file\",\n      \"inputs\": \"filePath, fileContent, functionMetadata, existingTests, language, testFramework, optional projectSummary\",\n      \"outputs\": \"Formatted prompt string for LLM\"\n    },\n    {\n      \"name\": \"buildTestCodeGenerationPrompt\",\n      \"desc\": \"Constructs a prompt for generating actual test code from a test plan\",\n      \"inputs\": \"testPlanItem, sourceCode, functionCode, language, testFramework\",\n      \"outputs\": \"Formatted prompt string for LLM\"\n    }\n  ],\n  \"dependencies\": [\n    \"../../llmService\",\n    \"../../analyzer\",\n    \"../../fileDocumentation\",\n    \"../../fileAccessHelper\"\n  ],\n  \"intent\": \"Eliminates prompt construction duplication across the codebase by centralizing all LLM prompt building logic in one place, ensuring consistent prompt formatting and structure for various analysis tasks including architecture analysis, documentation generation, and test creation\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T00:52:33.204Z"
  }
}