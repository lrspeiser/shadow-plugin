{
  "file": "src/llmService.ts",
  "role": "Core Logic",
  "purpose": "Provides LLM-powered AI analysis services to generate intelligent insights, documentation, and code analysis by interfacing with OpenAI/Claude APIs.",
  "userVisibleActions": [
    "Generate intelligent insights about codebase purpose and architecture",
    "Create comprehensive product documentation from code analysis",
    "Analyze code quality and provide improvement suggestions",
    "Generate unit test plans for functions",
    "Get AI-powered refactoring suggestions for complex functions",
    "Receive explanations of what the product does and why it was built",
    "View AI-generated module summaries and relationships",
    "See incremental analysis results as codebase changes",
    "Get file-level and function-level documentation generated by AI"
  ],
  "developerVisibleActions": [
    "Call LLM service to analyze codebase structure and purpose",
    "Request AI-generated documentation for entire product",
    "Trigger AI analysis of code quality and architecture",
    "Generate test plans using AI understanding of functions",
    "Request refactoring suggestions for complex code",
    "Use incremental analysis to only analyze changed files",
    "Configure LLM provider (OpenAI, Claude, or local models)",
    "Set custom system prompts for AI analysis",
    "Control token budgets and rate limiting for API calls",
    "Handle retries and errors from LLM API responses",
    "Parse structured AI responses into usable data structures",
    "Access file summaries and module groupings from AI analysis"
  ],
  "keyFunctions": [
    {
      "name": "analyzePurpose",
      "desc": "Analyzes the codebase to determine product purpose, architecture rationale, and key features using AI",
      "inputs": "AnalysisContext with file structure, imports, and entry points",
      "outputs": "ProductPurposeAnalysis with product purpose, architecture, and design patterns"
    },
    {
      "name": "generateEnhancedDocumentation",
      "desc": "Generates comprehensive product documentation including purpose, features, architecture, and user scenarios using AI",
      "inputs": "CodeAnalysis and AnalysisContext",
      "outputs": "EnhancedProductDocumentation with full product overview and technical details"
    },
    {
      "name": "generateLLMInsights",
      "desc": "Generates intelligent insights about code quality, patterns, and improvement suggestions using AI",
      "inputs": "CodeAnalysis with code metrics and structure",
      "outputs": "LLM insights with code quality assessment and recommendations"
    },
    {
      "name": "generateUnitTestPlan",
      "desc": "Creates a comprehensive unit test plan for a specific function using AI analysis",
      "inputs": "Function metadata, file content, and function name",
      "outputs": "Unit test plan with test cases, setup, assertions, and edge cases"
    },
    {
      "name": "generateRefactoringSuggestions",
      "desc": "Provides AI-powered refactoring suggestions for complex or problematic functions",
      "inputs": "Function code, metrics (complexity, length, nesting), and surrounding context",
      "outputs": "Refactoring suggestions with specific improvements and code examples"
    },
    {
      "name": "analyzeIncrementally",
      "desc": "Performs incremental AI analysis only on files that have changed since last analysis",
      "inputs": "Changed file URIs and analysis context",
      "outputs": "Updated insights and documentation for changed files only"
    },
    {
      "name": "callLLM",
      "desc": "Makes API calls to configured LLM provider with rate limiting, retries, and error handling",
      "inputs": "System prompt, user prompt, optional schema for structured output",
      "outputs": "Parsed LLM response with requested analysis or documentation"
    },
    {
      "name": "generateFileSummary",
      "desc": "Creates AI-generated summary of a single file's purpose, functionality, and role",
      "inputs": "File path, content, and role in codebase",
      "outputs": "FileSummary with description, key functions, and relationships"
    },
    {
      "name": "generateModuleSummary",
      "desc": "Creates AI-generated summary of a module's purpose and file organization",
      "inputs": "Module name, list of files, and module type",
      "outputs": "ModuleSummary with module purpose and file descriptions"
    }
  ],
  "dependencies": [
    "vscode",
    "./fileDocumentation",
    "./analyzer",
    "./analysis/enhancedAnalyzer",
    "./llmSchemas",
    "./fileAccessHelper",
    "./logger",
    "./config/configurationManager",
    "./ai/providers/providerFactory",
    "./ai/llmResponseParser",
    "./ai/llmRateLimiter",
    "./ai/llmRetryHandler",
    "./domain/prompts/promptBuilder",
    "./domain/services/incrementalAnalysisService",
    "./domain/prompts/refactoringPromptBuilder",
    "./analysis/functionAnalyzer"
  ],
  "intent": "This file exists to bridge the gap between static code analysis and intelligent AI-powered insights. It solves the problem of understanding large codebases by using LLMs to generate human-readable documentation, identify architectural patterns, suggest improvements, and create test plans. It abstracts away the complexity of calling different LLM providers (OpenAI, Claude, local models) and handles rate limiting, retries, and response parsing so developers can get AI insights without managing API details.",
  "rawContent": "```json\n{\n  \"purpose\": \"Provides LLM-powered AI analysis services to generate intelligent insights, documentation, and code analysis by interfacing with OpenAI/Claude APIs.\",\n  \"userVisibleActions\": [\n    \"Generate intelligent insights about codebase purpose and architecture\",\n    \"Create comprehensive product documentation from code analysis\",\n    \"Analyze code quality and provide improvement suggestions\",\n    \"Generate unit test plans for functions\",\n    \"Get AI-powered refactoring suggestions for complex functions\",\n    \"Receive explanations of what the product does and why it was built\",\n    \"View AI-generated module summaries and relationships\",\n    \"See incremental analysis results as codebase changes\",\n    \"Get file-level and function-level documentation generated by AI\"\n  ],\n  \"developerVisibleActions\": [\n    \"Call LLM service to analyze codebase structure and purpose\",\n    \"Request AI-generated documentation for entire product\",\n    \"Trigger AI analysis of code quality and architecture\",\n    \"Generate test plans using AI understanding of functions\",\n    \"Request refactoring suggestions for complex code\",\n    \"Use incremental analysis to only analyze changed files\",\n    \"Configure LLM provider (OpenAI, Claude, or local models)\",\n    \"Set custom system prompts for AI analysis\",\n    \"Control token budgets and rate limiting for API calls\",\n    \"Handle retries and errors from LLM API responses\",\n    \"Parse structured AI responses into usable data structures\",\n    \"Access file summaries and module groupings from AI analysis\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"analyzePurpose\",\n      \"desc\": \"Analyzes the codebase to determine product purpose, architecture rationale, and key features using AI\",\n      \"inputs\": \"AnalysisContext with file structure, imports, and entry points\",\n      \"outputs\": \"ProductPurposeAnalysis with product purpose, architecture, and design patterns\"\n    },\n    {\n      \"name\": \"generateEnhancedDocumentation\",\n      \"desc\": \"Generates comprehensive product documentation including purpose, features, architecture, and user scenarios using AI\",\n      \"inputs\": \"CodeAnalysis and AnalysisContext\",\n      \"outputs\": \"EnhancedProductDocumentation with full product overview and technical details\"\n    },\n    {\n      \"name\": \"generateLLMInsights\",\n      \"desc\": \"Generates intelligent insights about code quality, patterns, and improvement suggestions using AI\",\n      \"inputs\": \"CodeAnalysis with code metrics and structure\",\n      \"outputs\": \"LLM insights with code quality assessment and recommendations\"\n    },\n    {\n      \"name\": \"generateUnitTestPlan\",\n      \"desc\": \"Creates a comprehensive unit test plan for a specific function using AI analysis\",\n      \"inputs\": \"Function metadata, file content, and function name\",\n      \"outputs\": \"Unit test plan with test cases, setup, assertions, and edge cases\"\n    },\n    {\n      \"name\": \"generateRefactoringSuggestions\",\n      \"desc\": \"Provides AI-powered refactoring suggestions for complex or problematic functions\",\n      \"inputs\": \"Function code, metrics (complexity, length, nesting), and surrounding context\",\n      \"outputs\": \"Refactoring suggestions with specific improvements and code examples\"\n    },\n    {\n      \"name\": \"analyzeIncrementally\",\n      \"desc\": \"Performs incremental AI analysis only on files that have changed since last analysis\",\n      \"inputs\": \"Changed file URIs and analysis context\",\n      \"outputs\": \"Updated insights and documentation for changed files only\"\n    },\n    {\n      \"name\": \"callLLM\",\n      \"desc\": \"Makes API calls to configured LLM provider with rate limiting, retries, and error handling\",\n      \"inputs\": \"System prompt, user prompt, optional schema for structured output\",\n      \"outputs\": \"Parsed LLM response with requested analysis or documentation\"\n    },\n    {\n      \"name\": \"generateFileSummary\",\n      \"desc\": \"Creates AI-generated summary of a single file's purpose, functionality, and role\",\n      \"inputs\": \"File path, content, and role in codebase\",\n      \"outputs\": \"FileSummary with description, key functions, and relationships\"\n    },\n    {\n      \"name\": \"generateModuleSummary\",\n      \"desc\": \"Creates AI-generated summary of a module's purpose and file organization\",\n      \"inputs\": \"Module name, list of files, and module type\",\n      \"outputs\": \"ModuleSummary with module purpose and file descriptions\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"./fileDocumentation\",\n    \"./analyzer\",\n    \"./analysis/enhancedAnalyzer\",\n    \"./llmSchemas\",\n    \"./fileAccessHelper\",\n    \"./logger\",\n    \"./config/configurationManager\",\n    \"./ai/providers/providerFactory\",\n    \"./ai/llmResponseParser\",\n    \"./ai/llmRateLimiter\",\n    \"./ai/llmRetryHandler\",\n    \"./domain/prompts/promptBuilder\",\n    \"./domain/services/incrementalAnalysisService\",\n    \"./domain/prompts/refactoringPromptBuilder\",\n    \"./analysis/functionAnalyzer\"\n  ],\n  \"intent\": \"This file exists to bridge the gap between static code analysis and intelligent AI-powered insights. It solves the problem of understanding large codebases by using LLMs to generate human-readable documentation, identify architectural patterns, suggest improvements, and create test plans. It abstracts away the complexity of calling different LLM providers (OpenAI, Claude, local models) and handles rate limiting, retries, and response parsing so developers can get AI insights without managing API details.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T00:58:49.720Z"
  }
}