{
  "file": "src/analyzer.ts",
  "role": "Core Logic",
  "purpose": "Analyzes code files to extract structure, dependencies, functions, and relationships for codebase understanding and visualization",
  "userVisibleActions": [
    "View total file count, line count, and function count statistics",
    "See list of large files that may need refactoring",
    "View all functions with their metadata and locations",
    "See import relationships between files",
    "Identify orphaned files not imported by others",
    "Find entry points (files not importing others)",
    "Detect duplicate code blocks across the codebase",
    "View risk levels (high/medium/low) for functions",
    "See test coverage mapping for source files and functions",
    "Identify uncovered functions without tests"
  ],
  "developerVisibleActions": [
    "Call analyzer to scan directory and extract code structure",
    "Get structured data about functions including parameters, return types, visibility",
    "Access function dependencies (database, HTTP, filesystem, etc.)",
    "Retrieve branch information (if/else, loops, try/catch)",
    "Track state mutations (assignments, modifications, deletions)",
    "Query import/export relationships between files",
    "Use caching system to speed up repeated analysis",
    "Map test files to source files they test",
    "Filter analysis results by file type or pattern",
    "Export analysis results in structured format"
  ],
  "keyFunctions": [
    {
      "name": "CodeAnalysis",
      "desc": "Main data structure containing complete analysis results",
      "inputs": "N/A (interface)",
      "outputs": "Object with totalFiles, totalLines, functions, imports, orphanedFiles, duplicates, testMapping, etc."
    },
    {
      "name": "FunctionMetadata",
      "desc": "Detailed metadata about a single function",
      "inputs": "N/A (interface)",
      "outputs": "Object with symbolName, parameters, returnType, visibility, branches, dependencies, riskLevel, docstring"
    },
    {
      "name": "BranchInfo",
      "desc": "Information about conditional branches and control flow",
      "inputs": "N/A (interface)",
      "outputs": "Object with type (if/loop/try/etc), condition description, lineNumber"
    },
    {
      "name": "DependencyInfo",
      "desc": "Tracks external and internal dependencies",
      "inputs": "N/A (interface)",
      "outputs": "Object with dependency name, type (db/http/filesystem/etc), isInternal flag"
    },
    {
      "name": "StateMutationInfo",
      "desc": "Tracks where and how state is modified",
      "inputs": "N/A (interface)",
      "outputs": "Object with target name, mutationType (assign/modify/delete/read), lineNumber"
    },
    {
      "name": "TestMapping",
      "desc": "Maps source files and functions to their test files",
      "inputs": "N/A (interface)",
      "outputs": "Object with sourceFileToTests map, functionToTests map, uncoveredFunctions list"
    }
  ],
  "dependencies": [
    "fs",
    "path",
    "./cache (AnalysisCache)"
  ],
  "intent": "This file defines the core data structures and interfaces for code analysis results. It exists to provide a standardized way to represent codebase structure, function metadata, dependencies, test coverage, and code quality metrics. Developers use these interfaces to understand code relationships, identify technical debt, assess risk, and improve test coverage.",
  "rawContent": "```json\n{\n  \"purpose\": \"Analyzes code files to extract structure, dependencies, functions, and relationships for codebase understanding and visualization\",\n  \"userVisibleActions\": [\n    \"View total file count, line count, and function count statistics\",\n    \"See list of large files that may need refactoring\",\n    \"View all functions with their metadata and locations\",\n    \"See import relationships between files\",\n    \"Identify orphaned files not imported by others\",\n    \"Find entry points (files not importing others)\",\n    \"Detect duplicate code blocks across the codebase\",\n    \"View risk levels (high/medium/low) for functions\",\n    \"See test coverage mapping for source files and functions\",\n    \"Identify uncovered functions without tests\"\n  ],\n  \"developerVisibleActions\": [\n    \"Call analyzer to scan directory and extract code structure\",\n    \"Get structured data about functions including parameters, return types, visibility\",\n    \"Access function dependencies (database, HTTP, filesystem, etc.)\",\n    \"Retrieve branch information (if/else, loops, try/catch)\",\n    \"Track state mutations (assignments, modifications, deletions)\",\n    \"Query import/export relationships between files\",\n    \"Use caching system to speed up repeated analysis\",\n    \"Map test files to source files they test\",\n    \"Filter analysis results by file type or pattern\",\n    \"Export analysis results in structured format\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"CodeAnalysis\",\n      \"desc\": \"Main data structure containing complete analysis results\",\n      \"inputs\": \"N/A (interface)\",\n      \"outputs\": \"Object with totalFiles, totalLines, functions, imports, orphanedFiles, duplicates, testMapping, etc.\"\n    },\n    {\n      \"name\": \"FunctionMetadata\",\n      \"desc\": \"Detailed metadata about a single function\",\n      \"inputs\": \"N/A (interface)\",\n      \"outputs\": \"Object with symbolName, parameters, returnType, visibility, branches, dependencies, riskLevel, docstring\"\n    },\n    {\n      \"name\": \"BranchInfo\",\n      \"desc\": \"Information about conditional branches and control flow\",\n      \"inputs\": \"N/A (interface)\",\n      \"outputs\": \"Object with type (if/loop/try/etc), condition description, lineNumber\"\n    },\n    {\n      \"name\": \"DependencyInfo\",\n      \"desc\": \"Tracks external and internal dependencies\",\n      \"inputs\": \"N/A (interface)\",\n      \"outputs\": \"Object with dependency name, type (db/http/filesystem/etc), isInternal flag\"\n    },\n    {\n      \"name\": \"StateMutationInfo\",\n      \"desc\": \"Tracks where and how state is modified\",\n      \"inputs\": \"N/A (interface)\",\n      \"outputs\": \"Object with target name, mutationType (assign/modify/delete/read), lineNumber\"\n    },\n    {\n      \"name\": \"TestMapping\",\n      \"desc\": \"Maps source files and functions to their test files\",\n      \"inputs\": \"N/A (interface)\",\n      \"outputs\": \"Object with sourceFileToTests map, functionToTests map, uncoveredFunctions list\"\n    }\n  ],\n  \"dependencies\": [\n    \"fs\",\n    \"path\",\n    \"./cache (AnalysisCache)\"\n  ],\n  \"intent\": \"This file defines the core data structures and interfaces for code analysis results. It exists to provide a standardized way to represent codebase structure, function metadata, dependencies, test coverage, and code quality metrics. Developers use these interfaces to understand code relationships, identify technical debt, assess risk, and improve test coverage.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T00:50:20.704Z"
  }
}