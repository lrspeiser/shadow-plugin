{
  "file": "src/insightsViewer.ts",
  "role": "GUI View",
  "purpose": "Provides a tree view in VS Code that displays AI-generated architecture insights about the codebase, including purpose, relationships, and file organization.",
  "userVisibleActions": [
    "View architecture insights in a tree view panel showing project purpose, file relationships, and directory structure",
    "Click on files in the insights tree to open them in the editor",
    "See color-coded file roles (Model, View, Controller, Service, etc.) with icons",
    "Browse files grouped by their architectural purpose",
    "Refresh the insights view to reload analysis results",
    "See file summaries and purposes when hovering or selecting items",
    "View metadata like LOC (lines of code) and programming language for each file",
    "Access insights even when files are missing from the workspace",
    "See real-time updates when insights.json or project-purpose.md files change"
  ],
  "developerVisibleActions": [
    "Tree view automatically refreshes when .shadow/docs/insights.json is modified",
    "Tree view updates when .shadow/project-purpose.md changes",
    "Files are organized by their architectural role (GUI, Model, Service, Controller, etc.)",
    "Clicking a file item navigates to that file in the editor",
    "Insights data is loaded from the .shadow/docs directory",
    "File watcher service monitors changes to insights and purpose files",
    "Tree provider implements VS Code TreeDataProvider interface for rendering",
    "Handles missing files gracefully by showing them in the tree with appropriate styling"
  ],
  "keyFunctions": [
    {
      "name": "refresh",
      "desc": "Reloads insights data from the file system and updates the tree view",
      "inputs": "insightsData (optional LLMInsights object)",
      "outputs": "void"
    },
    {
      "name": "getTreeItem",
      "desc": "Converts an InsightItem into a VS Code TreeItem for display in the tree view",
      "inputs": "element (InsightItem)",
      "outputs": "vscode.TreeItem"
    },
    {
      "name": "getChildren",
      "desc": "Returns child items for a given tree node (categories, files, or metadata)",
      "inputs": "element (optional InsightItem)",
      "outputs": "Promise<InsightItem[]>"
    },
    {
      "name": "setupFileWatcher",
      "desc": "Creates file system watchers to monitor changes to insights.json and project-purpose.md",
      "inputs": "none",
      "outputs": "void"
    },
    {
      "name": "getRoleIcon",
      "desc": "Returns the appropriate icon name for a file based on its architectural role",
      "inputs": "role (string)",
      "outputs": "string (icon name)"
    },
    {
      "name": "getRoleColor",
      "desc": "Returns a color code for displaying files based on their role category",
      "inputs": "role (string)",
      "outputs": "string (color code)"
    },
    {
      "name": "dispose",
      "desc": "Cleans up file watchers and other resources when the provider is destroyed",
      "inputs": "none",
      "outputs": "void"
    }
  ],
  "dependencies": [
    "vscode",
    "path",
    "fs",
    "./llmService (LLMInsights type)",
    "./domain/services/fileWatcherService"
  ],
  "intent": "This file exists to visualize AI-generated architecture insights in VS Code's sidebar, helping developers understand their codebase structure by showing how files relate to each other, what roles they play, and what purpose they serve. It solves the problem of navigating and understanding large codebases by providing an architectural overview that auto-updates as the analysis changes.",
  "rawContent": "```json\n{\n  \"purpose\": \"Provides a tree view in VS Code that displays AI-generated architecture insights about the codebase, including purpose, relationships, and file organization.\",\n  \"userVisibleActions\": [\n    \"View architecture insights in a tree view panel showing project purpose, file relationships, and directory structure\",\n    \"Click on files in the insights tree to open them in the editor\",\n    \"See color-coded file roles (Model, View, Controller, Service, etc.) with icons\",\n    \"Browse files grouped by their architectural purpose\",\n    \"Refresh the insights view to reload analysis results\",\n    \"See file summaries and purposes when hovering or selecting items\",\n    \"View metadata like LOC (lines of code) and programming language for each file\",\n    \"Access insights even when files are missing from the workspace\",\n    \"See real-time updates when insights.json or project-purpose.md files change\"\n  ],\n  \"developerVisibleActions\": [\n    \"Tree view automatically refreshes when .shadow/docs/insights.json is modified\",\n    \"Tree view updates when .shadow/project-purpose.md changes\",\n    \"Files are organized by their architectural role (GUI, Model, Service, Controller, etc.)\",\n    \"Clicking a file item navigates to that file in the editor\",\n    \"Insights data is loaded from the .shadow/docs directory\",\n    \"File watcher service monitors changes to insights and purpose files\",\n    \"Tree provider implements VS Code TreeDataProvider interface for rendering\",\n    \"Handles missing files gracefully by showing them in the tree with appropriate styling\"\n  ],\n  \"keyFunctions\": [\n    {\n      \"name\": \"refresh\",\n      \"desc\": \"Reloads insights data from the file system and updates the tree view\",\n      \"inputs\": \"insightsData (optional LLMInsights object)\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"getTreeItem\",\n      \"desc\": \"Converts an InsightItem into a VS Code TreeItem for display in the tree view\",\n      \"inputs\": \"element (InsightItem)\",\n      \"outputs\": \"vscode.TreeItem\"\n    },\n    {\n      \"name\": \"getChildren\",\n      \"desc\": \"Returns child items for a given tree node (categories, files, or metadata)\",\n      \"inputs\": \"element (optional InsightItem)\",\n      \"outputs\": \"Promise<InsightItem[]>\"\n    },\n    {\n      \"name\": \"setupFileWatcher\",\n      \"desc\": \"Creates file system watchers to monitor changes to insights.json and project-purpose.md\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    },\n    {\n      \"name\": \"getRoleIcon\",\n      \"desc\": \"Returns the appropriate icon name for a file based on its architectural role\",\n      \"inputs\": \"role (string)\",\n      \"outputs\": \"string (icon name)\"\n    },\n    {\n      \"name\": \"getRoleColor\",\n      \"desc\": \"Returns a color code for displaying files based on their role category\",\n      \"inputs\": \"role (string)\",\n      \"outputs\": \"string (color code)\"\n    },\n    {\n      \"name\": \"dispose\",\n      \"desc\": \"Cleans up file watchers and other resources when the provider is destroyed\",\n      \"inputs\": \"none\",\n      \"outputs\": \"void\"\n    }\n  ],\n  \"dependencies\": [\n    \"vscode\",\n    \"path\",\n    \"fs\",\n    \"./llmService (LLMInsights type)\",\n    \"./domain/services/fileWatcherService\"\n  ],\n  \"intent\": \"This file exists to visualize AI-generated architecture insights in VS Code's sidebar, helping developers understand their codebase structure by showing how files relate to each other, what roles they play, and what purpose they serve. It solves the problem of navigating and understanding large codebases by providing an architectural overview that auto-updates as the analysis changes.\"\n}\n```",
  "_metadata": {
    "index": 0,
    "total": 0,
    "savedAt": "2025-11-20T00:57:41.924Z"
  }
}