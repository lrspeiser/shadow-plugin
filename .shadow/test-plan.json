{
  "strategy": "Adopt a risk-based testing approach focusing on: 1) Core analysis engine functions that process code and generate insights, 2) AI integration layer for LLM interactions and prompt engineering, 3) VS Code extension lifecycle and UI integration, 4) File system monitoring and change detection, 5) Test generation and validation workflows. Prioritize functions with high complexity, external dependencies (AI APIs, file system, VS Code API), and critical user-facing features. Use extensive mocking for VS Code APIs, file system operations, and AI service calls. Implement integration tests for end-to-end workflows and unit tests for pure logic functions.",
  "total_functions": 1183,
  "testable_functions": 850,
  "function_groups": [
    {
      "group_id": "core-analysis-engine",
      "name": "Core Analysis Engine",
      "priority": 1,
      "functions": [
        {
          "name": "analyzeCodebase",
          "file": "src/analysis/codebaseAnalyzer.ts",
          "startLine": 45,
          "endLine": 280,
          "complexity": "high",
          "dependencies": [
            "fs",
            "typescript",
            "parseSourceFile",
            "extractFunctions",
            "detectCircularDependencies"
          ],
          "mocking_needed": true
        },
        {
          "name": "extractFunctions",
          "file": "src/analysis/functionExtractor.ts",
          "startLine": 20,
          "endLine": 150,
          "complexity": "high",
          "dependencies": [
            "typescript",
            "calculateComplexity",
            "extractParameters"
          ],
          "mocking_needed": false
        },
        {
          "name": "calculateComplexity",
          "file": "src/analysis/complexityAnalyzer.ts",
          "startLine": 15,
          "endLine": 95,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": false
        },
        {
          "name": "detectCircularDependencies",
          "file": "src/analysis/dependencyAnalyzer.ts",
          "startLine": 110,
          "endLine": 180,
          "complexity": "high",
          "dependencies": [
            "graphTraversal",
            "buildDependencyGraph"
          ],
          "mocking_needed": false
        },
        {
          "name": "buildDependencyGraph",
          "file": "src/analysis/dependencyAnalyzer.ts",
          "startLine": 30,
          "endLine": 105,
          "complexity": "medium",
          "dependencies": [
            "parseDependencies"
          ],
          "mocking_needed": false
        },
        {
          "name": "identifyEntryPoints",
          "file": "src/analysis/entryPointDetector.ts",
          "startLine": 25,
          "endLine": 120,
          "complexity": "medium",
          "dependencies": [
            "fs",
            "parsePackageJson"
          ],
          "mocking_needed": true
        }
      ]
    },
    {
      "group_id": "ai-integration",
      "name": "AI Service Integration",
      "priority": 1,
      "functions": [
        {
          "name": "generateInsights",
          "file": "src/ai/insightGenerator.ts",
          "startLine": 40,
          "endLine": 200,
          "complexity": "high",
          "dependencies": [
            "aiService",
            "buildPromptForAnalysis",
            "parseAnalysisResponse",
            "enforceRateLimit"
          ],
          "mocking_needed": true
        },
        {
          "name": "generateProductDocumentation",
          "file": "src/ai/documentationGenerator.ts",
          "startLine": 35,
          "endLine": 180,
          "complexity": "high",
          "dependencies": [
            "aiService",
            "buildPromptForAnalysis",
            "parseAnalysisResponse"
          ],
          "mocking_needed": true
        },
        {
          "name": "generateArchitectureInsights",
          "file": "src/ai/architectureAnalyzer.ts",
          "startLine": 50,
          "endLine": 220,
          "complexity": "high",
          "dependencies": [
            "aiService",
            "buildPromptForAnalysis",
            "parseAnalysisResponse"
          ],
          "mocking_needed": true
        },
        {
          "name": "buildPromptForAnalysis",
          "file": "src/ai/promptBuilder.ts",
          "startLine": 25,
          "endLine": 150,
          "complexity": "medium",
          "dependencies": [
            "templateEngine",
            "contextFormatter"
          ],
          "mocking_needed": false
        },
        {
          "name": "parseAnalysisResponse",
          "file": "src/ai/responseParser.ts",
          "startLine": 20,
          "endLine": 140,
          "complexity": "high",
          "dependencies": [
            "jsonParser",
            "naturalLanguageExtractor"
          ],
          "mocking_needed": false
        },
        {
          "name": "enforceRateLimit",
          "file": "src/ai/rateLimiter.ts",
          "startLine": 15,
          "endLine": 85,
          "complexity": "medium",
          "dependencies": [
            "setTimeout",
            "tokenCounter"
          ],
          "mocking_needed": true
        }
      ]
    },
    {
      "group_id": "test-generation",
      "name": "Test Generation & Validation",
      "priority": 2,
      "functions": [
        {
          "name": "createTestPlan",
          "file": "src/testing/testPlanner.ts",
          "startLine": 30,
          "endLine": 160,
          "complexity": "high",
          "dependencies": [
            "analyzeTestability",
            "prioritizeFunctions",
            "calculateCoverage"
          ],
          "mocking_needed": false
        },
        {
          "name": "generateTests",
          "file": "src/testing/testGenerator.ts",
          "startLine": 45,
          "endLine": 250,
          "complexity": "high",
          "dependencies": [
            "aiService",
            "buildPromptForAnalysis",
            "validateTests",
            "batchProcessor"
          ],
          "mocking_needed": true
        },
        {
          "name": "validateTests",
          "file": "src/testing/testValidator.ts",
          "startLine": 35,
          "endLine": 190,
          "complexity": "high",
          "dependencies": [
            "testRunner",
            "parseTestResults",
            "fixFailingTests"
          ],
          "mocking_needed": true
        },
        {
          "name": "fixFailingTests",
          "file": "src/testing/testValidator.ts",
          "startLine": 195,
          "endLine": 280,
          "complexity": "high",
          "dependencies": [
            "aiService",
            "parseTestErrors",
            "regenerateTest"
          ],
          "mocking_needed": true
        },
        {
          "name": "analyzeTestability",
          "file": "src/testing/testabilityAnalyzer.ts",
          "startLine": 20,
          "endLine": 110,
          "complexity": "medium",
          "dependencies": [
            "complexityAnalyzer",
            "dependencyAnalyzer"
          ],
          "mocking_needed": false
        }
      ]
    },
    {
      "group_id": "vscode-integration",
      "name": "VS Code Extension Integration",
      "priority": 2,
      "functions": [
        {
          "name": "activate",
          "file": "src/extension.ts",
          "startLine": 15,
          "endLine": 120,
          "complexity": "high",
          "dependencies": [
            "vscode",
            "registerCommands",
            "initializePanels",
            "setupFileWatcher"
          ],
          "mocking_needed": true
        },
        {
          "name": "registerCommands",
          "file": "src/extension/commandRegistry.ts",
          "startLine": 25,
          "endLine": 140,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "analyzeCodebase",
            "generateInsights"
          ],
          "mocking_needed": true
        },
        {
          "name": "navigateToLocation",
          "file": "src/extension/navigation.ts",
          "startLine": 20,
          "endLine": 85,
          "complexity": "low",
          "dependencies": [
            "vscode"
          ],
          "mocking_needed": true
        },
        {
          "name": "initializePanels",
          "file": "src/extension/panelManager.ts",
          "startLine": 30,
          "endLine": 150,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "createTreeView",
            "createWebviewPanel"
          ],
          "mocking_needed": true
        },
        {
          "name": "updateProblemsPanel",
          "file": "src/extension/problemsIntegration.ts",
          "startLine": 25,
          "endLine": 95,
          "complexity": "low",
          "dependencies": [
            "vscode",
            "DiagnosticCollection"
          ],
          "mocking_needed": true
        }
      ]
    },
    {
      "group_id": "file-monitoring",
      "name": "File System Monitoring",
      "priority": 2,
      "functions": [
        {
          "name": "processFileChanges",
          "file": "src/fileSystem/changeHandler.ts",
          "startLine": 40,
          "endLine": 180,
          "complexity": "high",
          "dependencies": [
            "vscode",
            "fs",
            "analyzeCodebase",
            "debounce"
          ],
          "mocking_needed": true
        },
        {
          "name": "setupFileWatcher",
          "file": "src/fileSystem/fileWatcher.ts",
          "startLine": 20,
          "endLine": 110,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "processFileChanges"
          ],
          "mocking_needed": true
        },
        {
          "name": "filterIgnoredFiles",
          "file": "src/fileSystem/fileFilter.ts",
          "startLine": 15,
          "endLine": 75,
          "complexity": "low",
          "dependencies": [
            "minimatch",
            "parseGitignore"
          ],
          "mocking_needed": false
        },
        {
          "name": "debounceFileChanges",
          "file": "src/fileSystem/changeHandler.ts",
          "startLine": 185,
          "endLine": 220,
          "complexity": "medium",
          "dependencies": [
            "setTimeout"
          ],
          "mocking_needed": true
        }
      ]
    },
    {
      "group_id": "insight-generation",
      "name": "Insight & Recommendation Engine",
      "priority": 3,
      "functions": [
        {
          "name": "detectCodeSmells",
          "file": "src/insights/codeSmellDetector.ts",
          "startLine": 30,
          "endLine": 200,
          "complexity": "high",
          "dependencies": [
            "complexityAnalyzer",
            "dependencyAnalyzer",
            "patternMatcher"
          ],
          "mocking_needed": false
        },
        {
          "name": "generateRefactoringRecommendations",
          "file": "src/insights/refactoringAdvisor.ts",
          "startLine": 40,
          "endLine": 180,
          "complexity": "high",
          "dependencies": [
            "detectCodeSmells",
            "aiService"
          ],
          "mocking_needed": true
        },
        {
          "name": "calculateQualityScore",
          "file": "src/insights/qualityScorer.ts",
          "startLine": 25,
          "endLine": 120,
          "complexity": "medium",
          "dependencies": [
            "complexityAnalyzer",
            "testCoverageAnalyzer"
          ],
          "mocking_needed": false
        },
        {
          "name": "identifyOrphanedFiles",
          "file": "src/insights/orphanDetector.ts",
          "startLine": 20,
          "endLine": 90,
          "complexity": "medium",
          "dependencies": [
            "dependencyAnalyzer"
          ],
          "mocking_needed": false
        }
      ]
    },
    {
      "group_id": "data-persistence",
      "name": "Data Storage & Caching",
      "priority": 3,
      "functions": [
        {
          "name": "saveAnalysisResults",
          "file": "src/storage/analysisCache.ts",
          "startLine": 30,
          "endLine": 110,
          "complexity": "medium",
          "dependencies": [
            "fs",
            "serializeData"
          ],
          "mocking_needed": true
        },
        {
          "name": "loadAnalysisResults",
          "file": "src/storage/analysisCache.ts",
          "startLine": 115,
          "endLine": 180,
          "complexity": "medium",
          "dependencies": [
            "fs",
            "deserializeData",
            "validateCacheIntegrity"
          ],
          "mocking_needed": true
        },
        {
          "name": "exportForAI",
          "file": "src/export/aiExporter.ts",
          "startLine": 25,
          "endLine": 140,
          "complexity": "medium",
          "dependencies": [
            "formatForProvider",
            "fs"
          ],
          "mocking_needed": true
        },
        {
          "name": "validateCacheIntegrity",
          "file": "src/storage/analysisCache.ts",
          "startLine": 185,
          "endLine": 230,
          "complexity": "low",
          "dependencies": [
            "checksum"
          ],
          "mocking_needed": false
        }
      ]
    },
    {
      "group_id": "configuration",
      "name": "Configuration & Settings",
      "priority": 4,
      "functions": [
        {
          "name": "loadConfiguration",
          "file": "src/config/configLoader.ts",
          "startLine": 20,
          "endLine": 95,
          "complexity": "low",
          "dependencies": [
            "vscode",
            "validateConfig"
          ],
          "mocking_needed": true
        },
        {
          "name": "validateConfig",
          "file": "src/config/configValidator.ts",
          "startLine": 15,
          "endLine": 85,
          "complexity": "low",
          "dependencies": [
            "schema"
          ],
          "mocking_needed": false
        },
        {
          "name": "getAIProviderConfig",
          "file": "src/config/aiConfig.ts",
          "startLine": 20,
          "endLine": 75,
          "complexity": "low",
          "dependencies": [
            "vscode",
            "loadConfiguration"
          ],
          "mocking_needed": true
        }
      ]
    }
  ]
}