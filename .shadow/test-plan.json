{
  "strategy": "Focus on the critical path from entry point through core analysis workflows, prioritizing AI integration reliability, file system operations safety, and data transformation accuracy. Test strategy emphasizes integration testing for end-to-end workflows while unit testing complex business logic in analysis, AI communication, and test generation pipelines. Priority is on areas where failures would break core functionality or cause data loss.",
  "total_functions": 1217,
  "testable_functions": 52,
  "function_groups": [
    {
      "group_id": "core-analysis-engine",
      "name": "Core Analysis Engine",
      "priority": 1,
      "functions": [
        {
          "name": "for",
          "file": "src/analysis/enhancedAnalyzer.ts",
          "startLine": 488,
          "endLine": 617,
          "complexity": "high",
          "dependencies": [
            "typescript",
            "fs"
          ],
          "mocking_needed": true,
          "reason": "Largest and most complex function (130 lines) in the analyzer - likely contains core analysis logic for processing files or AST nodes. Critical for primary value proposition."
        },
        {
          "name": "for",
          "file": "src/analyzer.ts",
          "startLine": 161,
          "endLine": 200,
          "complexity": "high",
          "dependencies": [
            "typescript",
            "fs"
          ],
          "mocking_needed": true,
          "reason": "Large function (40 lines) in main analyzer - likely entry point for workspace-wide analysis or file processing loop."
        },
        {
          "name": "for",
          "file": "src/analyzer.ts",
          "startLine": 372,
          "endLine": 404,
          "complexity": "high",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "Complex nested logic (33 lines with 28-line if block) - likely handles dependency detection or relationship mapping between code elements."
        },
        {
          "name": "traverse",
          "file": "src/analysis/enhancedAnalyzer.ts",
          "startLine": 744,
          "endLine": 771,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "AST traversal function (28 lines) - critical for analyzing code structure, detecting complexity hotspots and dependencies."
        },
        {
          "name": "for",
          "file": "src/analysis/enhancedAnalyzer.ts",
          "startLine": 31,
          "endLine": 58,
          "complexity": "medium",
          "dependencies": [
            "typescript",
            "fs"
          ],
          "mocking_needed": true,
          "reason": "Entry point loop (28 lines) at top of enhancedAnalyzer - likely processes multiple files or initializes analysis."
        },
        {
          "name": "for",
          "file": "src/analysis/enhancedAnalyzer.ts",
          "startLine": 693,
          "endLine": 719,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "Complex nested loop (27 lines with nested if/for) - likely detects circular dependencies or analyzes code relationships."
        },
        {
          "name": "for",
          "file": "src/analyzer.ts",
          "startLine": 203,
          "endLine": 229,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "27-line analysis loop in main analyzer - likely handles single file analysis or incremental updates."
        },
        {
          "name": "switch",
          "file": "src/analyzer.ts",
          "startLine": 527,
          "endLine": 551,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "Large switch statement (25 lines) - likely handles different node types or issue categories for detection."
        },
        {
          "name": "traverse",
          "file": "src/analyzer.ts",
          "startLine": 314,
          "endLine": 337,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "Another AST traversal (24 lines) - critical for calculating complexity metrics and identifying code patterns."
        },
        {
          "name": "visit",
          "file": "src/analysis/functionAnalyzer.ts",
          "startLine": 198,
          "endLine": 220,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "Visitor pattern implementation (23 lines) - essential for analyzing function-level metrics and complexity."
        },
        {
          "name": "for",
          "file": "src/analyzer.ts",
          "startLine": 420,
          "endLine": 441,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "22-line loop with complex nested logic - likely identifies orphaned code or unused dependencies."
        },
        {
          "name": "for",
          "file": "src/analysis/functionAnalyzer.ts",
          "startLine": 396,
          "endLine": 415,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "20-line function with nested conditionals - likely analyzes function calls or test coverage detection."
        },
        {
          "name": "visit",
          "file": "src/analysis/enhancedAnalyzer.ts",
          "startLine": 104,
          "endLine": 122,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "Visitor pattern (19 lines) in enhanced analyzer - core logic for processing AST nodes and detecting issues."
        },
        {
          "name": "for",
          "file": "src/analysis/functionAnalyzer.ts",
          "startLine": 23,
          "endLine": 40,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "18-line nested loop in function analyzer - likely analyzes function parameters, complexity or relationships."
        },
        {
          "name": "traverse",
          "file": "src/analyzer.ts",
          "startLine": 283,
          "endLine": 300,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "18-line traversal in main analyzer - complements other traversal functions for complete code analysis coverage."
        }
      ]
    },
    {
      "group_id": "ai-provider-integration",
      "name": "AI Provider Integration & Response Handling",
      "priority": 2,
      "functions": [
        {
          "name": "for",
          "file": "src/ai/llmRetryHandler.ts",
          "startLine": 155,
          "endLine": 186,
          "complexity": "high",
          "dependencies": [
            "ai-provider",
            "rate-limiter"
          ],
          "mocking_needed": true,
          "reason": "Core retry logic with exponential backoff - critical for handling API failures gracefully and preventing wasted API costs. 32 lines of complex retry orchestration."
        },
        {
          "name": "for",
          "file": "src/ai/llmRetryHandler.ts",
          "startLine": 60,
          "endLine": 90,
          "complexity": "high",
          "dependencies": [
            "ai-provider",
            "rate-limiter"
          ],
          "mocking_needed": true,
          "reason": "Primary retry handler entry point with exponential backoff implementation. 31 lines handling critical retry logic and error scenarios."
        },
        {
          "name": "for",
          "file": "src/ai/llmResponseParser.ts",
          "startLine": 390,
          "endLine": 439,
          "complexity": "high",
          "dependencies": [
            "ai-response"
          ],
          "mocking_needed": true,
          "reason": "Largest parser function at 50 lines - parses unstructured AI output which is prone to format variations and edge cases. Critical for extracting usable data from AI responses."
        },
        {
          "name": "for",
          "file": "src/ai/llmResponseParser.ts",
          "startLine": 313,
          "endLine": 348,
          "complexity": "high",
          "dependencies": [
            "ai-response"
          ],
          "mocking_needed": true,
          "reason": "Complex 36-line parser with nested conditionals for handling structured AI responses. Essential for incremental processing when AI requests additional context."
        },
        {
          "name": "switch",
          "file": "src/ai/providers/providerFactory.ts",
          "startLine": 23,
          "endLine": 38,
          "complexity": "medium",
          "dependencies": [
            "anthropic",
            "openai"
          ],
          "mocking_needed": true,
          "reason": "Entry point for switching between OpenAI/Claude providers. Critical path that determines which AI service handles requests."
        },
        {
          "name": "errorMessage",
          "file": "src/ai/llmRetryHandler.ts",
          "startLine": 104,
          "endLine": 115,
          "complexity": "medium",
          "dependencies": [
            "error-types"
          ],
          "mocking_needed": true,
          "reason": "Error classification logic (12 lines) that determines retry strategy. Essential for proper error handling and user-facing error messages."
        },
        {
          "name": "constructor",
          "file": "src/ai/llmRateLimiter.ts",
          "startLine": 20,
          "endLine": 33,
          "complexity": "medium",
          "dependencies": [
            "config"
          ],
          "mocking_needed": false,
          "reason": "Rate limiter initialization - 14 lines setting up critical rate limiting parameters to prevent API throttling and excessive costs."
        },
        {
          "name": "if",
          "file": "src/ai/llmResponseParser.ts",
          "startLine": 17,
          "endLine": 30,
          "complexity": "medium",
          "dependencies": [
            "ai-response"
          ],
          "mocking_needed": true,
          "reason": "Primary response validation logic (14 lines) - first line of defense against malformed AI output."
        },
        {
          "name": "if",
          "file": "src/ai/llmResponseParser.ts",
          "startLine": 60,
          "endLine": 72,
          "complexity": "medium",
          "dependencies": [
            "ai-response"
          ],
          "mocking_needed": true,
          "reason": "13-line validation block for parsing structured responses - critical for ensuring data integrity from unstructured AI output."
        },
        {
          "name": "requests",
          "file": "src/ai/providers/anthropicProvider.ts",
          "startLine": 121,
          "endLine": 126,
          "complexity": "medium",
          "dependencies": [
            "anthropic-api"
          ],
          "mocking_needed": true,
          "reason": "Claude API request formatting - external dependency that requires proper error handling and response validation."
        },
        {
          "name": "for",
          "file": "src/ai/providers/openAIProvider.ts",
          "startLine": 120,
          "endLine": 133,
          "complexity": "medium",
          "dependencies": [
            "openai-api"
          ],
          "mocking_needed": true,
          "reason": "14-line OpenAI response processing loop with external API dependency. Critical for handling streaming responses."
        },
        {
          "name": "if",
          "file": "src/ai/providers/anthropicProvider.ts",
          "startLine": 20,
          "endLine": 26,
          "complexity": "low",
          "dependencies": [
            "anthropic-client"
          ],
          "mocking_needed": true,
          "reason": "Provider initialization validation - ensures Claude provider is properly configured before making API calls."
        },
        {
          "name": "if",
          "file": "src/ai/providers/openAIProvider.ts",
          "startLine": 20,
          "endLine": 26,
          "complexity": "low",
          "dependencies": [
            "openai-client"
          ],
          "mocking_needed": true,
          "reason": "Provider initialization validation - ensures OpenAI provider is properly configured before making API calls."
        },
        {
          "name": "waitTime",
          "file": "src/ai/llmRateLimiter.ts",
          "startLine": 100,
          "endLine": 105,
          "complexity": "low",
          "dependencies": [
            "rate-limit-state"
          ],
          "mocking_needed": false,
          "reason": "Rate limit calculation logic - determines backoff timing to prevent API throttling and optimize request throughput."
        },
        {
          "name": "for",
          "file": "src/ai/llmResponseParser.ts",
          "startLine": 275,
          "endLine": 285,
          "complexity": "medium",
          "dependencies": [
            "ai-response"
          ],
          "mocking_needed": true,
          "reason": "11-line parsing loop for extracting structured data from AI responses. Important for handling variations in response format."
        }
      ]
    },
    {
      "group_id": "file-system-persistence",
      "name": "File System Operations & Data Persistence",
      "priority": 4,
      "functions": [
        {
          "name": "constructor",
          "file": "src/storage/incrementalStorage.ts",
          "startLine": 50,
          "endLine": 58,
          "complexity": "medium",
          "dependencies": [
            "fs",
            "path"
          ],
          "mocking_needed": true,
          "reason": "Critical entry point that initializes storage system. Sets up file paths, creates directories, and establishes the foundation for all file operations. Constructor failures would break all subsequent storage operations and data persistence."
        },
        {
          "name": "if",
          "file": "src/storage/incrementalStorage.ts",
          "startLine": 89,
          "endLine": 93,
          "complexity": "low",
          "dependencies": [
            "fs"
          ],
          "mocking_needed": true,
          "reason": "Appears to be a conditional block handling file operations, likely checking for file existence or permissions before operations. Critical for preventing data loss and handling edge cases safely."
        },
        {
          "name": "if",
          "file": "src/storage/incrementalStorage.ts",
          "startLine": 134,
          "endLine": 138,
          "complexity": "low",
          "dependencies": [
            "fs"
          ],
          "mocking_needed": true,
          "reason": "Another conditional block in file operations flow. Given the priority on safe file operations and handling permissions/locks, this likely guards against common failure scenarios."
        },
        {
          "name": "if",
          "file": "src/storage/incrementalStorage.ts",
          "startLine": 249,
          "endLine": 252,
          "complexity": "low",
          "dependencies": [
            "fs"
          ],
          "mocking_needed": true,
          "reason": "Longest conditional block (4 lines) among the available functions, suggesting more complex error handling or validation logic. Important for preventing data corruption during concurrent operations."
        },
        {
          "name": "if",
          "file": "src/storage/incrementalStorage.ts",
          "startLine": 169,
          "endLine": 171,
          "complexity": "low",
          "dependencies": [
            "fs"
          ],
          "mocking_needed": true,
          "reason": "Conditional handling in the middle section of the storage module. Likely validates state or permissions before critical operations, essential for data integrity."
        },
        {
          "name": "if",
          "file": "src/storage/incrementalStorage.ts",
          "startLine": 233,
          "endLine": 235,
          "complexity": "low",
          "dependencies": [
            "fs"
          ],
          "mocking_needed": true,
          "reason": "Later-stage conditional check, possibly related to versioning or final validation before write operations. Important for timestamp-based versioning functionality."
        },
        {
          "name": "if",
          "file": "src/storage/incrementalStorage.ts",
          "startLine": 245,
          "endLine": 247,
          "complexity": "low",
          "dependencies": [
            "fs"
          ],
          "mocking_needed": true,
          "reason": "Near the end of the module, likely handles cleanup or final error checking. Critical for ensuring operations complete safely without leaving corrupted state."
        }
      ]
    },
    {
      "group_id": "vscode-integration-ui",
      "name": "VS Code Integration & UI Controllers",
      "priority": 5,
      "functions": [
        {
          "name": "activate",
          "file": "src/extension.ts",
          "startLine": 31,
          "endLine": 91,
          "complexity": "high",
          "dependencies": [
            "vscode",
            "command registration",
            "context subscriptions"
          ],
          "mocking_needed": true,
          "reason": "Critical entry point for extension lifecycle. Must verify command registration, context initialization, and proper setup of all extension features. Failure here breaks entire extension."
        },
        {
          "name": "deactivate",
          "file": "src/extension.ts",
          "startLine": 676,
          "endLine": 683,
          "complexity": "low",
          "dependencies": [
            "vscode",
            "cleanup handlers"
          ],
          "mocking_needed": true,
          "reason": "Critical exit point ensuring proper cleanup. Must verify all resources are disposed and no memory leaks occur when extension is deactivated."
        },
        {
          "name": "analyzeWorkspace",
          "file": "src/extension.ts",
          "startLine": 123,
          "endLine": 191,
          "complexity": "high",
          "dependencies": [
            "vscode",
            "workspace",
            "file system",
            "analysis engine"
          ],
          "mocking_needed": true,
          "reason": "Core command with 69 lines and multiple conditional paths. Handles workspace-wide analysis with error handling, progress reporting, and result processing. Critical user-facing functionality."
        },
        {
          "name": "analyzeCurrentFile",
          "file": "src/extension.ts",
          "startLine": 193,
          "endLine": 224,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "active editor",
            "file system",
            "analysis engine"
          ],
          "mocking_needed": true,
          "reason": "Primary command for single file analysis. Must verify active editor detection, file path resolution, and proper error handling for common user scenarios."
        },
        {
          "name": "showSettings",
          "file": "src/extension.ts",
          "startLine": 424,
          "endLine": 463,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "webview",
            "configuration"
          ],
          "mocking_needed": true,
          "reason": "Complex UI controller with 40 lines managing webview panel creation and message handling. Critical for user configuration and settings management."
        },
        {
          "name": "getSettingsHtml",
          "file": "src/extension.ts",
          "startLine": 465,
          "endLine": 612,
          "complexity": "high",
          "dependencies": [
            "vscode",
            "webview",
            "configuration",
            "CSP"
          ],
          "mocking_needed": true,
          "reason": "Largest function (148 lines) generating settings UI HTML. Critical for webview rendering with security concerns (CSP) and multiple action handlers embedded."
        },
        {
          "name": "showProviderStatus",
          "file": "src/extension.ts",
          "startLine": 312,
          "endLine": 358,
          "complexity": "high",
          "dependencies": [
            "vscode",
            "provider configuration",
            "quick pick"
          ],
          "mocking_needed": true,
          "reason": "Complex function (47 lines) displaying provider information and status. Important for user feedback and provider management with conditional logic."
        },
        {
          "name": "switchProvider",
          "file": "src/extension.ts",
          "startLine": 360,
          "endLine": 394,
          "complexity": "high",
          "dependencies": [
            "vscode",
            "configuration",
            "quick pick",
            "provider registry"
          ],
          "mocking_needed": true,
          "reason": "Critical configuration command (35 lines) with nested conditionals. Handles provider switching with validation and user interaction. Essential for multi-provider support."
        },
        {
          "name": "clearAllData",
          "file": "src/extension.ts",
          "startLine": 396,
          "endLine": 419,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "cache management",
            "confirmation dialog"
          ],
          "mocking_needed": true,
          "reason": "Destructive operation requiring user confirmation. Must verify proper cache clearing, confirmation flow, and cleanup of all data. Critical for data management."
        },
        {
          "name": "copyAllInsights",
          "file": "src/extension.ts",
          "startLine": 226,
          "endLine": 240,
          "complexity": "low",
          "dependencies": [
            "vscode",
            "clipboard",
            "insights provider"
          ],
          "mocking_needed": true,
          "reason": "User-facing command for copying all insights. Must verify clipboard interaction and proper data formatting for export functionality."
        },
        {
          "name": "copyFileInsights",
          "file": "src/extension.ts",
          "startLine": 242,
          "endLine": 264,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "clipboard",
            "insights provider",
            "tree view"
          ],
          "mocking_needed": true,
          "reason": "Command with file-specific logic and error handling (23 lines). Tests tree view integration and selective data export."
        },
        {
          "name": "openLatestReport",
          "file": "src/extension.ts",
          "startLine": 614,
          "endLine": 643,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "file system",
            "document provider"
          ],
          "mocking_needed": true,
          "reason": "Navigation command opening analysis reports. Must verify file finding logic, error handling for missing reports, and proper document opening."
        },
        {
          "name": "openLatestUnitTestReport",
          "file": "src/extension.ts",
          "startLine": 645,
          "endLine": 674,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "file system",
            "document provider"
          ],
          "mocking_needed": true,
          "reason": "Similar to openLatestReport but for unit tests. Critical for test result navigation and verification of separate report handling logic."
        },
        {
          "name": "createCommandHandlers",
          "file": "src/extension.ts",
          "startLine": 96,
          "endLine": 118,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "command registry"
          ],
          "mocking_needed": true,
          "reason": "Factory function creating all command handlers (23 lines). Central to command registration and must verify all commands are properly wired."
        },
        {
          "name": "clearCache",
          "file": "src/extension.ts",
          "startLine": 280,
          "endLine": 286,
          "complexity": "low",
          "dependencies": [
            "vscode",
            "cache management"
          ],
          "mocking_needed": true,
          "reason": "Cache management command essential for testing cache invalidation logic and refresh workflows. Simple but critical for data consistency."
        }
      ]
    }
  ]
}