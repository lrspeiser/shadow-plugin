{
  "strategy": "Focus on the critical path from user interaction through analysis to AI-powered insight generation, emphasizing error handling, API integration resilience, and data transformation accuracy. Prioritize testing the core analysis engine that drives all features, AI provider integration that handles external dependencies, and the test generation/validation workflow that involves complex multi-step orchestration. Secondary focus on file system operations and VS Code UI integration points.",
  "total_functions": 1217,
  "testable_functions": 39,
  "function_groups": [
    {
      "group_id": "core-analysis",
      "name": "Core Analysis Engine",
      "priority": 1,
      "functions": [
        {
          "name": "for",
          "file": "src/analysis/enhancedAnalyzer.ts",
          "startLine": 488,
          "endLine": 617,
          "complexity": "high",
          "dependencies": [
            "AST parsing",
            "code analysis"
          ],
          "mocking_needed": true,
          "reason": "Largest function (130 lines) in enhancedAnalyzer - likely contains core analysis logic for processing code patterns. Critical entry point for issue detection."
        },
        {
          "name": "for",
          "file": "src/analyzer.ts",
          "startLine": 161,
          "endLine": 200,
          "complexity": "high",
          "dependencies": [
            "file system",
            "AST parsing"
          ],
          "mocking_needed": true,
          "reason": "40-line main loop in primary analyzer - likely the workspace/file iteration logic that processes entire codebase. Entry point for analysis."
        },
        {
          "name": "for",
          "file": "src/analyzer.ts",
          "startLine": 372,
          "endLine": 404,
          "complexity": "high",
          "dependencies": [
            "dependency tracking"
          ],
          "mocking_needed": true,
          "reason": "33-line complex nested loop with 28-line conditional - likely handles dependency analysis or orphaned code detection, core feature."
        },
        {
          "name": "traverse",
          "file": "src/analysis/enhancedAnalyzer.ts",
          "startLine": 744,
          "endLine": 771,
          "complexity": "high",
          "dependencies": [
            "AST traversal"
          ],
          "mocking_needed": true,
          "reason": "28-line traversal function - AST navigation is fundamental to all code analysis. Likely used for complexity metrics and pattern detection."
        },
        {
          "name": "for",
          "file": "src/analyzer.ts",
          "startLine": 203,
          "endLine": 229,
          "complexity": "medium",
          "dependencies": [
            "file system"
          ],
          "mocking_needed": true,
          "reason": "27-line iteration in main analyzer - likely file type handling and processing logic, critical for supporting various codebases."
        },
        {
          "name": "for",
          "file": "src/analysis/enhancedAnalyzer.ts",
          "startLine": 693,
          "endLine": 719,
          "complexity": "medium",
          "dependencies": [
            "code metrics"
          ],
          "mocking_needed": false,
          "reason": "27-line loop with nested conditionals - likely complexity calculation or code quality metrics aggregation."
        },
        {
          "name": "switch",
          "file": "src/analyzer.ts",
          "startLine": 527,
          "endLine": 551,
          "complexity": "medium",
          "dependencies": [
            "pattern matching"
          ],
          "mocking_needed": false,
          "reason": "25-line switch statement - likely handles different node types or issue categories, central to classification logic."
        },
        {
          "name": "traverse",
          "file": "src/analyzer.ts",
          "startLine": 314,
          "endLine": 337,
          "complexity": "medium",
          "dependencies": [
            "AST traversal"
          ],
          "mocking_needed": true,
          "reason": "24-line traversal in main analyzer - core AST walking logic for detecting patterns and issues across the codebase."
        },
        {
          "name": "visit",
          "file": "src/analysis/functionAnalyzer.ts",
          "startLine": 198,
          "endLine": 220,
          "complexity": "medium",
          "dependencies": [
            "AST nodes"
          ],
          "mocking_needed": true,
          "reason": "23-line visitor pattern - function-level analysis is critical for detecting code smells and complexity at the function granularity."
        },
        {
          "name": "for",
          "file": "src/analyzer.ts",
          "startLine": 420,
          "endLine": 441,
          "complexity": "medium",
          "dependencies": [
            "dependency resolution"
          ],
          "mocking_needed": true,
          "reason": "22-line loop with nested conditional - likely dependency graph construction or orphaned code detection logic."
        },
        {
          "name": "for",
          "file": "src/analysis/functionAnalyzer.ts",
          "startLine": 396,
          "endLine": 415,
          "complexity": "medium",
          "dependencies": [
            "function metrics"
          ],
          "mocking_needed": false,
          "reason": "20-line nested loop - function complexity calculation or parameter analysis, essential for quality metrics."
        },
        {
          "name": "visit",
          "file": "src/analysis/enhancedAnalyzer.ts",
          "startLine": 104,
          "endLine": 122,
          "complexity": "medium",
          "dependencies": [
            "AST nodes"
          ],
          "mocking_needed": true,
          "reason": "19-line visitor in enhancedAnalyzer - enhanced detection logic for advanced code patterns and quality issues."
        },
        {
          "name": "visit",
          "file": "src/analysis/functionAnalyzer.ts",
          "startLine": 339,
          "endLine": 357,
          "complexity": "medium",
          "dependencies": [
            "AST nodes"
          ],
          "mocking_needed": true,
          "reason": "19-line visitor - another critical point for function-level analysis, likely handles specific function patterns."
        },
        {
          "name": "for",
          "file": "src/analysis/functionAnalyzer.ts",
          "startLine": 23,
          "endLine": 40,
          "complexity": "medium",
          "dependencies": [
            "function parsing"
          ],
          "mocking_needed": true,
          "reason": "18-line nested loop - entry point for function analysis across files, feeds into complexity and quality metrics."
        },
        {
          "name": "traverse",
          "file": "src/analyzer.ts",
          "startLine": 283,
          "endLine": 300,
          "complexity": "medium",
          "dependencies": [
            "AST traversal"
          ],
          "mocking_needed": true,
          "reason": "18-line traversal - additional traversal logic for specific analysis patterns, complements main traversal functions."
        }
      ]
    },
    {
      "group_id": "documentation-generation",
      "name": "Documentation & Insight Generation",
      "priority": 4,
      "functions": [
        {
          "name": "if",
          "file": "src/insightGenerator.ts",
          "startLine": 133,
          "endLine": 159,
          "complexity": "high",
          "dependencies": [
            "AI prompt",
            "data parsing"
          ],
          "mocking_needed": true,
          "reason": "Largest conditional block (27 lines) likely handling critical AI response parsing or complex insight generation logic. High complexity suggests multiple decision points that need thorough testing."
        },
        {
          "name": "dfs",
          "file": "src/insightGenerator.ts",
          "startLine": 201,
          "endLine": 227,
          "complexity": "high",
          "dependencies": [
            "data structures"
          ],
          "mocking_needed": false,
          "reason": "Named function (DFS algorithm) with 27 lines indicates complex graph/tree traversal logic, likely for analyzing code dependencies or structure. Critical for accurate analysis."
        },
        {
          "name": "for",
          "file": "src/insightGenerator.ts",
          "startLine": 207,
          "endLine": 224,
          "complexity": "high",
          "dependencies": [
            "nested iteration"
          ],
          "mocking_needed": false,
          "reason": "Nested loop within dfs function (18 lines) suggesting complex iteration over analysis data. Likely core aggregation logic that needs validation."
        },
        {
          "name": "for",
          "file": "src/insightGenerator.ts",
          "startLine": 80,
          "endLine": 93,
          "complexity": "medium",
          "dependencies": [
            "data collection"
          ],
          "mocking_needed": false,
          "reason": "14-line loop with nested conditional, likely aggregating analysis results. Important for ensuring complete data collection."
        },
        {
          "name": "if",
          "file": "src/insightGenerator.ts",
          "startLine": 102,
          "endLine": 114,
          "complexity": "medium",
          "dependencies": [
            "validation"
          ],
          "mocking_needed": false,
          "reason": "13-line conditional suggesting data validation or transformation logic. Critical for handling incomplete/ambiguous data as specified in requirements."
        },
        {
          "name": "if",
          "file": "src/insightGenerator.ts",
          "startLine": 81,
          "endLine": 92,
          "complexity": "medium",
          "dependencies": [
            "filtering"
          ],
          "mocking_needed": false,
          "reason": "12-line nested conditional within a loop, likely filtering or processing analysis data. Essential for data quality."
        },
        {
          "name": "for",
          "file": "src/insightGenerator.ts",
          "startLine": 213,
          "endLine": 223,
          "complexity": "medium",
          "dependencies": [
            "nested processing"
          ],
          "mocking_needed": false,
          "reason": "11-line deeply nested loop (third level) with conditional, representing complex traversal logic requiring thorough edge case testing."
        },
        {
          "name": "if",
          "file": "src/insightGenerator.ts",
          "startLine": 259,
          "endLine": 269,
          "complexity": "medium",
          "dependencies": [
            "formatting"
          ],
          "mocking_needed": false,
          "reason": "11-line loop likely handling Markdown formatting or documentation structure generation, critical for output quality."
        },
        {
          "name": "if",
          "file": "src/insightGenerator.ts",
          "startLine": 53,
          "endLine": 63,
          "complexity": "medium",
          "dependencies": [
            "entry validation"
          ],
          "mocking_needed": false,
          "reason": "11-line conditional near file start, likely entry point validation or initial data processing. Important for catching issues early."
        },
        {
          "name": "if",
          "file": "src/insightGenerator.ts",
          "startLine": 66,
          "endLine": 76,
          "complexity": "medium",
          "dependencies": [
            "data preparation"
          ],
          "mocking_needed": false,
          "reason": "11-line conditional following entry validation, likely preparing data for analysis or insight generation."
        },
        {
          "name": "if",
          "file": "src/insightGenerator.ts",
          "startLine": 116,
          "endLine": 125,
          "complexity": "medium",
          "dependencies": [
            "AI response"
          ],
          "mocking_needed": true,
          "reason": "10-line conditional likely handling AI response parsing or error cases, critical for robust AI integration."
        },
        {
          "name": "if",
          "file": "src/insightGenerator.ts",
          "startLine": 136,
          "endLine": 145,
          "complexity": "medium",
          "dependencies": [
            "parsing"
          ],
          "mocking_needed": true,
          "reason": "10-line nested conditional within largest block, likely parsing specific AI response formats as specified in requirements."
        },
        {
          "name": "if",
          "file": "src/insightGenerator.ts",
          "startLine": 290,
          "endLine": 299,
          "complexity": "medium",
          "dependencies": [
            "refactoring plans"
          ],
          "mocking_needed": false,
          "reason": "10-line conditional likely generating refactoring plans, directly addresses requirement for 'refactoring plan actionability' testing."
        },
        {
          "name": "if",
          "file": "src/insightGenerator.ts",
          "startLine": 310,
          "endLine": 319,
          "complexity": "medium",
          "dependencies": [
            "documentation"
          ],
          "mocking_needed": false,
          "reason": "10-line conditional likely handling documentation structure or completeness validation as per requirements."
        },
        {
          "name": "if",
          "file": "src/insightGenerator.ts",
          "startLine": 330,
          "endLine": 339,
          "complexity": "medium",
          "dependencies": [
            "output formatting"
          ],
          "mocking_needed": false,
          "reason": "10-line conditional near end of file, likely final output formatting or insight compilation, ensuring complete user value delivery."
        }
      ]
    },
    {
      "group_id": "file-system-watch",
      "name": "File System Operations & Change Detection",
      "priority": 5,
      "functions": [
        {
          "name": "if",
          "file": "src/fileWatcher.ts",
          "startLine": 78,
          "endLine": 82,
          "complexity": "medium",
          "dependencies": [
            "file system",
            "workspace monitoring"
          ],
          "mocking_needed": true,
          "reason": "Longest conditional block (5 lines) likely handling critical file change detection logic or debouncing. Given the test area's focus on change detection accuracy and debouncing, this is likely core functionality for preventing redundant analysis triggers."
        },
        {
          "name": "if",
          "file": "src/fileWatcher.ts",
          "startLine": 54,
          "endLine": 57,
          "complexity": "medium",
          "dependencies": [
            "file operations"
          ],
          "mocking_needed": true,
          "reason": "4-line conditional block likely handling file deletion or rename operations, which are explicitly mentioned as edge cases requiring testing. File lifecycle events are critical for maintaining analysis synchronization."
        },
        {
          "name": "if",
          "file": "src/fileWatcher.ts",
          "startLine": 59,
          "endLine": 62,
          "complexity": "medium",
          "dependencies": [
            "file operations"
          ],
          "mocking_needed": true,
          "reason": "4-line conditional block adjacent to deletion/rename logic, possibly handling complementary file operations or validation. Sequential conditionals often represent decision trees for different file event types."
        },
        {
          "name": "if",
          "file": "src/fileWatcher.ts",
          "startLine": 31,
          "endLine": 33,
          "complexity": "low",
          "dependencies": [
            "initialization"
          ],
          "mocking_needed": false,
          "reason": "Early conditional (line 31) likely performing initialization checks or guard clauses at the entry point of file watching setup. Entry point validation is critical for preventing cascading failures."
        },
        {
          "name": "if",
          "file": "src/fileWatcher.ts",
          "startLine": 36,
          "endLine": 38,
          "complexity": "low",
          "dependencies": [
            "configuration"
          ],
          "mocking_needed": false,
          "reason": "Conditional near initialization logic, possibly validating workspace configuration or file watching permissions, which are mentioned edge cases in the test area description."
        },
        {
          "name": "if",
          "file": "src/fileWatcher.ts",
          "startLine": 50,
          "endLine": 52,
          "complexity": "low",
          "dependencies": [
            "file filtering"
          ],
          "mocking_needed": true,
          "reason": "Mid-range conditional likely filtering files for incremental re-analysis or determining which changes trigger analysis. Critical for performance with high-frequency changes."
        },
        {
          "name": "if",
          "file": "src/fileWatcher.ts",
          "startLine": 103,
          "endLine": 105,
          "complexity": "low",
          "dependencies": [
            "result persistence"
          ],
          "mocking_needed": true,
          "reason": "Later conditional (line 103) likely involved in result saving/loading reliability checks or validation before persisting data, preventing data loss which is a critical concern."
        },
        {
          "name": "if",
          "file": "src/fileWatcher.ts",
          "startLine": 113,
          "endLine": 115,
          "complexity": "low",
          "dependencies": [
            "result persistence"
          ],
          "mocking_needed": true,
          "reason": "Conditional in result persistence section, possibly handling error cases or concurrent modification scenarios during save/load operations."
        },
        {
          "name": "if",
          "file": "src/fileWatcher.ts",
          "startLine": 120,
          "endLine": 122,
          "complexity": "low",
          "dependencies": [
            "cleanup"
          ],
          "mocking_needed": false,
          "reason": "Late-stage conditional likely handling cleanup, disposal, or final validation. Important for ensuring proper resource management and preventing memory leaks in long-running file watchers."
        }
      ]
    }
  ]
}