{
  "strategy": "Focus testing on the core value delivery paths: workspace analysis pipeline (entry to insights), AI integration reliability (API calls, rate limiting, retries), and test generation workflows (detection to validation). Prioritize areas that directly impact user-facing features and data integrity, then cover error handling for external dependencies (AI providers, file system, test execution). Aim for 80% coverage of critical paths with ~50-75 well-designed tests.",
  "total_functions": 1217,
  "testable_functions": 45,
  "function_groups": [
    {
      "group_id": "analysis-pipeline",
      "name": "Workspace & File Analysis Pipeline",
      "priority": 1,
      "functions": [
        {
          "name": "for",
          "file": "src/analysis/enhancedAnalyzer.ts",
          "startLine": 488,
          "endLine": 617,
          "complexity": "high",
          "dependencies": [
            "typescript",
            "ast-parser"
          ],
          "mocking_needed": true,
          "reason": "Largest and most complex function (130 lines) in the analyzer - likely core analysis loop that processes code structures. Critical entry point that drives parsing logic."
        },
        {
          "name": "for",
          "file": "src/analyzer.ts",
          "startLine": 161,
          "endLine": 200,
          "complexity": "high",
          "dependencies": [
            "typescript",
            "fs"
          ],
          "mocking_needed": true,
          "reason": "40-line core loop in main analyzer file - likely iterates through workspace files or AST nodes. Entry point for workspace-level analysis."
        },
        {
          "name": "for",
          "file": "src/analyzer.ts",
          "startLine": 372,
          "endLine": 404,
          "complexity": "high",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "Complex 33-line loop with nested conditionals (28 lines) - likely processes dependencies or relationships between code elements."
        },
        {
          "name": "traverse",
          "file": "src/analysis/enhancedAnalyzer.ts",
          "startLine": 744,
          "endLine": 771,
          "complexity": "high",
          "dependencies": [
            "typescript",
            "ast-parser"
          ],
          "mocking_needed": true,
          "reason": "Core traversal function (28 lines) for AST navigation - essential for circular dependency detection and code structure analysis."
        },
        {
          "name": "for",
          "file": "src/analyzer.ts",
          "startLine": 203,
          "endLine": 229,
          "complexity": "medium",
          "dependencies": [
            "typescript",
            "fs"
          ],
          "mocking_needed": true,
          "reason": "27-line loop in main analyzer - likely processes file-level analysis results or aggregates metrics."
        },
        {
          "name": "for",
          "file": "src/analysis/enhancedAnalyzer.ts",
          "startLine": 693,
          "endLine": 719,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "27-line loop with nested conditionals - likely handles complex relationship detection or pattern matching."
        },
        {
          "name": "traverse",
          "file": "src/analyzer.ts",
          "startLine": 314,
          "endLine": 337,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "24-line traversal function in main analyzer - core AST navigation logic for complexity and pattern detection."
        },
        {
          "name": "visit",
          "file": "src/analysis/functionAnalyzer.ts",
          "startLine": 198,
          "endLine": 220,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "23-line visitor pattern implementation - critical for function-level analysis and complexity calculation."
        },
        {
          "name": "for",
          "file": "src/analyzer.ts",
          "startLine": 420,
          "endLine": 441,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "22-line loop with conditional logic - likely processes orphaned code detection or dead code identification."
        },
        {
          "name": "for",
          "file": "src/analysis/functionAnalyzer.ts",
          "startLine": 396,
          "endLine": 415,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "20-line loop with nested conditionals - handles function-level relationship or dependency tracking."
        },
        {
          "name": "visit",
          "file": "src/analysis/enhancedAnalyzer.ts",
          "startLine": 104,
          "endLine": 122,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "19-line visitor implementation in enhanced analyzer - core pattern for AST node processing."
        },
        {
          "name": "visit",
          "file": "src/analysis/functionAnalyzer.ts",
          "startLine": 339,
          "endLine": 357,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "19-line visitor for function analysis - critical for extracting function metadata and metrics."
        },
        {
          "name": "traverse",
          "file": "src/analyzer.ts",
          "startLine": 283,
          "endLine": 300,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "18-line traversal in main analyzer - handles specific traversal logic for dependency or import analysis."
        },
        {
          "name": "for",
          "file": "src/analysis/functionAnalyzer.ts",
          "startLine": 23,
          "endLine": 40,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "18-line loop at start of function analyzer - likely entry point for batch function processing."
        },
        {
          "name": "switch",
          "file": "src/analyzer.ts",
          "startLine": 527,
          "endLine": 551,
          "complexity": "medium",
          "dependencies": [
            "typescript"
          ],
          "mocking_needed": true,
          "reason": "25-line switch statement - handles different node types or analysis modes, central control flow logic."
        }
      ]
    },
    {
      "group_id": "ai-integration",
      "name": "AI Provider Integration & Resilience",
      "priority": 2,
      "functions": [
        {
          "name": "for",
          "file": "src/ai/llmRetryHandler.ts",
          "startLine": 60,
          "endLine": 90,
          "complexity": "high",
          "dependencies": [
            "external AI providers"
          ],
          "mocking_needed": true,
          "reason": "Core retry logic with exponential backoff - critical for handling API failures and rate limits. 31 lines with complex error handling."
        },
        {
          "name": "for",
          "file": "src/ai/llmRetryHandler.ts",
          "startLine": 155,
          "endLine": 186,
          "complexity": "high",
          "dependencies": [
            "external AI providers"
          ],
          "mocking_needed": true,
          "reason": "Secondary retry mechanism - 32 lines handling different retry scenarios and backoff strategies."
        },
        {
          "name": "for",
          "file": "src/ai/llmResponseParser.ts",
          "startLine": 390,
          "endLine": 439,
          "complexity": "high",
          "dependencies": [
            "AI response data"
          ],
          "mocking_needed": true,
          "reason": "Most complex response parsing logic - 50 lines with multiple nested conditionals. Critical for handling malformed AI responses."
        },
        {
          "name": "for",
          "file": "src/ai/llmResponseParser.ts",
          "startLine": 313,
          "endLine": 348,
          "complexity": "high",
          "dependencies": [
            "AI response data"
          ],
          "mocking_needed": true,
          "reason": "Complex parsing logic - 36 lines with nested conditionals handling different response formats and edge cases."
        },
        {
          "name": "switch",
          "file": "src/ai/providers/providerFactory.ts",
          "startLine": 23,
          "endLine": 38,
          "complexity": "medium",
          "dependencies": [
            "OpenAI",
            "Anthropic providers"
          ],
          "mocking_needed": true,
          "reason": "Entry point for provider selection - determines which AI service to use. Critical decision point for all AI operations."
        },
        {
          "name": "constructor",
          "file": "src/ai/llmRateLimiter.ts",
          "startLine": 20,
          "endLine": 33,
          "complexity": "medium",
          "dependencies": [
            "rate limit configuration"
          ],
          "mocking_needed": false,
          "reason": "Initializes rate limiting state - foundation for all rate limiting logic. 14 lines of setup logic."
        },
        {
          "name": "if",
          "file": "src/ai/llmResponseParser.ts",
          "startLine": 17,
          "endLine": 30,
          "complexity": "medium",
          "dependencies": [
            "AI response data"
          ],
          "mocking_needed": true,
          "reason": "Entry point for response parsing - 14 lines handling initial validation and error cases."
        },
        {
          "name": "if",
          "file": "src/ai/llmResponseParser.ts",
          "startLine": 60,
          "endLine": 72,
          "complexity": "medium",
          "dependencies": [
            "AI response data"
          ],
          "mocking_needed": true,
          "reason": "Handles response validation and error conditions - 13 lines critical for graceful degradation."
        },
        {
          "name": "errorMessage",
          "file": "src/ai/llmRetryHandler.ts",
          "startLine": 104,
          "endLine": 115,
          "complexity": "medium",
          "dependencies": [
            "error objects"
          ],
          "mocking_needed": false,
          "reason": "Error message extraction logic - 12 lines handling various error formats from different providers."
        },
        {
          "name": "for",
          "file": "src/ai/llmResponseParser.ts",
          "startLine": 275,
          "endLine": 285,
          "complexity": "medium",
          "dependencies": [
            "AI response data"
          ],
          "mocking_needed": true,
          "reason": "Incremental response processing - 11 lines handling streaming/partial responses."
        },
        {
          "name": "for",
          "file": "src/ai/llmResponseParser.ts",
          "startLine": 123,
          "endLine": 134,
          "complexity": "medium",
          "dependencies": [
            "AI response data"
          ],
          "mocking_needed": true,
          "reason": "Response transformation logic - 12 lines processing structured AI output."
        },
        {
          "name": "if",
          "file": "src/ai/providers/anthropicProvider.ts",
          "startLine": 20,
          "endLine": 26,
          "complexity": "low",
          "dependencies": [
            "Anthropic API"
          ],
          "mocking_needed": true,
          "reason": "API key validation for Anthropic - critical entry point preventing invalid API calls."
        },
        {
          "name": "if",
          "file": "src/ai/providers/openAIProvider.ts",
          "startLine": 20,
          "endLine": 26,
          "complexity": "low",
          "dependencies": [
            "OpenAI API"
          ],
          "mocking_needed": true,
          "reason": "API key validation for OpenAI - critical entry point preventing invalid API calls."
        },
        {
          "name": "for",
          "file": "src/ai/providers/openAIProvider.ts",
          "startLine": 120,
          "endLine": 133,
          "complexity": "medium",
          "dependencies": [
            "OpenAI API"
          ],
          "mocking_needed": true,
          "reason": "OpenAI request processing - 14 lines handling API communication and response formatting."
        },
        {
          "name": "if",
          "file": "src/ai/providers/openAIProvider.ts",
          "startLine": 89,
          "endLine": 94,
          "complexity": "low",
          "dependencies": [
            "OpenAI API"
          ],
          "mocking_needed": true,
          "reason": "Request validation and error handling - prevents malformed API calls."
        }
      ]
    },
    {
      "group_id": "state-management-persistence",
      "name": "State Management, File Watching & Data Persistence",
      "priority": 5,
      "functions": [
        {
          "name": "activate",
          "file": "src/extension.ts",
          "startLine": 31,
          "endLine": 91,
          "complexity": "high",
          "dependencies": [
            "vscode",
            "storage",
            "fileWatcher",
            "webviewProviders"
          ],
          "mocking_needed": true,
          "reason": "Extension entry point that initializes all state management, file watchers, and storage. Critical for ensuring proper setup of the entire state management system."
        },
        {
          "name": "analyzeWorkspace",
          "file": "src/extension.ts",
          "startLine": 123,
          "endLine": 191,
          "complexity": "high",
          "dependencies": [
            "vscode",
            "storage",
            "analyzer",
            "webview"
          ],
          "mocking_needed": true,
          "reason": "Core function that triggers analysis and persists results. Contains multiple conditionals for state validation and error handling. Critical for data persistence and UI synchronization."
        },
        {
          "name": "analyzeCurrentFile",
          "file": "src/extension.ts",
          "startLine": 193,
          "endLine": 224,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "storage",
            "analyzer"
          ],
          "mocking_needed": true,
          "reason": "Handles incremental file analysis and updates state. Must test proper state updates and synchronization with UI views."
        },
        {
          "name": "clearAllData",
          "file": "src/extension.ts",
          "startLine": 396,
          "endLine": 419,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "storage",
            "webview"
          ],
          "mocking_needed": true,
          "reason": "Manages state reset and data persistence cleanup. Critical for testing state management edge cases and ensuring proper cleanup with user confirmation."
        },
        {
          "name": "clearCache",
          "file": "src/extension.ts",
          "startLine": 280,
          "endLine": 286,
          "complexity": "low",
          "dependencies": [
            "storage",
            "vscode"
          ],
          "mocking_needed": true,
          "reason": "Handles cache invalidation which affects stale data issues. Important for testing state consistency."
        },
        {
          "name": "deactivate",
          "file": "src/extension.ts",
          "startLine": 676,
          "endLine": 683,
          "complexity": "low",
          "dependencies": [
            "storage",
            "fileWatcher"
          ],
          "mocking_needed": true,
          "reason": "Cleanup function that ensures proper disposal of watchers and saves state. Critical for preventing memory leaks and data loss."
        },
        {
          "name": "showSettings",
          "file": "src/extension.ts",
          "startLine": 424,
          "endLine": 463,
          "complexity": "high",
          "dependencies": [
            "vscode",
            "webview"
          ],
          "mocking_needed": true,
          "reason": "Manages settings webview state and message handling. Contains switch statement for handling state changes from UI."
        },
        {
          "name": "getSettingsHtml",
          "file": "src/extension.ts",
          "startLine": 465,
          "endLine": 612,
          "complexity": "high",
          "dependencies": [
            "vscode",
            "configuration"
          ],
          "mocking_needed": true,
          "reason": "Generates UI with current state. Very long function (148 lines) that synchronizes configuration state with webview, includes navigation handlers."
        },
        {
          "name": "openLatestReport",
          "file": "src/extension.ts",
          "startLine": 614,
          "endLine": 643,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "storage",
            "fs"
          ],
          "mocking_needed": true,
          "reason": "Loads persisted analysis data and navigates to results. Tests deserialization and error handling for data persistence."
        },
        {
          "name": "openLatestUnitTestReport",
          "file": "src/extension.ts",
          "startLine": 645,
          "endLine": 674,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "storage",
            "fs"
          ],
          "mocking_needed": true,
          "reason": "Similar to openLatestReport, tests deserialization of unit test data and navigation. Important for state consistency."
        },
        {
          "name": "copyAllInsights",
          "file": "src/extension.ts",
          "startLine": 226,
          "endLine": 240,
          "complexity": "low",
          "dependencies": [
            "vscode",
            "storage"
          ],
          "mocking_needed": true,
          "reason": "Reads from stored state to copy data. Tests state retrieval and error handling when data is missing."
        },
        {
          "name": "copyFileInsights",
          "file": "src/extension.ts",
          "startLine": 242,
          "endLine": 264,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "storage"
          ],
          "mocking_needed": true,
          "reason": "Accesses persisted file-level data. Tests state retrieval for specific files and conditional logic."
        },
        {
          "name": "showProviderStatus",
          "file": "src/extension.ts",
          "startLine": 312,
          "endLine": 358,
          "complexity": "high",
          "dependencies": [
            "vscode",
            "configuration",
            "providers"
          ],
          "mocking_needed": true,
          "reason": "Long function (47 lines) that displays configuration state. Tests state reading and UI synchronization."
        },
        {
          "name": "switchProvider",
          "file": "src/extension.ts",
          "startLine": 360,
          "endLine": 394,
          "complexity": "medium",
          "dependencies": [
            "vscode",
            "configuration"
          ],
          "mocking_needed": true,
          "reason": "Updates configuration state. Tests state persistence of provider settings with validation and error handling."
        },
        {
          "name": "constructor",
          "file": "src/storage/incrementalStorage.ts",
          "startLine": 50,
          "endLine": 58,
          "complexity": "low",
          "dependencies": [
            "vscode",
            "storage"
          ],
          "mocking_needed": true,
          "reason": "Initializes storage system for state persistence. Foundation for all data persistence testing with timestamp tracking."
        }
      ]
    }
  ]
}